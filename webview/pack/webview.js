/*! For license information please see webview.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(self,(()=>(()=>{var e={54:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformToRootBounds=t.containsSome=t.translateBounds=t.translatePoint=t.findParentByFeature=t.findParent=t.registerModelElement=void 0;const o=n(2041),i=n(166);function r(e,t,n){if(t!==n){for(;t instanceof i.SChildElementImpl;)if(e=t.localToParent(e),(t=t.parent)===n)return e;const o=[];for(;n instanceof i.SChildElementImpl;)o.push(n),n=n.parent;if(t!==n)throw new Error("Incompatible source and target: "+t.id+", "+n.id);for(let t=o.length-1;t>=0;t--)e=o[t].parentToLocal(e)}return e}t.registerModelElement=function(e,t,n,i,r){e.bind(o.TYPES.SModelElementRegistration).toConstantValue({type:t,constr:n,features:i,isOverride:r})},t.findParent=function(e,t){let n=e;for(;void 0!==n;){if(t(n))return n;n=n instanceof i.SChildElementImpl?n.parent:void 0}return n},t.findParentByFeature=function(e,t){let n=e;for(;void 0!==n;){if(t(n))return n;n=n instanceof i.SChildElementImpl?n.parent:void 0}return n},t.translatePoint=r,t.translateBounds=function(e,t,n){const o=r(e,t,n),i=r({x:e.x+e.width,y:e.y+e.height},t,n);return{x:o.x,y:o.y,width:i.x-o.x,height:i.y-o.y}},t.containsSome=function(e,t){const n=t=>t.some((t=>(t=>void 0!==e.index.getById(t.id))(t)||n(t.children)));return n([t])},t.transformToRootBounds=function(e,t){for(;e instanceof i.SChildElementImpl;)t=e.localToParent(t),e=e.parent;return t}},68:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExportable=t.exportFeature=void 0,t.exportFeature=Symbol("exportFeature"),t.isExportable=function(e){return e.hasFeature(t.exportFeature)}},136:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIssue=t.SIssueMarker=t.SIssueMarkerImpl=t.SDecoration=t.isDecoration=t.decorationFeature=void 0;const o=n(5855),i=n(6538);t.decorationFeature=Symbol("decorationFeature"),t.isDecoration=function(e){return e.hasFeature(t.decorationFeature)};class r extends o.SShapeElementImpl{}t.SDecoration=r,r.DEFAULT_FEATURES=[t.decorationFeature,o.boundsFeature,i.hoverFeedbackFeature,i.popupFeature];class s extends r{}t.SIssueMarkerImpl=s,t.SIssueMarker=s,t.SIssue=class{}},166:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModelIndexImpl=t.createRandomId=t.SModelRootImpl=t.SChildElementImpl=t.SParentElementImpl=t.isParent=t.SModelElementImpl=void 0;const o=n(5017),i=n(8302);class r{get root(){let e=this;for(;e;){if(e instanceof c)return e;e=e instanceof a?e.parent:void 0}throw new Error("Element has no root")}get index(){return this.root.index}hasFeature(e){return void 0!==this.features&&this.features.has(e)}}t.SModelElementImpl=r,t.isParent=function(e){const t=e.children;return void 0!==t&&t.constructor===Array};class s extends r{constructor(){super(...arguments),this.children=[]}add(e,t){const n=this.children;if(void 0===t)n.push(e);else{if(t<0||t>this.children.length)throw new Error(`Child index ${t} out of bounds (0..${n.length})`);n.splice(t,0,e)}e.parent=this,this.index.add(e)}remove(e){const t=this.children,n=t.indexOf(e);if(n<0)throw new Error(`No such child ${e.id}`);t.splice(n,1),this.index.remove(e)}removeAll(e){const t=this.children;if(void 0!==e){for(let n=t.length-1;n>=0;n--)if(e(t[n])){const e=t.splice(n,1)[0];this.index.remove(e)}}else t.forEach((e=>{this.index.remove(e)})),t.splice(0,t.length)}move(e,t){const n=this.children,o=n.indexOf(e);if(-1===o)throw new Error(`No such child ${e.id}`);if(t<0||t>n.length-1)throw new Error(`Child index ${t} out of bounds (0..${n.length})`);n.splice(o,1),n.splice(t,0,e)}localToParent(e){return(0,o.isBounds)(e)?e:{x:e.x,y:e.y,width:-1,height:-1}}parentToLocal(e){return(0,o.isBounds)(e)?e:{x:e.x,y:e.y,width:-1,height:-1}}}t.SParentElementImpl=s;class a extends s{}t.SChildElementImpl=a;class c extends s{constructor(e=new l){super(),this.canvasBounds=o.Bounds.EMPTY,Object.defineProperty(this,"index",{value:e,writable:!1})}}t.SModelRootImpl=c;function d(e=8){let t="";for(let n=0;n<e;n++)t+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(36*Math.random()));return t}t.createRandomId=d;class l{constructor(){this.id2element=new Map}add(e){if(e.id){if(this.contains(e))throw new Error("Duplicate ID in model: "+e.id)}else do{e.id=d()}while(this.contains(e));if(this.id2element.set(e.id,e),e instanceof s)for(const t of e.children)this.add(t)}remove(e){if(this.id2element.delete(e.id),e instanceof s)for(const t of e.children)this.remove(t)}contains(e){return this.id2element.has(e.id)}getById(e){return this.id2element.get(e)}getAttachedElements(e){return[]}all(){return(0,i.mapIterable)(this.id2element,(([e,t])=>t))}}t.ModelIndexImpl=l},221:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.LocalModelSource=void 0;const r=n(4213),s=n(2650),a=n(7020),c=n(3807),d=n(2608),l=n(2041),u=n(5857),h=n(3635),p=n(7747);let f=class extends p.ModelSource{constructor(){super(...arguments),this.currentRoot=u.EMPTY_ROOT}get model(){return this.currentRoot}set model(e){this.setModel(e)}initialize(e){super.initialize(e),e.register(a.ComputedBoundsAction.KIND,this),e.register(a.RequestPopupModelAction.KIND,this)}setModel(e){return this.currentRoot=e,this.submitModel(e,!1)}commitModel(e){const t=this.currentRoot;return this.currentRoot=e,t}updateModel(e){return void 0===e?this.submitModel(this.currentRoot,!0):(this.currentRoot=e,this.submitModel(e,!0))}async getSelection(){const e=await this.actionDispatcher.request(c.GetSelectionAction.create()),t=[];return this.gatherSelectedElements(this.currentRoot,new Set(e.selectedElementsIDs),t),t}gatherSelectedElements(e,t,n){if(t.has(e.id)&&n.push(e),e.children)for(const o of e.children)this.gatherSelectedElements(o,t,n)}async getViewport(){const e=await this.actionDispatcher.request(c.GetViewportAction.create());return{scroll:e.viewport.scroll,zoom:e.viewport.zoom,canvasBounds:e.canvasBounds}}async submitModel(e,t,n){if(this.viewerOptions.needsClientLayout){const o=await this.actionDispatcher.request(a.RequestBoundsAction.create(e)),i=this.computedBoundsApplicator.apply(this.currentRoot,o);await this.doSubmitModel(e,t,n,i)}else await this.doSubmitModel(e,t,n)}async doSubmitModel(e,t,n,o){if(void 0!==this.layoutEngine)try{const t=this.layoutEngine.layout(e,o);t instanceof Promise?e=await t:void 0!==t&&(e=t)}catch(e){this.logger.error(this,e.toString(),e.stack)}const i=this.lastSubmittedModelType;if(this.lastSubmittedModelType=e.type,n&&n.kind===a.RequestModelAction.KIND&&n.requestId){const t=n;await this.actionDispatcher.dispatch(a.SetModelAction.create(e,t.requestId))}else if(t&&e.type===i){const o=Array.isArray(t)?t:e;await this.actionDispatcher.dispatch(a.UpdateModelAction.create(o,{animate:!0,cause:n}))}else await this.actionDispatcher.dispatch(a.SetModelAction.create(e))}applyMatches(e){const t=this.currentRoot;return(0,h.applyMatches)(t,e),this.submitModel(t,e)}addElements(e){const t=[];for(const n of e){const e=n;"object"==typeof e.element&&"string"==typeof e.parentId?t.push({right:e.element,rightParentId:e.parentId}):"string"==typeof e.id&&t.push({right:e,rightParentId:this.currentRoot.id})}return this.applyMatches(t)}removeElements(e){const t=[],n=new d.SModelIndex;n.add(this.currentRoot);for(const o of e){const e=o;if(void 0!==e.elementId&&void 0!==e.parentId){const o=n.getById(e.elementId);void 0!==o&&t.push({left:o,leftParentId:e.parentId})}else{const o=n.getById(e);void 0!==o&&t.push({left:o,leftParentId:this.currentRoot.id})}}return this.applyMatches(t)}handle(e){switch(e.kind){case a.RequestModelAction.KIND:this.handleRequestModel(e);break;case a.ComputedBoundsAction.KIND:this.computedBoundsApplicator.apply(this.currentRoot,e);break;case a.RequestPopupModelAction.KIND:this.handleRequestPopupModel(e);break;case a.ExportSvgAction.KIND:this.handleExportSvgAction(e)}}handleRequestModel(e){this.submitModel(this.currentRoot,!1,e)}handleRequestPopupModel(e){if(void 0!==this.popupModelProvider){const t=(0,d.findElement)(this.currentRoot,e.elementId),n=this.popupModelProvider.getPopupModel(e,t);void 0!==n&&(n.canvasBounds=e.bounds,this.actionDispatcher.dispatch(a.SetPopupModelAction.create(n,e.requestId)))}}handleExportSvgAction(e){const t=new Blob([e.svg],{type:"text/plain;charset=utf-8"});(0,r.saveAs)(t,"diagram.svg")}};t.LocalModelSource=f,o([(0,s.inject)(l.TYPES.ILogger),i("design:type",Object)],f.prototype,"logger",void 0),o([(0,s.inject)(p.ComputedBoundsApplicator),i("design:type",p.ComputedBoundsApplicator)],f.prototype,"computedBoundsApplicator",void 0),o([(0,s.inject)(l.TYPES.IPopupModelProvider),(0,s.optional)(),i("design:type",Object)],f.prototype,"popupModelProvider",void 0),o([(0,s.inject)(l.TYPES.IModelLayoutEngine),(0,s.optional)(),i("design:type",Object)],f.prototype,"layoutEngine",void 0),t.LocalModelSource=f=o([(0,s.injectable)()],f)},256:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isClonable=function(e){return"object"==typeof e&&null!==e&&"clone"in e&&"function"==typeof e.clone}},263:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;const a=s(n(9466));t.MetadataReader=class{getConstructorMetadata(e){return{compilerGeneratedMetadata:Reflect.getMetadata(a.DESIGN_PARAM_TYPES,e)??[],userGeneratedMetadata:Reflect.getMetadata(a.TAGGED,e)??{}}}getPropertiesMetadata(e){return Reflect.getMetadata(a.TAGGED_PROP,e)??{}}}},341:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForeignObjectElement=t.ForeignObjectElementImpl=t.ShapedPreRenderedElement=t.ShapedPreRenderedElementImpl=t.PreRenderedElement=t.PreRenderedElementImpl=t.HtmlRoot=t.HtmlRootImpl=t.RectangularPort=t.CircularPort=t.DiamondNode=t.RectangularNode=t.CircularNode=void 0;const o=n(5017),i=n(166),r=n(5855),s=n(5027),a=n(9882),c=n(356),d=n(2638);class l extends c.SNodeImpl{get anchorKind(){return d.ELLIPTIC_ANCHOR_KIND}}t.CircularNode=l;class u extends c.SNodeImpl{get anchorKind(){return d.RECTANGULAR_ANCHOR_KIND}}t.RectangularNode=u;class h extends c.SNodeImpl{get anchorKind(){return d.DIAMOND_ANCHOR_KIND}}t.DiamondNode=h;class p extends c.SPortImpl{get anchorKind(){return d.ELLIPTIC_ANCHOR_KIND}}t.CircularPort=p;class f extends c.SPortImpl{get anchorKind(){return d.RECTANGULAR_ANCHOR_KIND}}t.RectangularPort=f;class g extends i.SModelRootImpl{constructor(){super(...arguments),this.classes=[]}}t.HtmlRootImpl=g,t.HtmlRoot=g;class m extends i.SChildElementImpl{}t.PreRenderedElementImpl=m,t.PreRenderedElement=m;class y extends m{constructor(){super(...arguments),this.position=o.Point.ORIGIN,this.size=o.Dimension.EMPTY,this.selected=!1,this.alignment=o.Point.ORIGIN}get bounds(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}}set bounds(e){this.position={x:e.x,y:e.y},this.size={width:e.width,height:e.height}}}t.ShapedPreRenderedElementImpl=y,y.DEFAULT_FEATURES=[s.moveFeature,r.boundsFeature,a.selectFeature,r.alignFeature],t.ShapedPreRenderedElement=y;class v extends y{get bounds(){return o.Dimension.isValid(this.size)?{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}:(0,r.isBoundsAware)(this.parent)?{x:this.position.x,y:this.position.y,width:this.parent.bounds.width,height:this.parent.bounds.height}:o.Bounds.EMPTY}}t.ForeignObjectElementImpl=v,t.ForeignObjectElement=v},353:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateModelCommand=void 0;const s=n(2650),a=n(7020),c=n(5017),d=n(6320),l=n(3194),u=n(1391),h=n(166),p=n(5873),f=n(8416),g=n(5027),m=n(5855),y=n(1892),v=n(9882),b=n(3635),S=n(3152),P=n(2041),_=n(1644),E=n(2565),w=n(5778),O=n(54);let I=class extends l.Command{constructor(e){super(),this.action=e}execute(e){let t;return void 0!==this.action.newRoot?t=e.modelFactory.createRoot(this.action.newRoot):(t=e.modelFactory.createRoot(e.root),void 0!==this.action.matches&&this.applyMatches(t,this.action.matches,e)),this.oldRoot=e.root,this.newRoot=t,this.performUpdate(this.oldRoot,this.newRoot,e)}performUpdate(e,t,n){if(void 0!==this.action.animate&&!this.action.animate||e.id!==t.id)return e.type===t.type&&c.Dimension.isValid(e.canvasBounds)&&(t.canvasBounds=e.canvasBounds),(0,_.isViewport)(e)&&(0,_.isViewport)(t)&&(t.zoom=e.zoom,t.scroll=e.scroll),t;{let o;o=void 0===this.action.matches?(new b.ModelMatcher).match(e,t):this.convertToMatchResult(this.action.matches,e,t);const i=this.computeAnimation(t,o,n);return i instanceof d.Animation?i.start():i}}applyMatches(e,t,n){const o=e.index;for(const e of t)if(void 0!==e.left){const t=o.getById(e.left.id);t instanceof h.SChildElementImpl&&t.parent.remove(t)}for(const i of t)if(void 0!==i.right){const t=n.modelFactory.createElement(i.right);let r;void 0!==i.rightParentId&&(r=o.getById(i.rightParentId)),r instanceof h.SParentElementImpl?r.add(t):e.add(t)}}convertToMatchResult(e,t,n){const o={};for(const i of e){const e={};let r;void 0!==i.left&&(r=i.left.id,e.left=t.index.getById(r),e.leftParentId=i.leftParentId),void 0!==i.right&&(r=i.right.id,e.right=n.index.getById(r),e.rightParentId=i.rightParentId),void 0!==r&&(o[r]=e)}return o}computeAnimation(e,t,n){const o={fades:[]};(0,b.forEachMatch)(t,((t,i)=>{if(void 0!==i.left&&void 0!==i.right)this.updateElement(i.left,i.right,o);else if(void 0!==i.right){const e=i.right;(0,f.isFadeable)(e)&&(e.opacity=0,o.fades.push({element:e,type:"in"}))}else if(i.left instanceof h.SChildElementImpl){const t=i.left;if((0,f.isFadeable)(t)&&void 0!==i.leftParentId&&!(0,O.containsSome)(e,t)){const r=e.index.getById(i.leftParentId);if(r instanceof h.SParentElementImpl){const e=n.modelFactory.createElement(t);r.add(e),o.fades.push({element:e,type:"out"})}}}}));const i=this.createAnimations(o,e,n);return i.length>=2?new d.CompoundAnimation(e,n,i):1===i.length?i[0]:e}updateElement(e,t,n){if((0,g.isLocateable)(e)&&(0,g.isLocateable)(t)){const o=e.position,i=t.position;(0,c.almostEquals)(o.x,i.x)&&(0,c.almostEquals)(o.y,i.y)||(void 0===n.moves&&(n.moves=[]),n.moves.push({element:t,fromPosition:o,toPosition:i}),t.position=o)}(0,m.isSizeable)(e)&&(0,m.isSizeable)(t)&&(c.Dimension.isValid(t.bounds)?(0,c.almostEquals)(e.bounds.width,t.bounds.width)&&(0,c.almostEquals)(e.bounds.height,t.bounds.height)||(void 0===n.resizes&&(n.resizes=[]),n.resizes.push({element:t,fromDimension:{width:e.bounds.width,height:e.bounds.height},toDimension:{width:t.bounds.width,height:t.bounds.height}})):t.bounds={x:t.bounds.x,y:t.bounds.y,width:e.bounds.width,height:e.bounds.height}),e instanceof w.SRoutableElementImpl&&t instanceof w.SRoutableElementImpl&&this.edgeRouterRegistry&&(void 0===n.edgeMementi&&(n.edgeMementi=[]),n.edgeMementi.push({edge:t,before:this.takeSnapshot(e),after:this.takeSnapshot(t)})),(0,v.isSelectable)(e)&&(0,v.isSelectable)(t)&&(t.selected=e.selected),e instanceof h.SModelRootImpl&&t instanceof h.SModelRootImpl&&(t.canvasBounds=e.canvasBounds),e instanceof y.ViewportRootElementImpl&&t instanceof y.ViewportRootElementImpl&&(t.scroll=e.scroll,t.zoom=e.zoom)}takeSnapshot(e){return this.edgeRouterRegistry.get(e.routerKind).takeSnapshot(e)}createAnimations(e,t,n){const o=[];if(e.fades.length>0&&o.push(new u.FadeAnimation(t,e.fades,n,!0)),void 0!==e.moves&&e.moves.length>0){const i=new Map;for(const t of e.moves)i.set(t.element.id,t);o.push(new p.MoveAnimation(t,i,n,!1))}if(void 0!==e.resizes&&e.resizes.length>0){const i=new Map;for(const t of e.resizes)i.set(t.element.id,t);o.push(new S.ResizeAnimation(t,i,n,!1))}return void 0!==e.edgeMementi&&e.edgeMementi.length>0&&o.push(new p.MorphEdgesAnimation(t,e.edgeMementi,n,!1)),o}undo(e){return this.performUpdate(this.newRoot,this.oldRoot,e)}redo(e){return this.performUpdate(this.oldRoot,this.newRoot,e)}};t.UpdateModelCommand=I,I.KIND=a.UpdateModelAction.KIND,o([(0,s.inject)(E.EdgeRouterRegistry),(0,s.optional)(),i("design:type",E.EdgeRouterRegistry)],I.prototype,"edgeRouterRegistry",void 0),t.UpdateModelCommand=I=o([(0,s.injectable)(),r(0,(0,s.inject)(P.TYPES.Action)),i("design:paramtypes",[Object])],I)},356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SGraphIndex=t.SCompartmentImpl=t.SLabelImpl=t.SEdgeImpl=t.SPortImpl=t.SNodeImpl=t.SGraphImpl=void 0;const o=n(5017),i=n(166),r=n(5855),s=n(3706),a=n(408),c=n(4246),d=n(8416),l=n(6538),u=n(5027),h=n(5778),p=n(9882),f=n(1892),g=n(8302);class m extends f.ViewportRootElementImpl{constructor(e=new _){super(e)}}t.SGraphImpl=m;class y extends h.SConnectableElementImpl{constructor(){super(...arguments),this.selected=!1,this.hoverFeedback=!1,this.opacity=1}canConnect(e,t){return void 0===this.children.find((e=>e instanceof v))}get incomingEdges(){const e=this.index;return e instanceof _?e.getIncomingEdges(this):this.index.all().filter((e=>e instanceof b)).filter((e=>e.targetId===this.id))}get outgoingEdges(){const e=this.index;return e instanceof _?e.getOutgoingEdges(this):this.index.all().filter((e=>e instanceof b)).filter((e=>e.sourceId===this.id))}}t.SNodeImpl=y,y.DEFAULT_FEATURES=[h.connectableFeature,a.deletableFeature,p.selectFeature,r.boundsFeature,u.moveFeature,r.layoutContainerFeature,d.fadeFeature,l.hoverFeedbackFeature,l.popupFeature];class v extends h.SConnectableElementImpl{constructor(){super(...arguments),this.selected=!1,this.hoverFeedback=!1,this.opacity=1}get incomingEdges(){const e=this.index;return e instanceof _?e.getIncomingEdges(this):super.incomingEdges.filter((e=>e instanceof b))}get outgoingEdges(){const e=this.index;return e instanceof _?e.getOutgoingEdges(this):super.outgoingEdges.filter((e=>e instanceof b))}}t.SPortImpl=v,v.DEFAULT_FEATURES=[h.connectableFeature,p.selectFeature,r.boundsFeature,d.fadeFeature,l.hoverFeedbackFeature];class b extends h.SRoutableElementImpl{constructor(){super(...arguments),this.selected=!1,this.hoverFeedback=!1,this.opacity=1}}t.SEdgeImpl=b,b.DEFAULT_FEATURES=[c.editFeature,a.deletableFeature,p.selectFeature,d.fadeFeature,l.hoverFeedbackFeature];class S extends r.SShapeElementImpl{constructor(){super(...arguments),this.selected=!1,this.alignment=o.Point.ORIGIN,this.opacity=1}}t.SLabelImpl=S,S.DEFAULT_FEATURES=[r.boundsFeature,r.alignFeature,r.layoutableChildFeature,s.edgeLayoutFeature,d.fadeFeature];class P extends r.SShapeElementImpl{constructor(){super(...arguments),this.opacity=1}}t.SCompartmentImpl=P,P.DEFAULT_FEATURES=[r.boundsFeature,r.layoutContainerFeature,r.layoutableChildFeature,d.fadeFeature];class _ extends i.ModelIndexImpl{constructor(){super(...arguments),this.outgoing=new Map,this.incoming=new Map}add(e){if(super.add(e),e instanceof b){if(e.sourceId){const t=this.outgoing.get(e.sourceId);void 0===t?this.outgoing.set(e.sourceId,[e]):t.push(e)}if(e.targetId){const t=this.incoming.get(e.targetId);void 0===t?this.incoming.set(e.targetId,[e]):t.push(e)}}}remove(e){if(super.remove(e),e instanceof b){const t=this.outgoing.get(e.sourceId);if(void 0!==t){const n=t.indexOf(e);n>=0&&(1===t.length?this.outgoing.delete(e.sourceId):t.splice(n,1))}const n=this.incoming.get(e.targetId);if(void 0!==n){const t=n.indexOf(e);t>=0&&(1===n.length?this.incoming.delete(e.targetId):n.splice(t,1))}}}getAttachedElements(e){return new g.FluentIterableImpl((()=>({outgoing:this.outgoing.get(e.id),incoming:this.incoming.get(e.id),nextOutgoingIndex:0,nextIncomingIndex:0})),(e=>{let t=e.nextOutgoingIndex;if(void 0!==e.outgoing&&t<e.outgoing.length)return e.nextOutgoingIndex=t+1,{done:!1,value:e.outgoing[t]};if(t=e.nextIncomingIndex,void 0!==e.incoming)for(;t<e.incoming.length;){const n=e.incoming[t];if(n.sourceId!==n.targetId)return e.nextIncomingIndex=t+1,{done:!1,value:n};t++}return{done:!0,value:void 0}}))}getIncomingEdges(e){return this.incoming.get(e.id)||[]}getOutgoingEdges(e){return this.outgoing.get(e.id)||[]}}t.SGraphIndex=_},408:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteElementCommand=t.ResolvedDelete=t.isDeletable=t.deletableFeature=void 0;const s=n(2650),a=n(7020),c=n(3194),d=n(166),l=n(2041);function u(e){return e instanceof d.SChildElementImpl&&e.hasFeature(t.deletableFeature)}t.deletableFeature=Symbol("deletableFeature"),t.isDeletable=u,t.ResolvedDelete=class{};let h=class extends c.Command{constructor(e){super(),this.action=e,this.resolvedDeletes=[]}execute(e){const t=e.root.index;for(const e of this.action.elementIds){const n=t.getById(e);n&&u(n)&&(this.resolvedDeletes.push({child:n,parent:n.parent}),n.parent.remove(n))}return e.root}undo(e){for(const e of this.resolvedDeletes)e.parent.add(e.child);return e.root}redo(e){for(const e of this.resolvedDeletes)e.parent.remove(e.child);return e.root}};t.DeleteElementCommand=h,h.KIND=a.DeleteElementAction.KIND,t.DeleteElementCommand=h=o([(0,s.injectable)(),r(0,(0,s.inject)(l.TYPES.Action)),i("design:paramtypes",[Object])],h)},417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSX=t.svg=t.html=void 0;const o=n(1638),i=["hook","on","style","class","props","attrs","dataset"];function r(e,t="props"){return(n,r,...s)=>{const a="function"==typeof n;return(0,o.jsx)(n,a?r:function(e,t,n){const o={};return n&&(o.ns=n),null===e||(i.forEach((t=>{e[t]&&(o[t]=e[t])})),Object.keys(e).forEach((n=>{if("key"===n||"classNames"===n||"selector"===n)return;const s=n.indexOf("-");if(s>0){const o=n.slice(0,s);i.includes(o)?r(o,n.slice(s+1),e[n]):r(t,n,e[n])}else o[n]||r(t,n,e[n])}))),o;function r(e,t,n){(o[e]||(o[e]={}))[t]=n}}(r,t,e),s)}}t.JSX=r;const s=r();t.html=s;const a=r("http://www.w3.org/2000/svg","attrs");t.svg=a},438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOpenable=t.openFeature=void 0,t.openFeature=Symbol("openFeature"),t.isOpenable=function(e){return e.hasFeature(t.openFeature)}},491:(e,t)=>{"use strict";function n(e,t,n){r(e)[t]=n}function o(e){const t=i(e);return t.attrs||(t.attrs={}),t.attrs}function i(e){return e.data||(e.data={}),e.data}function r(e){const t=i(e);return t.class||(t.class={}),t.class}Object.defineProperty(t,"__esModule",{value:!0}),t.getAttrs=t.on=t.mergeStyle=t.copyClassesFromElement=t.copyClassesFromVNode=t.setNamespace=t.setClass=t.setAttr=void 0,t.setAttr=function(e,t,n){o(e)[t]=n},t.setClass=n,t.setNamespace=function e(t,n){void 0===t.data&&(t.data={}),t.data.ns=n;const o=t.children;if(void 0!==o)for(let t=0;t<o.length;t++){const i=o[t];"string"!=typeof i&&e(i,n)}},t.copyClassesFromVNode=function(e,t){const o=r(e);Object.keys(o).forEach((e=>n(t,e,!0)))},t.copyClassesFromElement=function(e,t){const o=e.classList;for(let e=0;e<o.length;e++){const i=o.item(e);i&&n(t,i,!0)}},t.mergeStyle=function(e,t){i(e).style=Object.assign(Object.assign({},i(e).style||{}),t)},t.on=function(e,t,n){const o=function(e){const t=i(e);return t.on||(t.on={}),t.on}(e);if(o[t])throw new Error("EventListener for "+t+" already registered on VNode");o[t]=n},t.getAttrs=o},508:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DiamondAnchor=t.RectangleAnchor=t.EllipseAnchor=void 0;const i=n(2638),r=n(7196),s=n(2650),a=n(8675),c=n(5017);let d=class{get kind(){return a.PolylineEdgeRouter.KIND+":"+i.ELLIPTIC_ANCHOR_KIND}getAnchor(e,t,n=0){const o=e.bounds,i=c.Bounds.center(o),r=i.x-t.x,s=i.y-t.y,a=Math.sqrt(r*r+s*s),d=r/a||0,l=s/a||0;return{x:i.x-d*(.5*o.width+n),y:i.y-l*(.5*o.height+n)}}};t.EllipseAnchor=d,t.EllipseAnchor=d=o([(0,s.injectable)()],d);let l=class{get kind(){return a.PolylineEdgeRouter.KIND+":"+i.RECTANGULAR_ANCHOR_KIND}getAnchor(e,t,n=0){const o=e.bounds,i=c.Bounds.center(o),r=new u(i,t);if(!(0,c.almostEquals)(i.y,t.y)){const e=this.getXIntersection(o.y,i,t);e>=o.x&&e<=o.x+o.width&&r.addCandidate(e,o.y-n);const s=this.getXIntersection(o.y+o.height,i,t);s>=o.x&&s<=o.x+o.width&&r.addCandidate(s,o.y+o.height+n)}if(!(0,c.almostEquals)(i.x,t.x)){const e=this.getYIntersection(o.x,i,t);e>=o.y&&e<=o.y+o.height&&r.addCandidate(o.x-n,e);const s=this.getYIntersection(o.x+o.width,i,t);s>=o.y&&s<=o.y+o.height&&r.addCandidate(o.x+o.width+n,s)}return r.best}getXIntersection(e,t,n){const o=(e-t.y)/(n.y-t.y);return(n.x-t.x)*o+t.x}getYIntersection(e,t,n){const o=(e-t.x)/(n.x-t.x);return(n.y-t.y)*o+t.y}};t.RectangleAnchor=l,t.RectangleAnchor=l=o([(0,s.injectable)()],l);class u{constructor(e,t){this.centerPoint=e,this.refPoint=t,this.currentDist=-1}addCandidate(e,t){const n=this.refPoint.x-e,o=this.refPoint.y-t,i=n*n+o*o;(this.currentDist<0||i<this.currentDist)&&(this.currentBest={x:e,y:t},this.currentDist=i)}get best(){return void 0===this.currentBest?this.centerPoint:this.currentBest}}let h=class{get kind(){return a.PolylineEdgeRouter.KIND+":"+i.DIAMOND_ANCHOR_KIND}getAnchor(e,t,n){const o=e.bounds,i=new r.PointToPointLine(c.Bounds.center(o),t),s=new r.Diamond(o).closestSideLine(t),a=(0,r.intersection)(s,i);return c.Point.shiftTowards(a,t,n)}};t.DiamondAnchor=h,t.DiamondAnchor=h=o([(0,s.injectable)()],h)},548:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;const o=n(7763);t.ContainerModule=class{id;registry;constructor(e){this.id=(0,o.id)(),this.registry=e}},t.AsyncContainerModule=class{id;registry;constructor(e){this.id=(0,o.id)(),this.registry=e}}},723:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.IssueMarkerView=void 0;const i=n(417),r=n(491),s=n(2650);let a=class{render(e,t){const n=16/1792,o=`scale(${n}, ${n})`,s=this.getMaxSeverity(e),a=(0,i.svg)("g",{"class-sprotty-issue":!0},(0,i.svg)("g",{transform:o},(0,i.svg)("path",{d:this.getPath(s)})));return(0,r.setClass)(a,"sprotty-"+s,!0),a}getMaxSeverity(e){let t="info";for(const n of e.issues.map((e=>e.severity)))("error"===n||"warning"===n&&"info"===t)&&(t=n);return t}getPath(e){switch(e){case"error":case"warning":return"M768 128q209 0 385.5 103t279.5 279.5 103 385.5-103 385.5-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103zm128 1247v-190q0-14-9-23.5t-22-9.5h-192q-13 0-23 10t-10 23v190q0 13 10 23t23 10h192q13 0 22-9.5t9-23.5zm-2-344l18-621q0-12-10-18-10-8-24-8h-220q-14 0-24 8-10 6-10 18l17 621q0 10 10 17.5t24 7.5h185q14 0 23.5-7.5t10.5-17.5z";case"info":return"M1024 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"}}};t.IssueMarkerView=a,t.IssueMarkerView=a=o([(0,s.injectable)()],a)},732:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;const o=n(7059),i=n(6727);t.BindingWhenSyntax=class{_binding;constructor(e){this._binding=e}when(e){return this._binding.constraint=e,new o.BindingOnSyntax(this._binding)}whenTargetNamed(e){return this._binding.constraint=(0,i.namedConstraint)(e),new o.BindingOnSyntax(this._binding)}whenTargetIsDefault(){return this._binding.constraint=e=>null!==e&&(null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()),new o.BindingOnSyntax(this._binding)}whenTargetTagged(e,t){return this._binding.constraint=(0,i.taggedConstraint)(e)(t),new o.BindingOnSyntax(this._binding)}whenInjectedInto(e){return this._binding.constraint=t=>null!==t&&(0,i.typeConstraint)(e)(t.parentRequest),new o.BindingOnSyntax(this._binding)}whenParentNamed(e){return this._binding.constraint=t=>null!==t&&(0,i.namedConstraint)(e)(t.parentRequest),new o.BindingOnSyntax(this._binding)}whenParentTagged(e,t){return this._binding.constraint=n=>null!==n&&(0,i.taggedConstraint)(e)(t)(n.parentRequest),new o.BindingOnSyntax(this._binding)}whenAnyAncestorIs(e){return this._binding.constraint=t=>null!==t&&(0,i.traverseAncerstors)(t,(0,i.typeConstraint)(e)),new o.BindingOnSyntax(this._binding)}whenNoAncestorIs(e){return this._binding.constraint=t=>null!==t&&!(0,i.traverseAncerstors)(t,(0,i.typeConstraint)(e)),new o.BindingOnSyntax(this._binding)}whenAnyAncestorNamed(e){return this._binding.constraint=t=>null!==t&&(0,i.traverseAncerstors)(t,(0,i.namedConstraint)(e)),new o.BindingOnSyntax(this._binding)}whenNoAncestorNamed(e){return this._binding.constraint=t=>null!==t&&!(0,i.traverseAncerstors)(t,(0,i.namedConstraint)(e)),new o.BindingOnSyntax(this._binding)}whenAnyAncestorTagged(e,t){return this._binding.constraint=n=>null!==n&&(0,i.traverseAncerstors)(n,(0,i.taggedConstraint)(e)(t)),new o.BindingOnSyntax(this._binding)}whenNoAncestorTagged(e,t){return this._binding.constraint=n=>null!==n&&!(0,i.traverseAncerstors)(n,(0,i.taggedConstraint)(e)(t)),new o.BindingOnSyntax(this._binding)}whenAnyAncestorMatches(e){return this._binding.constraint=t=>null!==t&&(0,i.traverseAncerstors)(t,e),new o.BindingOnSyntax(this._binding)}whenNoAncestorMatches(e){return this._binding.constraint=t=>null!==t&&!(0,i.traverseAncerstors)(t,e),new o.BindingOnSyntax(this._binding)}}},740:function(e,t,n){"use strict";var o,i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MissingView=t.EmptyView=t.configureView=t.overrideModelElement=t.configureModelElement=t.ViewRegistry=t.findArgValue=void 0;const a=n(417),c=n(2650),d=n(2041),l=n(5559),u=n(4615),h=n(5857),p=n(54),f=n(3807);t.findArgValue=function(e,t){for(;void 0!==e&&!(t in e)&&e.parentArgs;)e=e.parentArgs;return e?e[t]:void 0};let g=class extends l.InstanceRegistry{constructor(e){super(),this.registerDefaults(),e.forEach((e=>{e.isOverride?this.override(e.type,e.factory()):this.register(e.type,e.factory())}))}registerDefaults(){this.register(h.EMPTY_ROOT.type,new y)}missing(e){return this.logger.warn(this,`no registered view for type '${e}', please configure a view in the ContainerModule`),new v}};function m(e,t,n,o){if("function"==typeof n){if(!(0,u.isInjectable)(n))throw new Error(`Views should be @injectable: ${n.name}`);e.isBound(n)||e.bind(n).toSelf()}e.bind(d.TYPES.ViewRegistration).toDynamicValue((e=>({type:t,factory:()=>e.container.get(n),isOverride:o})))}t.ViewRegistry=g,i([(0,c.inject)(d.TYPES.ILogger),r("design:type",Object)],g.prototype,"logger",void 0),t.ViewRegistry=g=i([(0,c.injectable)(),s(0,(0,c.multiInject)(d.TYPES.ViewRegistration)),s(0,(0,c.optional)()),r("design:paramtypes",[Array])],g),t.configureModelElement=function(e,t,n,o,i){(0,p.registerModelElement)(e,t,n,i),m(e,t,o)},t.overrideModelElement=function(e,t,n,o,i){(0,p.registerModelElement)(e,t,n,i,!0),m(e,t,o,!0)},t.configureView=m;let y=class{render(e,t){return(0,a.svg)("svg",{"class-sprotty-empty":!0})}};t.EmptyView=y,t.EmptyView=y=i([(0,c.injectable)()],y);let v=o=class{render(e,t){const n=e.position||this.getPostion(e.type);return(0,a.svg)("text",{"class-sprotty-missing":!0,x:n.x,y:n.y},'missing "',e.type,'" view')}getPostion(e){let t=o.positionMap.get(e);return t||(t=f.Point.ORIGIN,o.positionMap.forEach((e=>t=e.y>=t.y?{x:0,y:e.y+20}:t)),o.positionMap.set(e,t)),t}};t.MissingView=v,v.positionMap=new Map,t.MissingView=v=o=i([(0,c.injectable)()],v)},877:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyTargetImpl=void 0;const o=n(5265),i=n(7426),r=n(6277),s=n(3313),a=n(6338),c=n(1129),d=n(6757);t.LegacyTargetImpl=class{#e;#t;#n;#o;#i;#r;constructor(e,t,n){this.#t=(0,d.getTargetId)(),this.#n=e,this.#o=void 0,this.#e=t,this.#i=new a.LegacyQueryableStringImpl("string"==typeof e?e:(0,c.getDescription)(e)),this.#r=n}get id(){return this.#t}get identifier(){return this.#n}get metadata(){return void 0===this.#o&&(this.#o=(0,i.getLegacyMetadata)(this.#e)),this.#o}get name(){return this.#i}get type(){return this.#r}get serviceIdentifier(){return o.LazyServiceIdentifier.is(this.#e.value)?this.#e.value.unwrap():this.#e.value}getCustomTags(){return[...this.#e.tags.entries()].map((([e,t])=>({key:e,value:t})))}getNamedTag(){return void 0===this.#e.name?null:{key:s.NAMED_TAG,value:this.#e.name}}hasTag(e){return this.metadata.some((t=>t.key===e))}isArray(){return this.#e.kind===r.ClassElementMetadataKind.multipleInjection}isNamed(){return void 0!==this.#e.name}isOptional(){return this.#e.optional}isTagged(){return this.#e.tags.size>0}matchesArray(e){return this.isArray()&&this.#e.value===e}matchesNamedTag(e){return this.#e.name===e}matchesTag(e){return t=>this.metadata.some((n=>n.key===e&&n.value===t))}}},1011:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractEdgeRouter=t.DefaultAnchors=t.Side=void 0;const r=n(2650),s=n(5017),a=n(54),c=n(5778),d=n(2638),l=n(5778);var u;!function(e){e[e.RIGHT=0]="RIGHT",e[e.LEFT=1]="LEFT",e[e.TOP=2]="TOP",e[e.BOTTOM=3]="BOTTOM"}(u||(t.Side=u={}));class h{constructor(e,t,n){this.element=e,this.kind=n;const o=e.bounds;this.bounds=(0,a.translateBounds)(o,e.parent,t),this.left={x:this.bounds.x,y:this.bounds.y+.5*this.bounds.height,kind:n},this.right={x:this.bounds.x+this.bounds.width,y:this.bounds.y+.5*this.bounds.height,kind:n},this.top={x:this.bounds.x+.5*this.bounds.width,y:this.bounds.y,kind:n},this.bottom={x:this.bounds.x+.5*this.bounds.width,y:this.bounds.y+this.bounds.height,kind:n}}get(e){return this[u[e].toLowerCase()]}getNearestSide(e){const t=s.Point.euclideanDistance(e,this.left),n=s.Point.euclideanDistance(e,this.right),o=s.Point.euclideanDistance(e,this.top),i=s.Point.euclideanDistance(e,this.bottom);let r=u.LEFT,a=t;return n<a&&(a=n,r=u.RIGHT),o<a&&(a=o,r=u.TOP),i<a&&(a=i,r=u.BOTTOM),r}}t.DefaultAnchors=h;let p=class{findOrthogonalIntersection(e,t){const n=(e,n)=>{const o=s.Point.subtract(n,e),i=s.Point.subtract(t,e),r=s.Point.dotProduct(i,o)/s.Point.dotProduct(o,o);return r>=0&&r<=1?s.Point.linear(e,n,r):r<0?e:n},o=this.route(e);let i=o[0],r=0;for(let e=0;e<o.length-1;++e){const a=n(o[e],o[e+1]);s.Point.euclideanDistance(t,a)<s.Point.euclideanDistance(t,i)&&(i=a,r=e)}return{point:i,derivative:s.Point.subtract(o[r+1],o[r])}}pointAt(e,t){const n=this.calculateSegment(e,t);if(!n)return;const{segmentStart:o,segmentEnd:i,lambda:r}=n;return s.Point.linear(o,i,r)}derivativeAt(e,t){const n=this.calculateSegment(e,t);if(!n)return;const{segmentStart:o,segmentEnd:i}=n;return{x:i.x-o.x,y:i.y-o.y}}calculateSegment(e,t){if(t<0||t>1)return;const n=this.route(e);if(n.length<2)return;const o=[];let i=0;for(let e=0;e<n.length-1;++e)o[e]=s.Point.euclideanDistance(n[e],n[e+1]),i+=o[e];let r=0;const a=t*i;for(let e=0;e<n.length-1;++e){const t=r+o[e];if(o[e]>1e-8&&t>=a){const t=Math.max(0,a-r)/o[e];return{segmentStart:n[e],segmentEnd:n[e+1],lambda:t}}r=t}return{segmentEnd:n.pop(),segmentStart:n.pop(),lambda:1}}addHandle(e,t,n,o){const i=new c.SRoutingHandleImpl;return i.kind=t,i.pointIndex=o,i.type=n,"target"===t&&e.id===c.edgeInProgressID&&(i.id=c.edgeInProgressTargetHandleID),e.add(i),i}getHandlePosition(e,t,n){switch(n.kind){case"source":return e.source instanceof c.SDanglingAnchorImpl?e.source.position:t[0];case"target":return e.target instanceof c.SDanglingAnchorImpl?e.target.position:t[t.length-1];default:const o=this.getInnerHandlePosition(e,t,n);if(void 0!==o)return o;if(n.pointIndex>=0&&n.pointIndex<e.routingPoints.length)return e.routingPoints[n.pointIndex]}}findRouteSegment(e,t,n){const o=t=>void 0!==t.pointIndex?t.pointIndex:"target"===t.kind?e.routingPoints.length:-2;let i,r;for(const e of t){const t=o(e);t<=n&&(void 0===i||t>o(i))&&(i=e),t>n&&(void 0===r||t<o(r))&&(r=e)}return{start:i,end:r}}getTranslatedAnchor(e,t,n,o,i=0){const r=(0,a.translatePoint)(t,n,e.parent),s=this.getAnchorComputer(e),c=.5*e.strokeWidth,d=s.getAnchor(e,r,i+c);return(0,a.translatePoint)(d,e.parent,o.parent)}getAnchorComputer(e){return this.anchorRegistry.get(this.kind,e.anchorKind)}applyHandleMoves(e,t){const n=t.slice();t.forEach((t=>{const o=t.handle;if("source"!==o.kind||e.source instanceof c.SDanglingAnchorImpl){if("target"===o.kind&&!(e.target instanceof c.SDanglingAnchorImpl)){const n=new c.SDanglingAnchorImpl;n.id=e.id+"_dangling-target",n.original=e.target,n.position=t.toPosition,o.root.add(n),o.danglingAnchor=n,e.targetId=n.id}}else{const n=new c.SDanglingAnchorImpl;n.id=e.id+"_dangling-source",n.original=e.source,n.position=t.toPosition,o.root.add(n),o.danglingAnchor=n,e.sourceId=n.id}o.danglingAnchor&&(o.danglingAnchor.position=t.toPosition,n.splice(n.indexOf(t),1))})),n.length>0&&this.applyInnerHandleMoves(e,n),this.cleanupRoutingPoints(e,e.routingPoints,!0,!0)}cleanupRoutingPoints(e,t,n,o){const i=new h(e.source,e.parent,"source"),r=new h(e.target,e.parent,"target");this.resetRoutingPointsOnReconnect(e,t,n,i,r)}resetRoutingPointsOnReconnect(e,t,n,o,i){if(0===t.length||e.source instanceof c.SDanglingAnchorImpl||e.target instanceof c.SDanglingAnchorImpl){const r=this.getOptions(e),s=this.calculateDefaultCorners(e,o,i,r);if(t.splice(0,t.length,...s),n){let n=-2;e.children.forEach((o=>{o instanceof c.SRoutingHandleImpl&&("target"===o.kind?o.pointIndex=t.length:"line"===o.kind&&o.pointIndex>=t.length?e.remove(o):n=Math.max(o.pointIndex,n))}));for(let o=n;o<t.length-1;++o)this.addHandle(e,"manhattan-50%","volatile-routing-point",o)}return!0}return!1}applyReconnect(e,t,n){let o=!1;if(t){const n=e.root.index.getById(t);n instanceof l.SConnectableElementImpl&&(e.sourceId=n.id,o=!0)}if(n){const t=e.root.index.getById(n);t instanceof l.SConnectableElementImpl&&(e.targetId=t.id,o=!0)}if(o){if(e.index.remove(e),e.id===c.edgeInProgressID){const t=t=>`${e.sourceId}_to_${e.targetId}_${t}`;let n=0,o=t(n);for(;void 0!==e.index.getById(o);)o=t(++n);e.id=o;const i=e.children.find((e=>e.id===c.edgeInProgressTargetHandleID));i instanceof c.SRoutingHandleImpl&&(e.remove(i),i.danglingAnchor&&i.danglingAnchor.parent.remove(i.danglingAnchor))}e.index.add(e),this.getSelfEdgeIndex(e)>-1&&(e.routingPoints=[],this.cleanupRoutingPoints(e,e.routingPoints,!0,!0))}}takeSnapshot(e){return{routingPoints:e.routingPoints.slice(),routingHandles:e.children.filter((e=>e instanceof c.SRoutingHandleImpl)).map((e=>e)),routedPoints:this.route(e),router:this,source:e.source,target:e.target}}applySnapshot(e,t){e.routingPoints=t.routingPoints,e.removeAll((e=>e instanceof c.SRoutingHandleImpl)),e.routerKind=t.router.kind,t.routingHandles.forEach((t=>e.add(t))),t.source&&(e.sourceId=t.source.id),t.target&&(e.targetId=t.target.id),e.root.index.remove(e),e.root.index.add(e)}calculateDefaultCorners(e,t,n,o){const i=this.getSelfEdgeIndex(e);if(i>=0){const e=o.standardDistance,n=o.selfEdgeOffset*Math.min(t.bounds.width,t.bounds.height);switch(i%4){case 0:return[{x:t.get(u.RIGHT).x+e,y:t.get(u.RIGHT).y+n},{x:t.get(u.RIGHT).x+e,y:t.get(u.BOTTOM).y+e},{x:t.get(u.BOTTOM).x+n,y:t.get(u.BOTTOM).y+e}];case 1:return[{x:t.get(u.BOTTOM).x-n,y:t.get(u.BOTTOM).y+e},{x:t.get(u.LEFT).x-e,y:t.get(u.BOTTOM).y+e},{x:t.get(u.LEFT).x-e,y:t.get(u.LEFT).y+n}];case 2:return[{x:t.get(u.LEFT).x-e,y:t.get(u.LEFT).y-n},{x:t.get(u.LEFT).x-e,y:t.get(u.TOP).y-e},{x:t.get(u.TOP).x-n,y:t.get(u.TOP).y-e}];case 3:return[{x:t.get(u.TOP).x+n,y:t.get(u.TOP).y-e},{x:t.get(u.RIGHT).x+e,y:t.get(u.TOP).y-e},{x:t.get(u.RIGHT).x+e,y:t.get(u.RIGHT).y-n}]}}return[]}getSelfEdgeIndex(e){return e.source&&e.source===e.target?e.source.outgoingEdges.filter((t=>t.target===e.source)).indexOf(e):-1}commitRoute(e,t){const n=[];for(let e=1;e<t.length-1;++e)n.push({x:t[e].x,y:t[e].y});e.routingPoints=n}};t.AbstractEdgeRouter=p,o([(0,r.inject)(d.AnchorComputerRegistry),i("design:type",d.AnchorComputerRegistry)],p.prototype,"anchorRegistry",void 0),t.AbstractEdgeRouter=p=o([(0,r.injectable)()],p)},1094:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.configureCommand=t.CommandActionHandlerInitializer=t.CommandActionHandler=void 0;const s=n(2650),a=n(4615),c=n(2041);class d{constructor(e){this.commandRegistration=e}handle(e){return this.commandRegistration.factory(e)}}t.CommandActionHandler=d;let l=class{constructor(e){this.registrations=e}initialize(e){this.registrations.forEach((t=>e.register(t.kind,new d(t))))}};t.CommandActionHandlerInitializer=l,t.CommandActionHandlerInitializer=l=o([(0,s.injectable)(),r(0,(0,s.multiInject)(c.TYPES.CommandRegistration)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],l),t.configureCommand=function(e,t){if(!(0,a.isInjectable)(t))throw new Error(`Commands should be @injectable: ${t.name}`);e.isBound(t)||e.bind(t).toSelf(),e.bind(c.TYPES.CommandRegistration).toDynamicValue((e=>({kind:t.KIND,factory:n=>{const o=new s.Container;return o.parent=e.container,o.bind(c.TYPES.Action).toConstantValue(n),o.get(t)}})))}},1129:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDescription=function(e){return e.toString().slice(n,o)};const n=7,o=-1},1212:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.FocusFixPostprocessor=void 0;const i=n(2650),r=n(491);let s=class{decorate(e,t){return e.sel&&e.sel.startsWith("svg")&&(0,r.setAttr)(e,"tabindex",0),e}postUpdate(){}};t.FocusFixPostprocessor=s,t.FocusFixPostprocessor=s=o([(0,i.injectable)()],s)},1213:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyGroupView=t.DiamondNodeView=t.RectangularNodeView=t.CircularNodeView=t.SvgViewportView=void 0;const i=n(417),r=n(356),s=n(4348),a=n(7196),c=n(2650);let d=class{render(e,t,n){const o=`scale(${e.zoom}) translate(${-e.scroll.x},${-e.scroll.y})`;return(0,i.svg)("svg",null,(0,i.svg)("g",{transform:o},t.renderChildren(e)))}};t.SvgViewportView=d,t.SvgViewportView=d=o([(0,c.injectable)()],d);let l=class extends s.ShapeView{render(e,t,n){if(!this.isVisible(e,t))return;const o=this.getRadius(e);return(0,i.svg)("g",null,(0,i.svg)("circle",{"class-sprotty-node":e instanceof r.SNodeImpl,"class-sprotty-port":e instanceof r.SPortImpl,"class-mouseover":e.hoverFeedback,"class-selected":e.selected,r:o,cx:o,cy:o}),t.renderChildren(e))}getRadius(e){const t=Math.min(e.size.width,e.size.height);return t>0?t/2:0}};t.CircularNodeView=l,t.CircularNodeView=l=o([(0,c.injectable)()],l);let u=class extends s.ShapeView{render(e,t,n){if(this.isVisible(e,t))return(0,i.svg)("g",null,(0,i.svg)("rect",{"class-sprotty-node":e instanceof r.SNodeImpl,"class-sprotty-port":e instanceof r.SPortImpl,"class-mouseover":e.hoverFeedback,"class-selected":e.selected,x:"0",y:"0",width:Math.max(e.size.width,0),height:Math.max(e.size.height,0)}),t.renderChildren(e))}};t.RectangularNodeView=u,t.RectangularNodeView=u=o([(0,c.injectable)()],u);let h=class extends s.ShapeView{render(e,t,n){if(!this.isVisible(e,t))return;const o=new a.Diamond({height:Math.max(e.size.height,0),width:Math.max(e.size.width,0),x:0,y:0}),s=`${p(o.topPoint)} ${p(o.rightPoint)} ${p(o.bottomPoint)} ${p(o.leftPoint)}`;return(0,i.svg)("g",null,(0,i.svg)("polygon",{"class-sprotty-node":e instanceof r.SNodeImpl,"class-sprotty-port":e instanceof r.SPortImpl,"class-mouseover":e.hoverFeedback,"class-selected":e.selected,points:s}),t.renderChildren(e))}};function p(e){return`${e.x},${e.y}`}t.DiamondNodeView=h,t.DiamondNodeView=h=o([(0,c.injectable)()],h);let f=class{render(e,t){return(0,i.svg)("g",null)}};t.EmptyGroupView=f,t.EmptyGroupView=f=o([(0,c.injectable)()],f)},1229:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(8630);const i=n(4076),r=o(n(4744)),s=n(6268);document.addEventListener("DOMContentLoaded",(()=>{(0,r.default)("oml-diagram").get(i.TYPES.ModelSource).setModel(s.graph)}))},1391:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ElementFader=t.FadeAnimation=void 0;const i=n(2650),r=n(6320),s=n(166),a=n(491),c=n(8416);class d extends r.Animation{constructor(e,t,n,o=!1){super(n),this.model=e,this.elementFades=t,this.removeAfterFadeOut=o}tween(e,t){for(const t of this.elementFades){const n=t.element;"in"===t.type?n.opacity=e:"out"===t.type&&(n.opacity=1-e,1===e&&this.removeAfterFadeOut&&n instanceof s.SChildElementImpl&&n.parent.remove(n))}return this.model}}t.FadeAnimation=d;let l=class{decorate(e,t){return(0,c.isFadeable)(t)&&1!==t.opacity&&(0,a.setAttr)(e,"opacity",t.opacity),e}postUpdate(){}};t.ElementFader=l,t.ElementFader=l=o([(0,i.injectable)()],l)},1402:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;const o=n(7059),i=n(732);t.BindingWhenOnSyntax=class{_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding)}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}},1446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyServiceIdentifier=function(e){switch(typeof e){case"string":case"symbol":return e.toString();case"function":return e.name;default:throw new Error(`Unexpected ${typeof e} service id type`)}}},1479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;const o=n(7763);class i{id;serviceIdentifier;parentContext;parentRequest;bindings;childRequests;target;requestScope;constructor(e,t,n,i,r){this.id=(0,o.id)(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=r,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}addChildRequest(e,t,n){const o=new i(e,this.parentContext,this,t,n);return this.childRequests.push(o),o}}t.Request=i},1492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLabeledAction=t.LabeledAction=void 0,t.LabeledAction=class{constructor(e,t,n){this.label=e,this.actions=t,this.icon=n}},t.isLabeledAction=function(e){return void 0!==e&&void 0!==e.label&&void 0!==e.actions}},1593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1638);const i=new RegExp("&[a-z0-9#]+;","gi");let r=null,s=null;const a=new Map;let c=!1;function d(e,t){let n;switch(null!==t&&(n=a.get(t)),null==e?void 0:e.nodeType){case 1:{if(void 0===n)return;n.children=n.children?n.children:[];const t=n.children,s=e.attributes,c={};for(let e=0;e<s.length;e++){const t=s.item(e);t&&(c[t.name]=t.value)}const d=(0,o.h)(e.nodeName,function(e){const t={},n=Object.keys(e).reduce(((t,n)=>{if("style"!==n&&"class"!==n){const s=(o=e[n],r||(r=document.createElement("div")),o.replace(i,(e=>null===r?"":(r.innerHTML=e,null===r.textContent?"":r.textContent))));t?t[n]=s:t={[n]:s}}var o;return t}),null);n&&(t.attrs=n);const o=function(e){const t=(e,t)=>{const n=t.split(":"),o=function(e){return`${(e=e.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}))).charAt(0).toLowerCase()}${e.substring(1)}`}(n[0].trim());if(o){const t=n[1].replace("!important","").trim();e?e[o]=t:e={[o]:t}}return e};try{return e.style.split(";").reduce(t,null)}catch(e){return null}}(e);o&&(t.style=o);const s=function(e){const t=(e,t)=>((t=t.trim())&&(e?e[t]=!0:e={[t]:!0}),e);try{return e.class.split(" ").reduce(t,null)}catch(e){return null}}(e);return s&&(t.class=s),t}(c));t.push(d),a.set(e,d);break}case 3:{const t=e.textContent;if(null!==t&&void 0!==n){n.children=n.children?n.children:[];const e=n.children,i=e.length>0?e[e.length-1]:null;c||"string"==typeof i||null===i||void 0!==i.sel?e.push((0,o.vnode)(void 0,void 0,void 0,t,void 0)):i.text=i.text+t,c=!1}break}case 8:c=!0;break;case 9:s=(0,o.vnode)(void 0,void 0,[],void 0,void 0),a.set(e,s)}}t.default=function(e){var t,n;const i=new window.DOMParser;if(void 0===i||void 0===e||""===e)return null;const r=i.parseFromString(e,"application/xml");if("parsererror"===(null===(t=null==r?void 0:r.firstChild)||void 0===t?void 0:t.nodeName)){const e=`${null===(n=null==r?void 0:r.firstChild)||void 0===n?void 0:n.textContent}`;return(0,o.h)("parsererror",[e])}return c=!1,s=null,function(e,t){let n=e,o=null;const i=[],r=e=>{const t=e.firstChild;null!==t&&(o=e),n=t};for(t(n,o),r(n);;){for(;n;)i.push(n),t(n,o),r(n);const e=i.pop();if(n=e||null,!i.length)break;if(o=i[i.length-1],n){const e=n.nextSibling;null==e&&(o=i[i.length-1]),n=e}}}(r,d),null===s?null:function(e){const t=null==e?void 0:e.children;return void 0===t?null:1===t.length&&"string"!=typeof t[0]?t[0]:null}(s)}},1627:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommitModelCommand=t.CommitModelAction=void 0;const s=n(2650),a=n(3194),c=n(2041),d=n(7747);var l;!function(e){e.KIND="commitModel",e.create=function(){return{kind:e.KIND}}}(l||(t.CommitModelAction=l={}));let u=class extends a.SystemCommand{constructor(e){super(),this.action=e}execute(e){return this.newModel=e.modelFactory.createSchema(e.root),this.doCommit(this.newModel,e.root,!0)}doCommit(e,t,n){const o=this.modelSource.commitModel(e);return o instanceof Promise?o.then((e=>(n&&(this.originalModel=e),t))):(n&&(this.originalModel=o),t)}undo(e){return this.doCommit(this.originalModel,e.root,!1)}redo(e){return this.doCommit(this.newModel,e.root,!1)}};t.CommitModelCommand=u,u.KIND=l.KIND,o([(0,s.inject)(c.TYPES.ModelSource),i("design:type",d.ModelSource)],u.prototype,"modelSource",void 0),t.CommitModelCommand=u=o([(0,s.injectable)(),r(0,(0,s.inject)(c.TYPES.Action)),i("design:paramtypes",[Object])],u)},1631:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(5777),s=n(7337),a=new o.ContainerModule((e=>{e(s.CommandPalette).toSelf().inSingletonScope(),e(i.TYPES.IUIExtension).toService(s.CommandPalette),e(s.CommandPaletteKeyListener).toSelf().inSingletonScope(),e(i.TYPES.KeyListener).toService(s.CommandPaletteKeyListener),e(r.CommandPaletteActionProviderRegistry).toSelf().inSingletonScope(),e(i.TYPES.ICommandPaletteActionProviderRegistry).toService(r.CommandPaletteActionProviderRegistry)}));t.default=a},1637:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TaskNodeView=void 0;const i=n(417),r=n(2650);let s=class{render(e,t){return(0,i.svg)("g",null,(0,i.svg)("rect",{"class-sprotty-node":!0,"class-task":!0,"class-running":e.isRunning,"class-finished":e.isFinished,"class-selected":e.selected,"class-mouseover":e.hoverFeedback,width:e.size.width,height:e.size.height}),(0,i.svg)("text",{x:e.size.width/2,y:e.size.height/2+5},e.name),t.renderChildren(e))}};t.TaskNodeView=s,t.TaskNodeView=s=o([(0,r.injectable)()],s)},1638:(e,t,n)=>{"use strict";function o(e){if(i(e)){for(;e&&i(e);)e=r(e).parent;return null!=e?e:null}return e.parentNode}function i(e){return 11===e.nodeType}function r(e,t){var n,o,i;const r=e;return null!==(n=r.parent)&&void 0!==n||(r.parent=null!=t?t:null),null!==(o=r.firstChildNode)&&void 0!==o||(r.firstChildNode=e.firstChild),null!==(i=r.lastChildNode)&&void 0!==i||(r.lastChildNode=e.lastChild),r}n.r(t),n.d(t,{Fragment:()=>W,array:()=>c,attachTo:()=>R,attributesModule:()=>j,classModule:()=>D,datasetModule:()=>B,eventListenersModule:()=>K,fragment:()=>S,h:()=>b,htmlDomApi:()=>s,init:()=>y,jsx:()=>X,primitive:()=>d,propsModule:()=>Y,styleModule:()=>$,thunk:()=>w,toVNode:()=>x,vnode:()=>a});const s={createElement:function(e,t){return document.createElement(e,t)},createElementNS:function(e,t,n){return document.createElementNS(e,t,n)},createTextNode:function(e){return document.createTextNode(e)},createDocumentFragment:function(){return r(document.createDocumentFragment())},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){if(i(e)){let t=e;for(;t&&i(t);)t=r(t).parent;e=null!=t?t:e}i(t)&&(t=r(t,e)),n&&i(n)&&(n=r(n).firstChildNode),e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){i(t)&&(t=r(t,e)),e.appendChild(t)},parentNode:o,nextSibling:function(e){var t;if(i(e)){const n=r(e),i=o(n);if(i&&n.lastChildNode){const e=Array.from(i.childNodes),o=e.indexOf(n.lastChildNode);return null!==(t=e[o+1])&&void 0!==t?t:null}return null}return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType},isDocumentFragment:i};function a(e,t,n,o,i){return{sel:e,data:t,children:n,text:o,elm:i,key:void 0===t?void 0:t.key}}const c=Array.isArray;function d(e){return"string"==typeof e||"number"==typeof e||e instanceof String||e instanceof Number}function l(e){return void 0===e}function u(e){return void 0!==e}const h=a("",{},[],void 0,void 0);function p(e,t){var n,o;const i=e.key===t.key,r=(null===(n=e.data)||void 0===n?void 0:n.is)===(null===(o=t.data)||void 0===o?void 0:o.is),s=e.sel===t.sel,a=!(!e.sel&&e.sel===t.sel)||typeof e.text==typeof t.text;return s&&i&&r&&a}function f(){throw new Error("The document fragment is not supported on this platform.")}function g(e,t,n){var o;const i={};for(let r=t;r<=n;++r){const t=null===(o=e[r])||void 0===o?void 0:o.key;void 0!==t&&(i[t]=r)}return i}const m=["create","update","remove","destroy","pre","post"];function y(e,t,n){const o={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},i=void 0!==t?t:s;for(const t of m)for(const n of e){const e=n[t];void 0!==e&&o[t].push(e)}function r(e){const t=e.id?"#"+e.id:"",n=e.getAttribute("class"),o=n?"."+n.split(" ").join("."):"";return a(i.tagName(e).toLowerCase()+t+o,{},[],void 0,e)}function y(e){return a(void 0,{},[],void 0,e)}function v(e,t){return function(){if(0==--t){const t=i.parentNode(e);i.removeChild(t,e)}}}function b(e,t){var r,s,a,p;let g,m=e.data;if(void 0!==m){const t=null===(r=m.hook)||void 0===r?void 0:r.init;u(t)&&(t(e),m=e.data)}const y=e.children,v=e.sel;if("!"===v)l(e.text)&&(e.text=""),e.elm=i.createComment(e.text);else if(void 0!==v){const n=v.indexOf("#"),r=v.indexOf(".",n),a=n>0?n:v.length,l=r>0?r:v.length,p=-1!==n||-1!==r?v.slice(0,Math.min(a,l)):v,f=e.elm=u(m)&&u(g=m.ns)?i.createElementNS(g,p,m):i.createElement(p,m);for(a<l&&f.setAttribute("id",v.slice(a+1,l)),r>0&&f.setAttribute("class",v.slice(l+1).replace(/\./g," ")),g=0;g<o.create.length;++g)o.create[g](h,e);if(c(y))for(g=0;g<y.length;++g){const e=y[g];null!=e&&i.appendChild(f,b(e,t))}else d(e.text)&&i.appendChild(f,i.createTextNode(e.text));const S=e.data.hook;u(S)&&(null===(s=S.create)||void 0===s||s.call(S,h,e),S.insert&&t.push(e))}else if((null===(a=null==n?void 0:n.experimental)||void 0===a?void 0:a.fragments)&&e.children){for(e.elm=(null!==(p=i.createDocumentFragment)&&void 0!==p?p:f)(),g=0;g<o.create.length;++g)o.create[g](h,e);for(g=0;g<e.children.length;++g){const n=e.children[g];null!=n&&i.appendChild(e.elm,b(n,t))}}else e.elm=i.createTextNode(e.text);return e.elm}function S(e,t,n,o,r,s){for(;o<=r;++o){const r=n[o];null!=r&&i.insertBefore(e,b(r,s),t)}}function P(e){var t,n;const i=e.data;if(void 0!==i){null===(n=null===(t=null==i?void 0:i.hook)||void 0===t?void 0:t.destroy)||void 0===n||n.call(t,e);for(let t=0;t<o.destroy.length;++t)o.destroy[t](e);if(void 0!==e.children)for(let t=0;t<e.children.length;++t){const n=e.children[t];null!=n&&"string"!=typeof n&&P(n)}}}function _(e,t,n,r){for(var s,a;n<=r;++n){let r,c;const d=t[n];if(null!=d)if(u(d.sel)){P(d),r=o.remove.length+1,c=v(d.elm,r);for(let e=0;e<o.remove.length;++e)o.remove[e](d,c);const e=null===(a=null===(s=null==d?void 0:d.data)||void 0===s?void 0:s.hook)||void 0===a?void 0:a.remove;u(e)?e(d,c):c()}else d.children?(P(d),_(e,d.children,0,d.children.length-1)):i.removeChild(e,d.elm)}}function E(e,t,n){var r,s,a,c,d,h,f,m;const y=null===(r=t.data)||void 0===r?void 0:r.hook;null===(s=null==y?void 0:y.prepatch)||void 0===s||s.call(y,e,t);const v=t.elm=e.elm;if(e===t)return;if(void 0!==t.data||u(t.text)&&t.text!==e.text){null!==(a=t.data)&&void 0!==a||(t.data={}),null!==(c=e.data)&&void 0!==c||(e.data={});for(let n=0;n<o.update.length;++n)o.update[n](e,t);null===(f=null===(h=null===(d=t.data)||void 0===d?void 0:d.hook)||void 0===h?void 0:h.update)||void 0===f||f.call(h,e,t)}const P=e.children,w=t.children;l(t.text)?u(P)&&u(w)?P!==w&&function(e,t,n,o){let r,s,a,c,d=0,u=0,h=t.length-1,f=t[0],m=t[h],y=n.length-1,v=n[0],P=n[y];for(;d<=h&&u<=y;)null==f?f=t[++d]:null==m?m=t[--h]:null==v?v=n[++u]:null==P?P=n[--y]:p(f,v)?(E(f,v,o),f=t[++d],v=n[++u]):p(m,P)?(E(m,P,o),m=t[--h],P=n[--y]):p(f,P)?(E(f,P,o),i.insertBefore(e,f.elm,i.nextSibling(m.elm)),f=t[++d],P=n[--y]):p(m,v)?(E(m,v,o),i.insertBefore(e,m.elm,f.elm),m=t[--h],v=n[++u]):(void 0===r&&(r=g(t,d,h)),s=r[v.key],l(s)?i.insertBefore(e,b(v,o),f.elm):(a=t[s],a.sel!==v.sel?i.insertBefore(e,b(v,o),f.elm):(E(a,v,o),t[s]=void 0,i.insertBefore(e,a.elm,f.elm))),v=n[++u]);u<=y&&(c=null==n[y+1]?null:n[y+1].elm,S(e,c,n,u,y,o)),d<=h&&_(e,t,d,h)}(v,P,w,n):u(w)?(u(e.text)&&i.setTextContent(v,""),S(v,null,w,0,w.length-1,n)):u(P)?_(v,P,0,P.length-1):u(e.text)&&i.setTextContent(v,""):e.text!==t.text&&(u(P)&&_(v,P,0,P.length-1),i.setTextContent(v,t.text)),null===(m=null==y?void 0:y.postpatch)||void 0===m||m.call(y,e,t)}return function(e,t){let n,s,a;const c=[];for(n=0;n<o.pre.length;++n)o.pre[n]();for(function(e,t){return e.isElement(t)}(i,e)?e=r(e):function(e,t){return e.isDocumentFragment(t)}(i,e)&&(e=y(e)),p(e,t)?E(e,t,c):(s=e.elm,a=i.parentNode(s),b(t,c),null!==a&&(i.insertBefore(a,t.elm,i.nextSibling(s)),_(a,[e],0,0))),n=0;n<c.length;++n)c[n].data.hook.insert(c[n]);for(n=0;n<o.post.length;++n)o.post[n]();return t}}function v(e,t,n){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==t)for(let e=0;e<t.length;++e){const n=t[e];if("string"==typeof n)continue;const o=n.data;void 0!==o&&v(o,n.children,n.sel)}}function b(e,t,n){let o,i,r,s={};if(void 0!==n?(null!==t&&(s=t),c(n)?o=n:d(n)?i=n.toString():n&&n.sel&&(o=[n])):null!=t&&(c(t)?o=t:d(t)?i=t.toString():t&&t.sel?o=[t]:s=t),void 0!==o)for(r=0;r<o.length;++r)d(o[r])&&(o[r]=a(void 0,void 0,void 0,o[r],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||v(s,o,e),a(e,s,o,i,void 0)}function S(e){let t,n;if(c(e)?t=e:d(t)?n=e:t&&t.sel&&(t=[e]),void 0!==t)for(let e=0;e<t.length;++e)d(t[e])&&(t[e]=a(void 0,void 0,void 0,t[e],void 0));return a(void 0,{},t,n,void 0)}function P(e,t){var n;const o=null===(n=t.data)||void 0===n?void 0:n.ns;e.data.fn=t.data.fn,e.data.args=t.data.args,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm,o&&v(t.data,t.children,t.sel)}function _(e){const t=e.data;P(t.fn(...t.args),e)}function E(e,t){let n;const o=e.data,i=t.data,r=o.args,s=i.args;if(o.fn===i.fn&&r.length===s.length){for(n=0;n<s.length;++n)if(r[n]!==s[n])return void P(i.fn(...s),t);P(e,t)}else P(i.fn(...s),t)}const w=function(e,t,n,o){return void 0===o&&(o=n,n=t,t=void 0),b(e,{key:t,hook:{init:_,prepatch:E},fn:n,args:o})};function O(e,t){const n=e.data.attachData;t.data.attachData.placeholder=n.placeholder,t.data.attachData.real=n.real,e.elm=e.data.attachData.real}function I(e,t){t.elm=t.data.attachData.placeholder}function M(e){void 0!==e.elm&&e.elm.parentNode.removeChild(e.elm),e.elm=e.data.attachData.real}function A(e,t){const n=t.elm,o=t.data.attachData,i=document.createElement("span");t.elm=i,o.target.appendChild(n),o.real=n,o.placeholder=i}function R(e,t){void 0===t.data&&(t.data={}),void 0===t.data.hook&&(t.data.hook={});const n=t.data,o=t.data.hook;return n.attachData={target:e,placeholder:void 0,real:void 0},o.create=A,o.prepatch=O,o.postpatch=I,o.destroy=M,t}function x(e,t){const n=void 0!==t?t:s;let o;if(n.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),r=i?"."+i.split(" ").join("."):"",s=n.tagName(e).toLowerCase()+o+r,c={},d={},l={},u=[];let h,p,f;const g=e.attributes,m=e.childNodes;for(p=0,f=g.length;p<f;p++)h=g[p].nodeName,"d"===h[0]&&"a"===h[1]&&"t"===h[2]&&"a"===h[3]&&"-"===h[4]?d[h.slice(5)]=g[p].nodeValue||"":"id"!==h&&"class"!==h&&(c[h]=g[p].nodeValue);for(p=0,f=m.length;p<f;p++)u.push(x(m[p],t));return Object.keys(c).length>0&&(l.attrs=c),Object.keys(d).length>0&&(l.dataset=d),"s"!==s[0]||"v"!==s[1]||"g"!==s[2]||3!==s.length&&"."!==s[3]&&"#"!==s[3]||v(l,u,s),a(s,l,u,void 0,e)}return n.isText(e)?(o=n.getTextContent(e),a(void 0,void 0,void 0,o,e)):n.isComment(e)?(o=n.getTextContent(e),a("!",{},[],o,e)):a("",{},[],void 0,e)}function T(e,t){let n;const o=t.elm;let i=e.data.attrs,r=t.data.attrs;if((i||r)&&i!==r){for(n in i=i||{},r=r||{},r){const e=r[n];i[n]!==e&&(!0===e?o.setAttribute(n,""):!1===e?o.removeAttribute(n):120!==n.charCodeAt(0)?o.setAttribute(n,e):58===n.charCodeAt(3)?o.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,e):58===n.charCodeAt(5)?o.setAttributeNS("http://www.w3.org/1999/xlink",n,e):o.setAttribute(n,e))}for(n in i)n in r||o.removeAttribute(n)}}const j={create:T,update:T};function C(e,t){let n,o;const i=t.elm;let r=e.data.class,s=t.data.class;if((r||s)&&r!==s){for(o in r=r||{},s=s||{},r)r[o]&&!Object.prototype.hasOwnProperty.call(s,o)&&i.classList.remove(o);for(o in s)n=s[o],n!==r[o]&&i.classList[n?"add":"remove"](o)}}const D={create:C,update:C},N=/[A-Z]/g;function L(e,t){const n=t.elm;let o,i=e.data.dataset,r=t.data.dataset;if(!i&&!r)return;if(i===r)return;i=i||{},r=r||{};const s=n.dataset;for(o in i)r[o]||(s?o in s&&delete s[o]:n.removeAttribute("data-"+o.replace(N,"-$&").toLowerCase()));for(o in r)i[o]!==r[o]&&(s?s[o]=r[o]:n.setAttribute("data-"+o.replace(N,"-$&").toLowerCase(),r[o]))}const B={create:L,update:L};function k(e,t,n){if("function"==typeof e)e.call(t,n,t);else if("object"==typeof e)for(let o=0;o<e.length;o++)k(e[o],t,n)}function F(e,t){const n=e.type,o=t.data.on;o&&o[n]&&k(o[n],t,e)}function V(e,t){const n=e.data.on,o=e.listener,i=e.elm,r=t&&t.data.on,s=t&&t.elm;let a;if(n!==r){if(n&&o)if(r)for(a in n)r[a]||i.removeEventListener(a,o,!1);else for(a in n)i.removeEventListener(a,o,!1);if(r){const o=t.listener=e.listener||function e(t){F(t,e.vnode)};if(o.vnode=t,n)for(a in r)n[a]||s.addEventListener(a,o,!1);else for(a in r)s.addEventListener(a,o,!1)}}}const K={create:V,update:V,destroy:V};function H(e,t){let n,o,i;const r=t.elm;let s=e.data.props,a=t.data.props;if((s||a)&&s!==a)for(n in s=s||{},a=a||{},a)o=a[n],i=s[n],i===o||"value"===n&&r[n]===o||(r[n]=o)}const Y={create:H,update:H},z="undefined"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout;let U=!1;function G(e,t,n){var o;o=function(){e[t]=n},z((function(){z(o)}))}function q(e,t){let n,o;const i=t.elm;let r=e.data.style,s=t.data.style;if(!r&&!s)return;if(r===s)return;r=r||{},s=s||{};const a="delayed"in r;for(o in r)s[o]||("-"===o[0]&&"-"===o[1]?i.style.removeProperty(o):i.style[o]="");for(o in s)if(n=s[o],"delayed"===o&&s.delayed)for(const e in s.delayed)n=s.delayed[e],a&&n===r.delayed[e]||G(i.style,e,n);else"remove"!==o&&n!==r[o]&&("-"===o[0]&&"-"===o[1]?i.style.setProperty(o,n):i.style[o]=n)}const $={pre:function(){U=!1},create:q,update:q,destroy:function(e){let t,n;const o=e.elm,i=e.data.style;if(i&&(t=i.destroy))for(n in t)o.style[n]=t[n]},remove:function(e,t){const n=e.data.style;if(!n||!n.remove)return void t();let o;U||(e.elm.offsetLeft,U=!0);const i=e.elm;let r=0;const s=n.remove;let a=0;const c=[];for(o in s)c.push(o),i.style[o]=s[o];const d=getComputedStyle(i)["transition-property"].split(", ");for(;r<d.length;++r)-1!==c.indexOf(d[r])&&a++;i.addEventListener("transitionend",(function(e){e.target===i&&--a,0===a&&t()}))}};function W(e,...t){const n=J(t,[]);return 1===n.length&&!n[0].sel&&n[0].text?a(void 0,void 0,void 0,n[0].text,void 0):a(void 0,null!=e?e:{},n,void 0,void 0)}function J(e,t){for(const n of e)null!=n&&!1!==n&&""!==n&&(Array.isArray(n)?J(n,t):"string"==typeof n||"number"==typeof n||"boolean"==typeof n?t.push(a(void 0,void 0,void 0,String(n),void 0)):t.push(n));return t}function X(e,t,...n){const o=J(n,[]);return"function"==typeof e?e(t,o):1===o.length&&!o[0].sel&&o[0].text?b(e,t,o[0].text):b(e,t,o)}X||(X={})},1644:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.limitViewport=t.isViewport=t.viewportFeature=void 0;const o=n(3807),i=n(166),r=n(7196);t.viewportFeature=Symbol("viewportFeature"),t.isViewport=function(e){return e instanceof i.SModelRootImpl&&e.hasFeature(t.viewportFeature)&&"zoom"in e&&"scroll"in e},t.limitViewport=function(e,t,n,i,s){t&&!o.Dimension.isValid(t)&&(t=void 0);let a,c,d=s?(0,r.limit)(e.zoom,s):e.zoom;if(t&&n){const e=t.width/(n.max-n.min);d<e&&(d=e)}if(t&&i){const e=t.height/(i.max-i.min);d<e&&(d=e)}if(n){const o=n.min,i=t?n.max-t.width/d:n.max;a=(0,r.limit)(e.scroll.x,{min:o,max:i})}else a=e.scroll.x;if(i){const n=i.min,o=t?i.max-t.height/d:i.max;c=(0,r.limit)(e.scroll.y,{min:n,max:o})}else c=e.scroll.y;return{scroll:{x:a,y:c},zoom:d}}},1697:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;const a=n(3648),c=s(n(5007)),d=n(9117),l=s(n(9466)),u=n(263),h=n(3934),p=n(6871),f=n(4483),g=n(2576),m=n(7763),y=n(6272),v=n(5528),b=n(3382),S=n(6289);class P{id;parent;options;_middleware;_bindingDictionary;_activations;_deactivations;_snapshots;_metadataReader;_moduleActivationStore;constructor(e){const t=e||{};if("object"!=typeof t)throw new Error(c.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=d.BindingScopeEnum.Transient;else if(t.defaultScope!==d.BindingScopeEnum.Singleton&&t.defaultScope!==d.BindingScopeEnum.Transient&&t.defaultScope!==d.BindingScopeEnum.Request)throw new Error(c.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(c.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(c.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=(0,m.id)(),this._bindingDictionary=new b.Lookup,this._snapshots=[],this._middleware=null,this._activations=new b.Lookup,this._deactivations=new b.Lookup,this.parent=null,this._metadataReader=new u.MetadataReader,this._moduleActivationStore=new S.ModuleActivationStore}static merge(e,t,...n){const o=new P,i=[e,t,...n].map((e=>(0,h.getBindingDictionary)(e))),r=(0,h.getBindingDictionary)(o);return i.forEach((e=>{var t;t=r,e.traverse(((e,n)=>{n.forEach((e=>{t.add(e.serviceIdentifier,e.clone())}))}))})),o}load(...e){const t=this._getContainerModuleHelpersFactory();for(const n of e){const e=t(n.id);n.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}async loadAsync(...e){const t=this._getContainerModuleHelpersFactory();for(const n of e){const e=t(n.id);await n.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}unload(...e){e.forEach((e=>{const t=this._removeModuleBindings(e.id);this._deactivateSingletons(t),this._removeModuleHandlers(e.id)}))}async unloadAsync(...e){for(const t of e){const e=this._removeModuleBindings(t.id);await this._deactivateSingletonsAsync(e),this._removeModuleHandlers(t.id)}}bind(e){return this._bind(this._buildBinding(e))}rebind(e){return this.unbind(e),this.bind(e)}async rebindAsync(e){return await this.unbindAsync(e),this.bind(e)}unbind(e){if(this._bindingDictionary.hasKey(e)){const t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)}async unbindAsync(e){if(this._bindingDictionary.hasKey(e)){const t=this._bindingDictionary.get(e);await this._deactivateSingletonsAsync(t)}this._removeServiceFromDictionary(e)}unbindAll(){this._bindingDictionary.traverse(((e,t)=>{this._deactivateSingletons(t)})),this._bindingDictionary=new b.Lookup}async unbindAllAsync(){const e=[];this._bindingDictionary.traverse(((t,n)=>{e.push(this._deactivateSingletonsAsync(n))})),await Promise.all(e),this._bindingDictionary=new b.Lookup}onActivation(e,t){this._activations.add(e,t)}onDeactivation(e,t){this._deactivations.add(e,t)}isBound(e){let t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t}isCurrentBound(e){return this._bindingDictionary.hasKey(e)}isBoundNamed(e,t){return this.isBoundTagged(e,l.NAMED_TAG,t)}isBoundTagged(e,t,n){let o=!1;if(this._bindingDictionary.hasKey(e)){const i=this._bindingDictionary.get(e),r=(0,h.createMockRequest)(this,e,{customTag:{key:t,value:n},isMultiInject:!1});o=i.some((e=>e.constraint(r)))}return!o&&this.parent&&(o=this.parent.isBoundTagged(e,t,n)),o}snapshot(){this._snapshots.push(v.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))}restore(){const e=this._snapshots.pop();if(void 0===e)throw new Error(c.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore}createChild(e){const t=new P(e||this.options);return t.parent=this,t}applyMiddleware(...e){const t=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(((e,t)=>t(e)),t)}applyCustomMetadataReader(e){this._metadataReader=e}get(e){const t=this._getNotAllArgs(e,!1,!1);return this._getButThrowIfAsync(t)}async getAsync(e){const t=this._getNotAllArgs(e,!1,!1);return this._get(t)}getTagged(e,t,n){const o=this._getNotAllArgs(e,!1,!1,t,n);return this._getButThrowIfAsync(o)}async getTaggedAsync(e,t,n){const o=this._getNotAllArgs(e,!1,!1,t,n);return this._get(o)}getNamed(e,t){return this.getTagged(e,l.NAMED_TAG,t)}async getNamedAsync(e,t){return this.getTaggedAsync(e,l.NAMED_TAG,t)}getAll(e,t){const n=this._getAllArgs(e,t,!1);return this._getButThrowIfAsync(n)}async getAllAsync(e,t){const n=this._getAllArgs(e,t,!1);return this._getAll(n)}getAllTagged(e,t,n){const o=this._getNotAllArgs(e,!0,!1,t,n);return this._getButThrowIfAsync(o)}async getAllTaggedAsync(e,t,n){const o=this._getNotAllArgs(e,!0,!1,t,n);return this._getAll(o)}getAllNamed(e,t){return this.getAllTagged(e,l.NAMED_TAG,t)}async getAllNamedAsync(e,t){return this.getAllTaggedAsync(e,l.NAMED_TAG,t)}resolve(e){const t=this.isBound(e);t||this.bind(e).toSelf();const n=this.get(e);return t||this.unbind(e),n}tryGet(e){const t=this._getNotAllArgs(e,!1,!0);return this._getButThrowIfAsync(t)}async tryGetAsync(e){const t=this._getNotAllArgs(e,!1,!0);return this._get(t)}tryGetTagged(e,t,n){const o=this._getNotAllArgs(e,!1,!0,t,n);return this._getButThrowIfAsync(o)}async tryGetTaggedAsync(e,t,n){const o=this._getNotAllArgs(e,!1,!0,t,n);return this._get(o)}tryGetNamed(e,t){return this.tryGetTagged(e,l.NAMED_TAG,t)}async tryGetNamedAsync(e,t){return this.tryGetTaggedAsync(e,l.NAMED_TAG,t)}tryGetAll(e,t){const n=this._getAllArgs(e,t,!0);return this._getButThrowIfAsync(n)}async tryGetAllAsync(e,t){const n=this._getAllArgs(e,t,!0);return this._getAll(n)}tryGetAllTagged(e,t,n){const o=this._getNotAllArgs(e,!0,!0,t,n);return this._getButThrowIfAsync(o)}async tryGetAllTaggedAsync(e,t,n){const o=this._getNotAllArgs(e,!0,!0,t,n);return this._getAll(o)}tryGetAllNamed(e,t){return this.tryGetAllTagged(e,l.NAMED_TAG,t)}async tryGetAllNamedAsync(e,t){return this.tryGetAllTaggedAsync(e,l.NAMED_TAG,t)}_preDestroy(e,t){if(void 0!==e&&Reflect.hasMetadata(l.PRE_DESTROY,e)){const n=Reflect.getMetadata(l.PRE_DESTROY,e);return t[n.value]?.()}}_removeModuleHandlers(e){const t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)}_removeModuleBindings(e){return this._bindingDictionary.removeByCondition((t=>t.moduleId===e))}_deactivate(e,t){const n=null==t?void 0:Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){const o=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if((0,g.isPromise)(o))return this._handleDeactivationError(o.then((async()=>this._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,n))),e.serviceIdentifier)}const o=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,n);if((0,g.isPromise)(o))return this._handleDeactivationError(o,e.serviceIdentifier)}catch(t){if(t instanceof Error)throw new Error(c.ON_DEACTIVATION_ERROR((0,y.getServiceIdentifierAsString)(e.serviceIdentifier),t.message))}}async _handleDeactivationError(e,t){try{await e}catch(e){if(e instanceof Error)throw new Error(c.ON_DEACTIVATION_ERROR((0,y.getServiceIdentifierAsString)(t),e.message))}}_deactivateContainer(e,t){let n=t.next();for(;"function"==typeof n.value;){const o=n.value(e);if((0,g.isPromise)(o))return o.then((async()=>this._deactivateContainerAsync(e,t)));n=t.next()}}async _deactivateContainerAsync(e,t){let n=t.next();for(;"function"==typeof n.value;)await n.value(e),n=t.next()}_getContainerModuleHelpersFactory(){const e=e=>t=>{const n=this._buildBinding(t);return n.moduleId=e,this._bind(n)},t=()=>e=>{this.unbind(e)},n=()=>async e=>this.unbindAsync(e),o=()=>e=>this.isBound(e),i=t=>{const n=e(t);return e=>(this.unbind(e),n(e))},r=e=>(t,n)=>{this._moduleActivationStore.addActivation(e,t,n),this.onActivation(t,n)},s=e=>(t,n)=>{this._moduleActivationStore.addDeactivation(e,t,n),this.onDeactivation(t,n)};return a=>({bindFunction:e(a),isboundFunction:o(),onActivationFunction:r(a),onDeactivationFunction:s(a),rebindFunction:i(a),unbindAsyncFunction:n(),unbindFunction:t()})}_bind(e){return this._bindingDictionary.add(e.serviceIdentifier,e),new f.BindingToSyntax(e)}_buildBinding(e){const t=this.options.defaultScope||d.BindingScopeEnum.Transient;return new a.Binding(e,t)}async _getAll(e){return Promise.all(this._get(e))}_get(e){const t={...e,contextInterceptor:e=>e,targetType:d.TargetTypeEnum.Variable};if(this._middleware){const e=this._middleware(t);if(null==e)throw new Error(c.INVALID_MIDDLEWARE_RETURN);return e}return this._planAndResolve()(t)}_getButThrowIfAsync(e){const t=this._get(e);if((0,g.isPromiseOrContainsPromise)(t))throw new Error(c.LAZY_IN_SYNC(e.serviceIdentifier));return t}_getAllArgs(e,t,n){return{avoidConstraints:!t?.enforceBindingConstraints,isMultiInject:!0,isOptional:n,serviceIdentifier:e}}_getNotAllArgs(e,t,n,o,i){return{avoidConstraints:!1,isMultiInject:t,isOptional:n,key:o,serviceIdentifier:e,value:i}}_getPlanMetadataFromNextArgs(e){const t={isMultiInject:e.isMultiInject};return void 0!==e.key&&(t.customTag={key:e.key,value:e.value}),!0===e.isOptional&&(t.isOptional=!0),t}_planAndResolve(){return e=>{let t=(0,h.plan)(this._metadataReader,this,e.targetType,e.serviceIdentifier,this._getPlanMetadataFromNextArgs(e),e.avoidConstraints);return t=e.contextInterceptor(t),(0,p.resolve)(t)}}_deactivateIfSingleton(e){if(e.activated)return(0,g.isPromise)(e.cache)?e.cache.then((t=>this._deactivate(e,t))):this._deactivate(e,e.cache)}_deactivateSingletons(e){for(const t of e){const e=this._deactivateIfSingleton(t);if((0,g.isPromise)(e))throw new Error(c.ASYNC_UNBIND_REQUIRED)}}async _deactivateSingletonsAsync(e){await Promise.all(e.map((async e=>this._deactivateIfSingleton(e))))}_propagateContainerDeactivationThenBindingAndPreDestroy(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)}async _propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,n){this.parent?await this._deactivate.bind(this.parent)(e,t):await this._bindingDeactivationAndPreDestroyAsync(e,t,n)}_removeServiceFromDictionary(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(`${c.CANNOT_UNBIND} ${(0,y.getServiceIdentifierAsString)(e)}`)}}_bindingDeactivationAndPreDestroy(e,t,n){if("function"==typeof e.onDeactivation){const o=e.onDeactivation(t);if((0,g.isPromise)(o))return o.then((()=>this._preDestroy(n,t)))}return this._preDestroy(n,t)}async _bindingDeactivationAndPreDestroyAsync(e,t,n){"function"==typeof e.onDeactivation&&await e.onDeactivation(t),await this._preDestroy(n,t)}}t.Container=P},1702:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.JunctionFinder=void 0;const i=n(2650),r=n(356);let s=class{constructor(){this.edgesMap=new Map,this.sourcesMap=new Map,this.targetsMap=new Map}apply(e,t){this.findJunctions(e,t)}findJunctions(e,t){Array.from(t.index.all().filter((e=>e instanceof r.SEdgeImpl))).forEach((e=>{this.edgesMap.set(e.id,e);const t=this.sourcesMap.get(e.sourceId);t?t.add(e.id):this.sourcesMap.set(e.sourceId,new Set([e.id]));const n=this.targetsMap.get(e.targetId);n?n.add(e.id):this.targetsMap.set(e.targetId,new Set([e.id]))})),e.routes.forEach(((t,n)=>{const o=this.edgesMap.get(n);o&&(this.findJunctionPointsWithSameSource(o,t,e),this.findJunctionPointsWithSameTarget(o,t,e))}))}findJunctionPointsWithSameSource(e,t,n){const o=this.sourcesMap.get(e.sourceId);if(!o)return;const i=Array.from(o).filter((t=>t!==e.id)).map((e=>n.get(e))).filter((e=>void 0!==e));for(const e of i){const n=this.getJunctionIndex(t,e);-1!==n&&0!==n&&this.setJunctionPoints(t,e,n)}}findJunctionPointsWithSameTarget(e,t,n){const o=this.targetsMap.get(e.targetId);if(!o)return;const i=Array.from(o).filter((t=>t!==e.id)).map((e=>n.get(e))).filter((e=>void 0!==e));t.reverse();for(const e of i){e.reverse();const n=this.getJunctionIndex(t,e);-1!==n&&0!==n&&(this.setJunctionPoints(t,e,n),e.reverse())}t.reverse()}setJunctionPoints(e,t,n){const o=this.getSegmentDirection(e[n-1],e[n]);if(o!==this.getSegmentDirection(t[n-1],t[n]))this.setPreviousPointAsJunction(e,t,n);else if("left"===o||"right"===o){if(e[n].y!==t[n].y)return void this.setPreviousPointAsJunction(e,t,n);e[n].isJunction="left"===o?e[n].x>t[n].x:e[n].x<t[n].x,t[n].isJunction="left"===o?t[n].x>e[n].x:t[n].x<e[n].x}else{if(e[n].x!==t[n].x)return void this.setPreviousPointAsJunction(e,t,n);e[n].isJunction="up"===o?e[n].y>t[n].y:e[n].y<t[n].y,t[n].isJunction="up"===o?t[n].y>e[n].y:t[n].y<e[n].y}}setPreviousPointAsJunction(e,t,n){e[n-1].isJunction=!0,t[n-1].isJunction=!0}getSegmentDirection(e,t){const n=t.x-e.x,o=t.y-e.y;let i="horizontal";return Math.abs(n)<Math.abs(o)&&(i="vertical"),"horizontal"===i?n>0?"right":"left":o>0?"down":"up"}getJunctionIndex(e,t){let n=0;for(;n<e.length&&n<t.length;){if(e[n].x!==t[n].x||e[n].y!==t[n].y)return n;n++}return-1}};t.JunctionFinder=s,t.JunctionFinder=s=o([(0,i.injectable)()],s)},1711:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportSvgPostprocessor=t.ExportSvgCommand=t.RequestExportSvgAction=t.ExportSvgKeyListener=void 0;const s=n(2650),a=n(7020),c=n(3194),d=n(9882),l=n(166),u=n(8245),h=n(7305),p=n(68),f=n(3289),g=n(1644),m=n(6538),y=n(2041);let v=class extends u.KeyListener{keyDown(e,t){return(0,h.matchesKeystroke)(t,"KeyE","ctrlCmd","shift")?[b.create()]:[]}};var b;t.ExportSvgKeyListener=v,t.ExportSvgKeyListener=v=o([(0,s.injectable)()],v),function(e){e.KIND="requestExportSvg",e.create=function(t={}){return{kind:e.KIND,requestId:(0,a.generateRequestId)(),options:t}}}(b||(t.RequestExportSvgAction=b={}));let S=class extends c.HiddenCommand{constructor(e){super(),this.action=e}execute(e){if((0,p.isExportable)(e.root)){const t=e.modelFactory.createRoot(e.root);if((0,p.isExportable)(t))return(0,g.isViewport)(t)&&(t.zoom=1,t.scroll={x:0,y:0}),t.index.all().forEach((e=>{(0,d.isSelectable)(e)&&e.selected&&(e.selected=!1),(0,m.isHoverable)(e)&&e.hoverFeedback&&(e.hoverFeedback=!1)})),{model:t,modelChanged:!0,cause:this.action}}return{model:e.root,modelChanged:!1}}};t.ExportSvgCommand=S,S.KIND=b.KIND,t.ExportSvgCommand=S=o([r(0,(0,s.inject)(y.TYPES.Action)),i("design:paramtypes",[Object])],S);let P=class{decorate(e,t){return t instanceof l.SModelRootImpl&&(this.root=t),e}postUpdate(e){this.root&&void 0!==e&&e.kind===b.KIND&&this.svgExporter.export(this.root,e)}};t.ExportSvgPostprocessor=P,o([(0,s.inject)(y.TYPES.SvgExporter),i("design:type",f.SvgExporter)],P.prototype,"svgExporter",void 0),t.ExportSvgPostprocessor=P=o([(0,s.injectable)()],P)},1752:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(740),i=n(2650),r=n(136),s=n(723),a=n(2041),c=n(5163),d=new i.ContainerModule(((e,t,n)=>{(0,o.configureModelElement)({bind:e,isBound:n},"marker",r.SIssueMarkerImpl,s.IssueMarkerView),e(c.DecorationPlacer).toSelf().inSingletonScope(),e(a.TYPES.IVNodePostprocessor).toService(c.DecorationPlacer)}));t.default=d},1773:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InversifyCoreError=t.isAppErrorSymbol=void 0,t.isAppErrorSymbol=Symbol.for("@inversifyjs/core/InversifyCoreError");class n extends Error{[t.isAppErrorSymbol];kind;constructor(e,n,o){super(n,o),this[t.isAppErrorSymbol]=!0,this.kind=e}static is(e){return"object"==typeof e&&null!==e&&!0===e[t.isAppErrorSymbol]}static isErrorOfKind(e,t){return n.is(e)&&e.kind===t}}t.InversifyCoreError=n},1799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0,t.Plan=class{parentContext;rootRequest;constructor(e,t){this.parentContext=e,this.rootRequest=t}}},1823:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=void 0,t.getDependencies=function(e,t){return(0,a.getTargets)(e)(t)},t.getBaseClassDependencyCount=function e(t,n){const o=(0,d.getBaseType)(n);if(void 0===o||o===Object)return 0;const i=(0,a.getTargets)(t)(o),r=i.map((e=>e.metadata.filter((e=>e.key===c.UNMANAGED_TAG)))),s=[].concat.apply([],r).length,l=i.length-s;return l>0?l:e(t,o)};const a=n(9687),c=s(n(9466)),d=n(7893),l=n(6272);Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return l.getFunctionName}})},1864:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getEditableLabel=t.EditLabelKeyListener=t.EditLabelMouseListener=t.ApplyLabelEditCommand=t.ResolvedLabelEdit=t.isApplyLabelEditAction=t.isEditLabelAction=t.EditLabelAction=void 0;const s=n(2650),a=n(7020),c=n(3194),d=n(2041),l=n(5677),u=n(8245),h=n(7305),p=n(9882),f=n(8302),g=n(4246);var m;!function(e){e.KIND="EditLabel",e.create=function(t){return{kind:e.KIND,labelId:t}}}(m||(t.EditLabelAction=m={})),t.isEditLabelAction=function(e){return(0,a.isAction)(e)&&e.kind===m.KIND&&"labelId"in e},t.isApplyLabelEditAction=function(e){return(0,a.isAction)(e)&&e.kind===a.ApplyLabelEditAction.KIND&&"labelId"in e&&"text"in e},t.ResolvedLabelEdit=class{};let y=class extends c.Command{constructor(e){super(),this.action=e}execute(e){const t=e.root.index.getById(this.action.labelId);return t&&(0,g.isEditableLabel)(t)&&(this.resolvedLabelEdit={label:t,oldLabel:t.text,newLabel:this.action.text},t.text=this.action.text),e.root}undo(e){return this.resolvedLabelEdit&&(this.resolvedLabelEdit.label.text=this.resolvedLabelEdit.oldLabel),e.root}redo(e){return this.resolvedLabelEdit&&(this.resolvedLabelEdit.label.text=this.resolvedLabelEdit.newLabel),e.root}};t.ApplyLabelEditCommand=y,y.KIND=a.ApplyLabelEditAction.KIND,t.ApplyLabelEditCommand=y=o([r(0,(0,s.inject)(d.TYPES.Action)),i("design:paramtypes",[Object])],y);class v extends l.MouseListener{doubleClick(e,t){const n=S(e);return n?[m.create(n.id)]:[]}}t.EditLabelMouseListener=v;class b extends u.KeyListener{keyDown(e,t){if((0,h.matchesKeystroke)(t,"F2")){const t=(0,f.toArray)(e.index.all().filter((e=>(0,p.isSelectable)(e)&&e.selected))).map(S).filter((e=>void 0!==e));if(1===t.length)return[m.create(t[0].id)]}return[]}}function S(e){return(0,g.isEditableLabel)(e)?e:(0,g.isWithEditableLabel)(e)&&e.editableLabel?e.editableLabel:void 0}t.EditLabelKeyListener=b,t.getEditableLabel=S},1876:function(e,t,n){"use strict";var o,i,r,s=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ManhattanEllipticAnchor=t.ManhattanDiamondAnchor=t.ManhattanRectangularAnchor=void 0;const a=n(5017),c=n(7196),d=n(2638),l=n(7259),u=n(2650);let h=o=class{get kind(){return o.KIND}getAnchor(e,t,n){const o=e.bounds;if(o.width<=0||o.height<=0)return o;const i={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n};return t.x>=i.x&&i.x+i.width>=t.x?t.y<i.y+.5*i.height?{x:t.x,y:i.y}:{x:t.x,y:i.y+i.height}:t.y>=i.y&&i.y+i.height>=t.y?t.x<i.x+.5*i.width?{x:i.x,y:t.y}:{x:i.x+i.width,y:t.y}:a.Bounds.center(i)}};t.ManhattanRectangularAnchor=h,h.KIND=l.ManhattanEdgeRouter.KIND+":"+d.RECTANGULAR_ANCHOR_KIND,t.ManhattanRectangularAnchor=h=o=s([(0,u.injectable)()],h);let p=i=class{get kind(){return i.KIND}getAnchor(e,t,n=0){const o=e.bounds;if(o.width<=0||o.height<=0)return o;const i={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n},r=a.Bounds.center(i);let s,d;return t.x>=i.x&&t.x<=i.x+i.width?i.x+.5*i.width>=t.x?(d=new c.PointToPointLine(t,{x:t.x,y:r.y}),s=t.y<r.y?new c.PointToPointLine({x:i.x,y:r.y},{x:r.x,y:i.y}):new c.PointToPointLine({x:i.x,y:r.y},{x:r.x,y:i.y+i.height})):(d=new c.PointToPointLine(t,{x:t.x,y:r.y}),s=t.y<r.y?new c.PointToPointLine({x:i.x+i.width,y:r.y},{x:r.x,y:i.y}):new c.PointToPointLine({x:i.x+i.width,y:r.y},{x:r.x,y:i.y+i.height})):t.y>=i.y&&t.y<=i.y+i.height&&(i.y+.5*i.height>=t.y?(d=new c.PointToPointLine(t,{x:r.x,y:t.y}),s=t.x<r.x?new c.PointToPointLine({x:i.x,y:r.y},{x:r.x,y:i.y}):new c.PointToPointLine({x:i.x+i.width,y:r.y},{x:r.x,y:i.y})):(d=new c.PointToPointLine(t,{x:r.x,y:t.y}),s=t.x<r.x?new c.PointToPointLine({x:i.x,y:r.y},{x:r.x,y:i.y+i.height}):new c.PointToPointLine({x:i.x+i.width,y:r.y},{x:r.x,y:i.y+i.height}))),d&&s?(0,c.intersection)(s,d):r}};t.ManhattanDiamondAnchor=p,p.KIND=l.ManhattanEdgeRouter.KIND+":"+d.DIAMOND_ANCHOR_KIND,t.ManhattanDiamondAnchor=p=i=s([(0,u.injectable)()],p);let f=r=class{get kind(){return r.KIND}getAnchor(e,t,n=0){const o=e.bounds;if(o.width<=0||o.height<=0)return o;const i={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n},r=a.Bounds.center(i),s=a.Point.subtract(t,r);let c=r.x,d=r.y;if(t.x>=i.x&&i.x+i.width>=t.x){c+=s.x;const e=.5*i.height*Math.sqrt(1-s.x*s.x/(.25*i.width*i.width));s.y<0?d-=e:d+=e}else if(t.y>=i.y&&i.y+i.height>=t.y){d+=s.y;const e=.5*i.width*Math.sqrt(1-s.y*s.y/(.25*i.height*i.height));s.x<0?c-=e:c+=e}return{x:c,y:d}}};t.ManhattanEllipticAnchor=f,f.KIND=l.ManhattanEdgeRouter.KIND+":"+d.ELLIPTIC_ANCHOR_KIND,t.ManhattanEllipticAnchor=f=r=s([(0,u.injectable)()],f)},1892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportRootElementImpl=void 0;const o=n(5017),i=n(166),r=n(1644),s=n(68);class a extends i.SModelRootImpl{constructor(e){super(e),this.scroll={x:0,y:0},this.zoom=1,this.position=o.Point.ORIGIN,this.size=o.Dimension.EMPTY}get bounds(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}}set bounds(e){this.position={x:e.x,y:e.y},this.size={width:e.width,height:e.height}}localToParent(e){const t={x:(e.x-this.scroll.x)*this.zoom,y:(e.y-this.scroll.y)*this.zoom,width:-1,height:-1};return(0,o.isBounds)(e)&&(t.width=e.width*this.zoom,t.height=e.height*this.zoom),t}parentToLocal(e){const t={x:e.x/this.zoom+this.scroll.x,y:e.y/this.zoom+this.scroll.y,width:-1,height:-1};return(0,o.isBounds)(e)&&o.Dimension.isValid(e)&&(t.width=e.width/this.zoom,t.height=e.height/this.zoom),t}}t.ViewportRootElementImpl=a,a.DEFAULT_FEATURES=[r.viewportFeature,s.exportFeature]},1929:(e,t)=>{"use strict";function n(e,n=!1,o=!1,i=[]){const r=["codicon",`codicon-${e}`];return n&&r.push(t.ACTION_ITEM),o&&r.push(t.ANIMATION_SPIN),i.length>0&&r.push(...i),r}Object.defineProperty(t,"__esModule",{value:!0}),t.codiconCSSClasses=t.codiconCSSString=t.ANIMATION_SPIN=t.ACTION_ITEM=void 0,t.ACTION_ITEM="action-item",t.ANIMATION_SPIN="animation-spin",t.codiconCSSString=function(e,t=!1,o=!1,i=[]){return n(e,t,o,i).join(" ")},t.codiconCSSClasses=n},2013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.easeInOut=void 0,t.easeInOut=function(e){return e<.5?e*e*2:1-(1-e)*(1-e)*2}},2041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES=void 0,t.TYPES={Action:Symbol("Action"),IActionDispatcher:Symbol("IActionDispatcher"),IActionDispatcherProvider:Symbol("IActionDispatcherProvider"),IActionHandlerInitializer:Symbol("IActionHandlerInitializer"),ActionHandlerRegistration:Symbol("ActionHandlerRegistration"),ActionHandlerRegistryProvider:Symbol("ActionHandlerRegistryProvider"),IAnchorComputer:Symbol("IAnchor"),AnimationFrameSyncer:Symbol("AnimationFrameSyncer"),IButtonHandlerRegistration:Symbol("IButtonHandlerRegistration"),ICommandPaletteActionProvider:Symbol("ICommandPaletteActionProvider"),ICommandPaletteActionProviderRegistry:Symbol("ICommandPaletteActionProviderRegistry"),CommandRegistration:Symbol("CommandRegistration"),ICommandStack:Symbol("ICommandStack"),CommandStackOptions:Symbol("CommandStackOptions"),ICommandStackProvider:Symbol("ICommandStackProvider"),IContextMenuItemProvider:Symbol.for("IContextMenuProvider"),IContextMenuProviderRegistry:Symbol.for("IContextMenuProviderRegistry"),IContextMenuService:Symbol.for("IContextMenuService"),IContextMenuServiceProvider:Symbol.for("IContextMenuServiceProvider"),DOMHelper:Symbol("DOMHelper"),IDiagramLocker:Symbol("IDiagramLocker"),IEdgeRouter:Symbol("IEdgeRouter"),IEdgeRoutePostprocessor:Symbol("IEdgeRoutePostprocessor"),IEditLabelValidationDecorator:Symbol("IEditLabelValidationDecorator"),IEditLabelValidator:Symbol("IEditLabelValidator"),HiddenModelViewer:Symbol("HiddenModelViewer"),HiddenVNodePostprocessor:Symbol("HiddenVNodeDecorator"),HoverState:Symbol("HoverState"),KeyListener:Symbol("KeyListener"),LayoutRegistration:Symbol("LayoutRegistration"),LayoutRegistry:Symbol("LayoutRegistry"),Layouter:Symbol("Layouter"),LogLevel:Symbol("LogLevel"),ILogger:Symbol("ILogger"),IModelFactory:Symbol("IModelFactory"),IModelLayoutEngine:Symbol("IModelLayoutEngine"),ModelRendererFactory:Symbol("ModelRendererFactory"),ModelSource:Symbol("ModelSource"),ModelSourceProvider:Symbol("ModelSourceProvider"),ModelViewer:Symbol("ModelViewer"),MouseListener:Symbol("MouseListener"),PatcherProvider:Symbol("PatcherProvider"),IPopupModelProvider:Symbol("IPopupModelProvider"),PopupModelViewer:Symbol("PopupModelViewer"),PopupMouseListener:Symbol("PopupMouseListener"),PopupVNodePostprocessor:Symbol("PopupVNodeDecorator"),SModelElementRegistration:Symbol("SModelElementRegistration"),SModelRegistry:Symbol("SModelRegistry"),ISnapper:Symbol("ISnapper"),SvgExporter:Symbol("SvgExporter"),ISvgExportPostprocessor:Symbol("ISvgExportPostprocessor"),IUIExtension:Symbol("IUIExtension"),UIExtensionRegistry:Symbol("UIExtensionRegistry"),IVNodePostprocessor:Symbol("IVNodePostprocessor"),ViewRegistration:Symbol("ViewRegistration"),ViewRegistry:Symbol("ViewRegistry"),IViewer:Symbol("IViewer"),ViewerOptions:Symbol("ViewerOptions"),IViewerProvider:Symbol("IViewerProvider")}},2079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModelBounds=t.getProjectedBounds=t.getProjections=t.isProjectable=void 0;const o=n(5017),i=n(7154),r=n(54),s=n(5855);function a(e){return(0,i.hasOwnProperty)(e,"projectionCssClasses")}function c(e){const t=e.parent;if(e.projectedBounds){let n=e.projectedBounds;return(0,s.isBoundsAware)(t)&&(n=(0,r.transformToRootBounds)(t,n)),n}if((0,s.isBoundsAware)(e)){let n=e.bounds;return n=(0,r.transformToRootBounds)(t,n),n}}t.isProjectable=a,t.getProjections=function e(t){let n;for(const o of t.children){if(a(o)&&o.projectionCssClasses.length>0){const e=c(o);if(e){const t={elementId:o.id,projectedBounds:e,cssClasses:o.projectionCssClasses};n?n.push(t):n=[t]}}if(o.children.length>0){const t=e(o);t&&(n?n.push(...t):n=t)}}return n},t.getProjectedBounds=c;const d=1e9;t.getModelBounds=function(e){let t=d,n=d,i=-d,r=-d;const a=(0,s.isBoundsAware)(e)?e.bounds:void 0;if(a&&o.Dimension.isValid(a))t=a.x,n=a.y,i=t+a.width,r=n+a.height;else for(const o of e.children)if((0,s.isBoundsAware)(o)){const e=o.bounds;t=Math.min(t,e.x),n=Math.min(n,e.y),i=Math.max(i,e.x+e.width),r=Math.max(r,e.y+e.height)}if(t=Math.min(t,e.scroll.x),n=Math.min(n,e.scroll.y),i=Math.max(i,e.scroll.x+e.canvasBounds.width/e.zoom),r=Math.max(r,e.scroll.y+e.canvasBounds.height/e.zoom),t<i&&n<r)return{x:t,y:n,width:i-t,height:r-n}}},2131:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandButtonHandler=void 0;const i=n(2650),r=n(7020),s=n(54),a=n(6570);let c=class{buttonPressed(e){const t=(0,s.findParentByFeature)(e,a.isExpandable);return void 0!==t?[r.CollapseExpandAction.create({expandIds:t.expanded?[]:[t.id],collapseIds:t.expanded?[t.id]:[]})]:[]}};t.ExpandButtonHandler=c,c.TYPE="button:expand",t.ExpandButtonHandler=c=o([(0,i.injectable)()],c)},2151:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyServiceIdentifier=t.islazyServiceIdentifierSymbol=void 0,t.islazyServiceIdentifierSymbol=Symbol.for("@inversifyjs/common/islazyServiceIdentifier");class n{[t.islazyServiceIdentifierSymbol];#s;constructor(e){this.#s=e,this[t.islazyServiceIdentifierSymbol]=!0}static is(e){return"object"==typeof e&&null!==e&&!0===e[t.islazyServiceIdentifierSymbol]}unwrap(){return this.#s()}}t.LazyServiceIdentifier=n},2228:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IntersectionFinder=t.BY_DESCENDING_X_THEN_DESCENDING_Y=t.BY_X_THEN_DESCENDING_Y=t.BY_DESCENDING_X_THEN_Y=t.BY_X_THEN_Y=t.isIntersectingRoutedPoint=void 0;const r=n(2650),s=i(n(4262)),a=n(8590);function c(e){return void 0!==e&&"intersections"in e&&"kind"in e}t.isIntersectingRoutedPoint=c,t.BY_X_THEN_Y=(e,t)=>e.intersectionPoint.x===t.intersectionPoint.x?e.intersectionPoint.y-t.intersectionPoint.y:e.intersectionPoint.x-t.intersectionPoint.x,t.BY_DESCENDING_X_THEN_Y=(e,t)=>e.intersectionPoint.x===t.intersectionPoint.x?e.intersectionPoint.y-t.intersectionPoint.y:t.intersectionPoint.x-e.intersectionPoint.x,t.BY_X_THEN_DESCENDING_Y=(e,t)=>e.intersectionPoint.x===t.intersectionPoint.x?t.intersectionPoint.y-e.intersectionPoint.y:e.intersectionPoint.x-t.intersectionPoint.x,t.BY_DESCENDING_X_THEN_DESCENDING_Y=(e,t)=>e.intersectionPoint.x===t.intersectionPoint.x?t.intersectionPoint.y-e.intersectionPoint.y:t.intersectionPoint.x-e.intersectionPoint.x;let d=class{apply(e){const t=this.find(e);this.addToRouting(t,e)}find(e){const t=new s.default(void 0,a.checkWhichEventIsLeft);return e.routes.forEach(((e,n)=>{this.isSupportedRoute(e)&&(0,a.addRoute)(n,e,t)})),(0,a.runSweep)(t)}isSupportedRoute(e){return void 0===e.find((e=>"source"!==e.kind&&"target"!==e.kind&&"linear"!==e.kind))}addToRouting(e,t){for(const n of e){const e=t.get(n.routable1),o=t.get(n.routable2);this.addIntersectionToRoutedPoint(n,e,n.segmentIndex1),this.addIntersectionToRoutedPoint(n,o,n.segmentIndex2)}}addIntersectionToRoutedPoint(e,t,n){if(t&&t.length>n){const o=t[n+1];if(c(o))o.intersections.push(e);else{const i=Object.assign(Object.assign({},o),{intersections:[e]});t[n+1]=i}}}};t.IntersectionFinder=d,t.IntersectionFinder=d=o([(0,r.injectable)()],d)},2292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overrideViewerOptions=t.configureViewerOptions=t.defaultViewerOptions=void 0;const o=n(7154),i=n(2041);t.defaultViewerOptions=()=>({baseDiv:"sprotty",baseClass:"sprotty",hiddenDiv:"sprotty-hidden",hiddenClass:"sprotty-hidden",popupDiv:"sprotty-popup",popupClass:"sprotty-popup",popupClosedClass:"sprotty-popup-closed",needsClientLayout:!0,needsServerLayout:!1,popupOpenDelay:1e3,popupCloseDelay:300,zoomLimits:{min:.01,max:10},horizontalScrollLimits:{min:-1e5,max:1e5},verticalScrollLimits:{min:-1e5,max:1e5}}),t.configureViewerOptions=function(e,n){const o=Object.assign(Object.assign({},(0,t.defaultViewerOptions)()),n);e.isBound(i.TYPES.ViewerOptions)?e.rebind(i.TYPES.ViewerOptions).toConstantValue(o):e.bind(i.TYPES.ViewerOptions).toConstantValue(o)},t.overrideViewerOptions=function(e,t){const n=e.get(i.TYPES.ViewerOptions);return(0,o.safeAssign)(n,t),n}},2379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(5524),r=n(2442),s=n(2041),a=new o.ContainerModule((e=>{e(s.TYPES.IContextMenuServiceProvider).toProvider((e=>()=>new Promise(((t,n)=>{e.container.isBound(s.TYPES.IContextMenuService)?t(e.container.get(s.TYPES.IContextMenuService)):n()})))),e(r.ContextMenuMouseListener).toSelf().inSingletonScope(),e(s.TYPES.MouseListener).toService(r.ContextMenuMouseListener),e(s.TYPES.IContextMenuProviderRegistry).to(i.ContextMenuProviderRegistry)}));t.default=a},2413:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandButtonView=void 0;const i=n(417),r=n(6570),s=n(54),a=n(2650);let c=class{render(e,t){const n=(0,s.findParentByFeature)(e,r.isExpandable),o=void 0!==n&&n.expanded?"M 1,5 L 8,12 L 15,5 Z":"M 1,8 L 8,15 L 8,1 Z";return(0,i.svg)("g",{"class-sprotty-button":"{true}","class-enabled":"{button.enabled}"},(0,i.svg)("rect",{x:0,y:0,width:16,height:16,opacity:0}),(0,i.svg)("path",{d:o}))}};t.ExpandButtonView=c,t.ExpandButtonView=c=o([(0,a.injectable)()],c)},2442:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenuMouseListener=void 0;const s=n(2650),a=n(7020),c=n(54),d=n(2041),l=n(5677),u=n(9882),h=n(5524);let p=class extends l.MouseListener{constructor(e,t){super(),this.contextMenuService=e,this.menuProvider=t}contextMenu(e,t){return this.showContextMenu(e,t),[]}async showContextMenu(e,t){let n;try{n=await this.contextMenuService()}catch(e){return}let o=!1;const i=(0,c.findParentByFeature)(e,u.isSelectable);i&&(o=i.selected,i.selected=!0);const r=e.root,s={x:t.x,y:t.y};if(e.id===r.id||(0,u.isSelected)(i)){const e=await this.menuProvider.getItems(r,s),t=()=>{i&&(i.selected=o)};n.show(e,s,t)}else{if((0,u.isSelectable)(e)){const t={selectedElementsIDs:[e.id],deselectedElementsIDs:Array.from(r.index.all().filter(u.isSelected),(e=>e.id))};await this.actionDispatcher.dispatch(a.SelectAction.create(t))}const t=await this.menuProvider.getItems(r,s);n.show(t,s)}}};t.ContextMenuMouseListener=p,o([(0,s.inject)(d.TYPES.IActionDispatcher),i("design:type",Object)],p.prototype,"actionDispatcher",void 0),t.ContextMenuMouseListener=p=o([r(0,(0,s.inject)(d.TYPES.IContextMenuServiceProvider)),r(1,(0,s.inject)(d.TYPES.IContextMenuProviderRegistry)),i("design:paramtypes",[Function,h.ContextMenuProviderRegistry])],p)},2481:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClosePopupActionHandler=t.HoverKeyListener=t.PopupHoverMouseListener=t.HoverMouseListener=t.AbstractHoverMouseListener=t.SetPopupModelCommand=t.HoverFeedbackCommand=void 0;const s=n(2650),a=n(7020),c=n(5017),d=n(7305),l=n(2041),u=n(166),h=n(5677),p=n(3194),f=n(5857),g=n(8245),m=n(54),y=n(5855),v=n(6538);let b=class extends p.SystemCommand{constructor(e){super(),this.action=e}execute(e){const t=e.root.index.getById(this.action.mouseoverElement);return t&&(0,v.isHoverable)(t)&&(t.hoverFeedback=this.action.mouseIsOver),this.redo(e)}undo(e){return e.root}redo(e){return e.root}};t.HoverFeedbackCommand=b,b.KIND=a.HoverFeedbackAction.KIND,t.HoverFeedbackCommand=b=o([(0,s.injectable)(),r(0,(0,s.inject)(l.TYPES.Action)),i("design:paramtypes",[Object])],b);let S=class extends p.PopupCommand{constructor(e){super(),this.action=e}execute(e){return this.oldRoot=e.root,this.newRoot=e.modelFactory.createRoot(this.action.newRoot),this.newRoot}undo(e){return this.oldRoot}redo(e){return this.newRoot}};t.SetPopupModelCommand=S,S.KIND=a.SetPopupModelAction.KIND,t.SetPopupModelCommand=S=o([(0,s.injectable)(),r(0,(0,s.inject)(l.TYPES.Action)),i("design:paramtypes",[Object])],S);class P extends h.MouseListener{mouseDown(e,t){return this.mouseIsDown=!0,[]}mouseUp(e,t){return this.mouseIsDown=!1,[]}stopMouseOutTimer(){void 0!==this.state.mouseOutTimer&&(window.clearTimeout(this.state.mouseOutTimer),this.state.mouseOutTimer=void 0)}startMouseOutTimer(){return this.stopMouseOutTimer(),new Promise((e=>{this.state.mouseOutTimer=window.setTimeout((()=>{this.state.popupOpen=!1,this.state.previousPopupElement=void 0,e(a.SetPopupModelAction.create({type:f.EMPTY_ROOT.type,id:f.EMPTY_ROOT.id}))}),this.options.popupCloseDelay)}))}stopMouseOverTimer(){void 0!==this.state.mouseOverTimer&&(window.clearTimeout(this.state.mouseOverTimer),this.state.mouseOverTimer=void 0)}}t.AbstractHoverMouseListener=P,o([(0,s.inject)(l.TYPES.ViewerOptions),i("design:type",Object)],P.prototype,"options",void 0),o([(0,s.inject)(l.TYPES.HoverState),i("design:type",Object)],P.prototype,"state",void 0);let _=class extends P{computePopupBounds(e,t){let n={x:-5,y:20};const o=(0,y.getAbsoluteBounds)(e),i=e.root.canvasBounds,r=c.Bounds.translate(o,i),s=r.x+r.width-t.x,a=r.y+r.height-t.y;a<=s&&this.allowSidePosition(e,"below",a)?n={x:-5,y:Math.round(a+5)}:s<=a&&this.allowSidePosition(e,"right",s)&&(n={x:Math.round(s+5),y:-5});let d=t.x+n.x;const l=i.x+i.width;d>l&&(d=l);let u=t.y+n.y;const h=i.y+i.height;return u>h&&(u=h),{x:d,y:u,width:-1,height:-1}}allowSidePosition(e,t,n){return!(e instanceof u.SModelRootImpl)&&n<=150}startMouseOverTimer(e,t){return this.stopMouseOverTimer(),new Promise((n=>{this.state.mouseOverTimer=window.setTimeout((()=>{const o=this.computePopupBounds(e,{x:t.pageX,y:t.pageY});n(a.RequestPopupModelAction.create({elementId:e.id,bounds:o})),this.state.popupOpen=!0,this.state.previousPopupElement=e}),this.options.popupOpenDelay)}))}mouseOver(e,t){const n=[];if(!this.mouseIsDown){const o=(0,m.findParent)(e,v.hasPopupFeature);this.state.popupOpen&&(void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id!==o.id)?n.push(this.startMouseOutTimer()):(this.stopMouseOverTimer(),this.stopMouseOutTimer()),void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,t)),this.lastHoverFeedbackElementId&&(n.push(a.HoverFeedbackAction.create({mouseoverElement:this.lastHoverFeedbackElementId,mouseIsOver:!1})),this.lastHoverFeedbackElementId=void 0);const i=(0,m.findParentByFeature)(e,v.isHoverable);void 0!==i&&(n.push(a.HoverFeedbackAction.create({mouseoverElement:i.id,mouseIsOver:!0})),this.lastHoverFeedbackElementId=i.id)}return n}mouseOut(e,t){const n=[];if(!this.mouseIsDown){const o=this.getElementFromEventPosition(t);if(!this.isSprottyPopup(o)){if(this.state.popupOpen){const t=(0,m.findParent)(e,v.hasPopupFeature);void 0!==this.state.previousPopupElement&&void 0!==t&&this.state.previousPopupElement.id===t.id&&n.push(this.startMouseOutTimer())}this.stopMouseOverTimer();const t=(0,m.findParentByFeature)(e,v.isHoverable);void 0!==t&&(n.push(a.HoverFeedbackAction.create({mouseoverElement:t.id,mouseIsOver:!1})),this.lastHoverFeedbackElementId&&this.lastHoverFeedbackElementId!==t.id&&n.push(a.HoverFeedbackAction.create({mouseoverElement:this.lastHoverFeedbackElementId,mouseIsOver:!1})),this.lastHoverFeedbackElementId=void 0)}}return n}getElementFromEventPosition(e){return document.elementFromPoint(e.x,e.y)}isSprottyPopup(e){return!!e&&(e.id===this.options.popupDiv||!!e.parentElement&&this.isSprottyPopup(e.parentElement))}mouseMove(e,t){const n=[];if(!this.mouseIsDown){void 0!==this.state.previousPopupElement&&this.closeOnMouseMove(this.state.previousPopupElement,t)&&n.push(this.startMouseOutTimer());const o=(0,m.findParent)(e,v.hasPopupFeature);void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,t))}return n}closeOnMouseMove(e,t){return e instanceof u.SModelRootImpl}};t.HoverMouseListener=_,o([(0,s.inject)(l.TYPES.ViewerOptions),i("design:type",Object)],_.prototype,"options",void 0),t.HoverMouseListener=_=o([(0,s.injectable)()],_);let E=class extends P{mouseOut(e,t){return[this.startMouseOutTimer()]}mouseOver(e,t){return this.stopMouseOutTimer(),this.stopMouseOverTimer(),[]}};t.PopupHoverMouseListener=E,t.PopupHoverMouseListener=E=o([(0,s.injectable)()],E);class w extends g.KeyListener{keyDown(e,t){return(0,d.matchesKeystroke)(t,"Escape")?[a.SetPopupModelAction.create({type:f.EMPTY_ROOT.type,id:f.EMPTY_ROOT.id})]:[]}}t.HoverKeyListener=w;let O=class{constructor(){this.popupOpen=!1}handle(e){if(e.kind===S.KIND)this.popupOpen=e.newRoot.type!==f.EMPTY_ROOT.type;else if(this.popupOpen)return a.SetPopupModelAction.create({id:f.EMPTY_ROOT.id,type:f.EMPTY_ROOT.type})}};t.ClosePopupActionHandler=O,t.ClosePopupActionHandler=O=o([(0,s.injectable)()],O)},2493:(e,t)=>{"use strict";function n(e){return e.hasFeature(t.nameFeature)}Object.defineProperty(t,"__esModule",{value:!0}),t.name=t.isNameable=t.nameFeature=void 0,t.nameFeature=Symbol("nameableFeature"),t.isNameable=n,t.name=function(e){return n(e)?e.name:void 0}},2565:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeRouting=t.EdgeRouterRegistry=void 0;const s=n(2650),a=n(166),c=n(2041),d=n(740),l=n(5559),u=n(5778),h=n(8675);let p=class extends l.InstanceRegistry{constructor(e){super(),e.forEach((e=>this.register(e.kind,e)))}get defaultKind(){return h.PolylineEdgeRouter.KIND}get(e){return super.get(e||this.defaultKind)}routeAllChildren(e){const t=this.doRouteAllChildren(e);for(const n of this.postProcessors)n.apply(t,e);return t}doRouteAllChildren(e){const t=new f,n=new Map,o=[e];for(;o.length>0;){const e=o.shift();for(const t of e.children){if(t instanceof u.SRoutableElementImpl){const e=t.routerKind||this.defaultKind;n.has(e)?n.get(e).push(t):n.set(e,[t])}t instanceof a.SParentElementImpl&&o.push(t)}}return n.forEach(((n,o)=>{const i=this.get(o);if(void 0!==i.routeAll)t.setAll(i.routeAll(n,e));else for(const e of n)t.set(e.id,this.route(e))})),t}route(e,t){const n=(0,d.findArgValue)(t,"edgeRouting");if(n){const t=n.get(e.id);if(t)return t}return this.get(e.routerKind).route(e)}};t.EdgeRouterRegistry=p,o([(0,s.multiInject)(c.TYPES.IEdgeRoutePostprocessor),(0,s.optional)(),i("design:type",Array)],p.prototype,"postProcessors",void 0),t.EdgeRouterRegistry=p=o([(0,s.injectable)(),r(0,(0,s.multiInject)(c.TYPES.IEdgeRouter)),i("design:paramtypes",[Array])],p);class f{constructor(){this.routesMap=new Map}set(e,t){this.routesMap.set(e,t)}setAll(e){e.routes.forEach(((e,t)=>this.set(t,e)))}get(e){return this.routesMap.get(e)}get routes(){return this.routesMap}}t.EdgeRouting=f},2576:(e,t)=>{"use strict";function n(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=n,t.isPromiseOrContainsPromise=function(e){return!!n(e)||Array.isArray(e)&&e.some(n)}},2608:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SModelIndex=t.findElement=t.getSubType=t.getBasicType=t.applyBounds=t.cloneModel=void 0,t.cloneModel=function(e){return JSON.parse(JSON.stringify(e))},t.applyBounds=function(e,t){const o=new n;o.add(e);for(const e of t.bounds){const t=o.getById(e.elementId);if(t){const n=t;e.newPosition&&(n.position={x:e.newPosition.x,y:e.newPosition.y}),e.newSize&&(n.size={width:e.newSize.width,height:e.newSize.height})}}if(t.alignments)for(const e of t.alignments){const t=o.getById(e.elementId);t&&(t.alignment={x:e.newAlignment.x,y:e.newAlignment.y})}},t.getBasicType=function(e){if(!e.type)return"";const t=e.type.indexOf(":");return t>=0?e.type.substring(0,t):e.type},t.getSubType=function(e){if(!e.type)return"";const t=e.type.indexOf(":");return t>=0?e.type.substring(t+1):e.type},t.findElement=function e(t,n){if(t.id===n)return t;if(t.children)for(const o of t.children){const t=e(o,n);if(void 0!==t)return t}};class n{constructor(){this.id2element=new Map,this.id2parent=new Map}add(e){if(!e.id)throw new Error("Model element has no ID.");if(this.contains(e))throw new Error("Duplicate ID in model: "+e.id);if(this.id2element.set(e.id,e),Array.isArray(e.children))for(const t of e.children)this.add(t),this.id2parent.set(t.id,e);return this}remove(e){if(this.id2element.delete(e.id),Array.isArray(e.children))for(const t of e.children)this.id2parent.delete(t.id),this.remove(t);return this}contains(e){return this.id2element.has(e.id)}getById(e){return this.id2element.get(e)}getParent(e){return this.id2parent.get(e)}getRoot(e){let t=e;for(;t;){const e=this.id2parent.get(t.id);if(void 0===e)return t;t=e}throw new Error("Element has no root")}}t.SModelIndex=n},2638:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AnchorComputerRegistry=t.RECTANGULAR_ANCHOR_KIND=t.ELLIPTIC_ANCHOR_KIND=t.DIAMOND_ANCHOR_KIND=void 0;const s=n(2650),a=n(2041),c=n(5559);t.DIAMOND_ANCHOR_KIND="diamond",t.ELLIPTIC_ANCHOR_KIND="elliptic",t.RECTANGULAR_ANCHOR_KIND="rectangular";let d=class extends c.InstanceRegistry{constructor(e){super(),e.forEach((e=>this.register(e.kind,e)))}get defaultAnchorKind(){return t.RECTANGULAR_ANCHOR_KIND}get(e,t){return super.get(`${e}:${t||this.defaultAnchorKind}`)}};t.AnchorComputerRegistry=d,t.AnchorComputerRegistry=d=o([(0,s.injectable)(),r(0,(0,s.multiInject)(a.TYPES.IAnchorComputer)),i("design:paramtypes",[Array])],d)},2650:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=t.getServiceIdentifierAsString=t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=t.decorate=t.id=t.MetadataReader=t.preDestroy=t.postConstruct=t.targetName=t.multiInject=t.unmanaged=t.optional=t.inject=t.named=t.tagged=t.injectable=t.createTaggedDecorator=t.ContainerModule=t.AsyncContainerModule=t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=t.Container=t.METADATA_KEY=t.LazyServiceIdentifer=t.LazyServiceIdentifier=void 0,n(8630);const a=n(5265),c=s(n(9466));var d=n(5265);Object.defineProperty(t,"LazyServiceIdentifier",{enumerable:!0,get:function(){return d.LazyServiceIdentifier}}),t.LazyServiceIdentifer=a.LazyServiceIdentifier,t.METADATA_KEY=c;var l=n(1697);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return l.Container}});var u=n(9117);Object.defineProperty(t,"BindingScopeEnum",{enumerable:!0,get:function(){return u.BindingScopeEnum}}),Object.defineProperty(t,"BindingTypeEnum",{enumerable:!0,get:function(){return u.BindingTypeEnum}}),Object.defineProperty(t,"TargetTypeEnum",{enumerable:!0,get:function(){return u.TargetTypeEnum}});var h=n(548);Object.defineProperty(t,"AsyncContainerModule",{enumerable:!0,get:function(){return h.AsyncContainerModule}}),Object.defineProperty(t,"ContainerModule",{enumerable:!0,get:function(){return h.ContainerModule}});var p=n(3353);Object.defineProperty(t,"createTaggedDecorator",{enumerable:!0,get:function(){return p.createTaggedDecorator}});var f=n(8633);Object.defineProperty(t,"injectable",{enumerable:!0,get:function(){return f.injectable}});var g=n(3108);Object.defineProperty(t,"tagged",{enumerable:!0,get:function(){return g.tagged}});var m=n(3719);Object.defineProperty(t,"named",{enumerable:!0,get:function(){return m.named}});var y=n(4269);Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return y.inject}});var v=n(6004);Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return v.optional}});var b=n(8986);Object.defineProperty(t,"unmanaged",{enumerable:!0,get:function(){return b.unmanaged}});var S=n(4035);Object.defineProperty(t,"multiInject",{enumerable:!0,get:function(){return S.multiInject}});var P=n(6331);Object.defineProperty(t,"targetName",{enumerable:!0,get:function(){return P.targetName}});var _=n(8480);Object.defineProperty(t,"postConstruct",{enumerable:!0,get:function(){return _.postConstruct}});var E=n(6294);Object.defineProperty(t,"preDestroy",{enumerable:!0,get:function(){return E.preDestroy}});var w=n(263);Object.defineProperty(t,"MetadataReader",{enumerable:!0,get:function(){return w.MetadataReader}});var O=n(7763);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return O.id}});var I=n(3353);Object.defineProperty(t,"decorate",{enumerable:!0,get:function(){return I.decorate}});var M=n(6727);Object.defineProperty(t,"traverseAncerstors",{enumerable:!0,get:function(){return M.traverseAncerstors}}),Object.defineProperty(t,"taggedConstraint",{enumerable:!0,get:function(){return M.taggedConstraint}}),Object.defineProperty(t,"namedConstraint",{enumerable:!0,get:function(){return M.namedConstraint}}),Object.defineProperty(t,"typeConstraint",{enumerable:!0,get:function(){return M.typeConstraint}});var A=n(6272);Object.defineProperty(t,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return A.getServiceIdentifierAsString}});var R=n(8835);Object.defineProperty(t,"multiBindToService",{enumerable:!0,get:function(){return R.multiBindToService}})},2671:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateReflectMetadata=function(e,t,n,i){const r=i((0,o.getReflectMetadata)(e,t)??n);Reflect.defineMetadata(t,r,e)};const o=n(3654)},2672:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.tryAndThrowErrorIfStackOverflow=void 0,t.isStackOverflowException=c;const a=s(n(5007));function c(e){return e instanceof RangeError||e.message===a.STACK_OVERFLOW}t.tryAndThrowErrorIfStackOverflow=(e,t)=>{try{return e()}catch(e){if(c(e))throw t();throw e}}},2705:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.onAction=t.configureActionHandler=t.ActionHandlerRegistry=void 0;const s=n(2650),a=n(2041),c=n(5559),d=n(4615);let l=class extends c.MultiInstanceRegistry{constructor(e,t){super(),e.forEach((e=>this.register(e.actionKind,e.factory()))),t.forEach((e=>this.initializeActionHandler(e)))}initializeActionHandler(e){e.initialize(this)}};t.ActionHandlerRegistry=l,t.ActionHandlerRegistry=l=o([(0,s.injectable)(),r(0,(0,s.multiInject)(a.TYPES.ActionHandlerRegistration)),r(0,(0,s.optional)()),r(1,(0,s.multiInject)(a.TYPES.IActionHandlerInitializer)),r(1,(0,s.optional)()),i("design:paramtypes",[Array,Array])],l),t.configureActionHandler=function(e,t,n){if("function"==typeof n){if(!(0,d.isInjectable)(n))throw new Error(`Action handlers should be @injectable: ${n.name}`);e.isBound(n)||e.bind(n).toSelf()}e.bind(a.TYPES.ActionHandlerRegistration).toDynamicValue((e=>({actionKind:t,factory:()=>e.container.get(n)})))},t.onAction=function(e,t,n){e.bind(a.TYPES.ActionHandlerRegistration).toConstantValue({actionKind:t,factory:()=>({handle:n})})}},2719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataConstructorArguments=function(e){const t=(0,o.getReflectMetadata)(e,i.DESIGN_PARAM_TYPES),n=(0,o.getReflectMetadata)(e,i.TAGGED),c=[];if(void 0!==n)for(const[t,o]of Object.entries(n)){const n=parseInt(t);c[n]=(0,a.getConstructorArgumentMetadataFromLegacyMetadata)(e,n,o)}if(void 0!==t)for(let e=0;e<t.length;++e)if(void 0===c[e]){const n=t[e];c[e]=(0,s.getClassElementMetadataFromNewable)(n)}return(0,r.assertConstructorMetadataArrayFilled)(e,c),c};const o=n(9517),i=n(3313),r=n(8650),s=n(2727),a=n(2818)},2727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassElementMetadataFromNewable=function(e){return{kind:o.ClassElementMetadataKind.singleInjection,name:void 0,optional:!1,tags:new Map,targetName:void 0,value:e}};const o=n(6277)},2760:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;const o=n(7161),i=n(7059),r=n(732);t.BindingInWhenOnSyntax=class{_bindingInSyntax;_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new o.BindingInSyntax(e)}inRequestScope(){return this._bindingInSyntax.inRequestScope()}inSingletonScope(){return this._bindingInSyntax.inSingletonScope()}inTransientScope(){return this._bindingInSyntax.inTransientScope()}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}},2761:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.PopupPositionUpdater=void 0;const r=n(2650),s=n(2041);let a=class{decorate(e,t){return e}postUpdate(){const e=document.getElementById(this.options.popupDiv);if(null!==e&&"undefined"!=typeof window){const t=e.getBoundingClientRect();window.innerHeight<t.height+t.top&&(e.style.top=window.pageYOffset+window.innerHeight-t.height-5+"px"),window.innerWidth<t.left+t.width&&(e.style.left=window.pageXOffset+window.innerWidth-t.width-5+"px"),t.left<0&&(e.style.left="0px"),t.top<0&&(e.style.top="0px")}}};t.PopupPositionUpdater=a,o([(0,r.inject)(s.TYPES.ViewerOptions),i("design:type",Object)],a.prototype,"options",void 0),t.PopupPositionUpdater=a=o([(0,r.injectable)()],a)},2814:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SetUIExtensionVisibilityCommand=t.SetUIExtensionVisibilityAction=t.UIExtensionRegistry=void 0;const s=n(2650),a=n(5559),c=n(3194),d=n(2041);let l=class extends a.InstanceRegistry{constructor(e=[]){super(),e.forEach((e=>this.register(e.id(),e)))}};var u;t.UIExtensionRegistry=l,t.UIExtensionRegistry=l=o([(0,s.injectable)(),r(0,(0,s.multiInject)(d.TYPES.IUIExtension)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],l),function(e){e.KIND="setUIExtensionVisibility",e.create=function(t){var n;return{kind:e.KIND,extensionId:t.extensionId,visible:t.visible,contextElementsId:null!==(n=t.contextElementsId)&&void 0!==n?n:[]}}}(u||(t.SetUIExtensionVisibilityAction=u={}));let h=class extends c.SystemCommand{constructor(e){super(),this.action=e}execute(e){const t=this.registry.get(this.action.extensionId);return t&&(this.action.visible?t.show(e.root,...this.action.contextElementsId):t.hide()),{model:e.root,modelChanged:!1}}undo(e){return{model:e.root,modelChanged:!1}}redo(e){return{model:e.root,modelChanged:!1}}};t.SetUIExtensionVisibilityCommand=h,h.KIND=u.KIND,o([(0,s.inject)(d.TYPES.UIExtensionRegistry),i("design:type",l)],h.prototype,"registry",void 0),t.SetUIExtensionVisibilityCommand=h=o([(0,s.injectable)(),r(0,(0,s.inject)(d.TYPES.Action)),i("design:paramtypes",[Object])],h)},2818:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConstructorArgumentMetadataFromLegacyMetadata=function(e,t,n){try{return(0,r.getClassElementMetadataFromLegacyMetadata)(n)}catch(n){throw o.InversifyCoreError.isErrorOfKind(n,i.InversifyCoreErrorKind.missingInjectionDecorator)?new o.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at constructor arguments at index "${t.toString()}"`,{cause:n}):n}};const o=n(1773),i=n(4931),r=n(4063)},2848:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.HBoxLayouter=void 0;const i=n(2650),r=n(5017),s=n(7445),a=n(5855);let c=class extends s.AbstractLayout{getChildrenSize(e,t,n){let o=0,i=-1,s=!0;return e.children.forEach((e=>{if((0,a.isLayoutableChild)(e)){const a=n.getBoundsData(e).bounds;void 0!==a&&r.Dimension.isValid(a)&&(s?s=!1:o+=t.hGap,o+=a.width,i=Math.max(i,a.height))}})),{width:o,height:i}}layoutChild(e,t,n,o,i,r,s,a){const c=this.getDy(o.vAlign,n,a);return t.bounds={x:r.x+e.bounds.x-n.x,y:i.paddingTop+e.bounds.y-n.y+c,width:n.width,height:n.height},t.boundsChanged=!0,{x:r.x+n.width+i.hGap,y:r.y}}getDefaultLayoutOptions(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hGap:1,vAlign:"center",minWidth:0,minHeight:0}}spread(e,t){return Object.assign(Object.assign({},e),t)}};t.HBoxLayouter=c,c.KIND="hbox",t.HBoxLayouter=c=o([(0,i.injectable)()],c)},2859:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateElementCommand=void 0;const s=n(2650),a=n(7020),c=n(3194),d=n(166),l=n(2041);let u=class extends c.Command{constructor(e){super(),this.action=e}execute(e){const t=e.root.index.getById(this.action.containerId);return t instanceof d.SParentElementImpl&&(this.container=t,this.newElement=e.modelFactory.createElement(this.action.elementSchema),this.container.add(this.newElement)),e.root}undo(e){return this.container.remove(this.newElement),e.root}redo(e){return this.container.add(this.newElement),e.root}};t.CreateElementCommand=u,u.KIND=a.CreateElementAction.KIND,t.CreateElementCommand=u=o([(0,s.injectable)(),r(0,(0,s.inject)(l.TYPES.Action)),i("design:paramtypes",[Object])],u)},2872:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchEditModeCommand=t.SwitchEditModeAction=void 0;const s=n(2650),a=n(3194),c=n(166),d=n(2041),l=n(5778),u=n(2565),h=n(4246);var p;!function(e){e.KIND="switchEditMode",e.create=function(t){var n,o;return{kind:e.KIND,elementsToActivate:null!==(n=t.elementsToActivate)&&void 0!==n?n:[],elementsToDeactivate:null!==(o=t.elementsToDeactivate)&&void 0!==o?o:[]}}}(p||(t.SwitchEditModeAction=p={}));let f=class extends a.Command{constructor(e){super(),this.action=e,this.elementsToActivate=[],this.elementsToDeactivate=[],this.handlesToRemove=[]}execute(e){const t=e.root.index;return this.action.elementsToActivate.forEach((e=>{const n=t.getById(e);void 0!==n&&this.elementsToActivate.push(n)})),this.action.elementsToDeactivate.forEach((e=>{const n=t.getById(e);if(void 0!==n&&this.elementsToDeactivate.push(n),n instanceof l.SRoutingHandleImpl&&n.parent instanceof l.SRoutableElementImpl){const e=n.parent;this.shouldRemoveHandle(n,e)&&(this.handlesToRemove.push({handle:n,parent:e}),this.elementsToDeactivate.push(e),this.elementsToActivate.push(e))}})),this.doExecute(e)}doExecute(e){return this.handlesToRemove.forEach((e=>{e.point=e.parent.routingPoints.splice(e.handle.pointIndex,1)[0]})),this.elementsToDeactivate.forEach((e=>{e instanceof l.SRoutableElementImpl?e.removeAll((e=>e instanceof l.SRoutingHandleImpl)):e instanceof l.SRoutingHandleImpl&&(e.editMode=!1,e.danglingAnchor&&e.parent instanceof l.SRoutableElementImpl&&e.danglingAnchor.original&&(e.parent.source===e.danglingAnchor?e.parent.sourceId=e.danglingAnchor.original.id:e.parent.target===e.danglingAnchor&&(e.parent.targetId=e.danglingAnchor.original.id),e.danglingAnchor.parent.remove(e.danglingAnchor),e.danglingAnchor=void 0))})),this.elementsToActivate.forEach((e=>{(0,h.canEditRouting)(e)&&e instanceof c.SParentElementImpl?this.edgeRouterRegistry.get(e.routerKind).createRoutingHandles(e):e instanceof l.SRoutingHandleImpl&&(e.editMode=!0)})),e.root}shouldRemoveHandle(e,t){return"junction"===e.kind&&void 0===this.edgeRouterRegistry.route(t).find((t=>t.pointIndex===e.pointIndex))}undo(e){return this.handlesToRemove.forEach((e=>{void 0!==e.point&&e.parent.routingPoints.splice(e.handle.pointIndex,0,e.point)})),this.elementsToActivate.forEach((e=>{e instanceof l.SRoutableElementImpl?e.removeAll((e=>e instanceof l.SRoutingHandleImpl)):e instanceof l.SRoutingHandleImpl&&(e.editMode=!1)})),this.elementsToDeactivate.forEach((e=>{(0,h.canEditRouting)(e)?this.edgeRouterRegistry.get(e.routerKind).createRoutingHandles(e):e instanceof l.SRoutingHandleImpl&&(e.editMode=!0)})),e.root}redo(e){return this.doExecute(e)}};t.SwitchEditModeCommand=f,f.KIND=p.KIND,o([(0,s.inject)(u.EdgeRouterRegistry),i("design:type",u.EdgeRouterRegistry)],f.prototype,"edgeRouterRegistry",void 0),t.SwitchEditModeCommand=f=o([(0,s.injectable)(),r(0,(0,s.inject)(d.TYPES.Action)),i("design:paramtypes",[Object])],f)},2912:function(e,t,n){"use strict";var o,i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddRemoveBezierSegmentCommand=t.AddRemoveBezierSegmentAction=t.BezierMouseListener=t.BezierEdgeRouter=void 0;const a=n(2650),c=n(5017),d=n(5778),l=n(2565),u=n(1011),h=n(5677),p=n(3194),f=n(2041);let g=o=class extends u.AbstractEdgeRouter{get kind(){return o.KIND}route(e){if(!e.source||!e.target)return[];const t=e.routingPoints.length,n=e.source,o=e.target,i=[];if(i.push({kind:"source",x:0,y:0}),0===t){const[t,r]=this.createDefaultBezierHandles(n.position,o.position);i.push({kind:"bezier-control-after",x:t.x,y:t.y,pointIndex:0}),i.push({kind:"bezier-control-before",x:r.x,y:r.y,pointIndex:1}),e.routingPoints.push(t),e.routingPoints.push(r)}else if(t>=2)for(let n=0;n<t;n++){const t=e.routingPoints[n];n%3==0&&i.push({kind:"bezier-control-after",x:t.x,y:t.y,pointIndex:n}),(n+1)%3==0?i.push({kind:"bezier-junction",x:t.x,y:t.y,pointIndex:n}):(n+2)%3==0&&i.push({kind:"bezier-control-before",x:t.x,y:t.y,pointIndex:n})}i.push({kind:"target",x:0,y:0});const r=t>2?e.routingPoints[2]:o.position,s=t>2?e.routingPoints[e.routingPoints.length-3]:n.position,a=this.getTranslatedAnchor(n,r,o.parent,e,e.sourceAnchorCorrection),c=this.getTranslatedAnchor(o,s,n.parent,e,e.targetAnchorCorrection);return i[0]={kind:"source",x:a.x,y:a.y},i[i.length-1]={kind:"target",x:c.x,y:c.y},i}createDefaultBezierHandles(e,t){return[{x:e.x-o.DEFAULT_BEZIER_HANDLE_OFFSET,y:e.y},{x:t.x+o.DEFAULT_BEZIER_HANDLE_OFFSET,y:t.y}]}createRoutingHandles(e){this.route(e),this.rebuildHandles(e)}rebuildHandles(e){this.addHandle(e,"source","routing-point",-2),this.addHandle(e,"bezier-control-after","bezier-routing-point",0),this.addHandle(e,"bezier-add","bezier-create-routing-point",0);const t=e.routingPoints.length;if(t>2)for(let n=1;n<t-1;n+=3)this.addHandle(e,"bezier-control-before","bezier-routing-point",n),this.addHandle(e,"bezier-add","bezier-create-routing-point",n+1),this.addHandle(e,"bezier-junction","routing-point",n+1),this.addHandle(e,"bezier-remove","bezier-remove-routing-point",n+1),this.addHandle(e,"bezier-control-after","bezier-routing-point",n+2),this.moveBezierControlPair(e.routingPoints[n],n,e);this.addHandle(e,"bezier-control-before","bezier-routing-point",t-1),this.addHandle(e,"target","routing-point",-1)}getInnerHandlePosition(e,t,n){if("bezier-control-before"===n.kind||"bezier-junction"===n.kind||"bezier-control-after"===n.kind)for(let e=0;e<t.length;e++){const o=t[e];if(o.pointIndex===n.pointIndex&&o.kind===n.kind)return o}else{if("bezier-add"===n.kind){const o=this.findBezierControl(e,t,n.pointIndex);return{x:o.x,y:o.y+12.5}}if("bezier-remove"===n.kind){const o=this.findBezierControl(e,t,n.pointIndex);return{x:o.x,y:o.y-12.5}}}}findBezierControl(e,t,n){let o={x:t[0].x,y:t[0].y};if(n>0)for(const e of t)if(void 0!==e.pointIndex&&e.pointIndex===n&&"bezier-junction"===e.kind){o={x:e.x,y:e.y};break}return o}applyHandleMoves(e,t){t.forEach((t=>{const n=t.handle;let o,i,r,s={x:0,y:0};const a=t.toPosition;switch(n.kind){case"bezier-control-before":case"bezier-control-after":this.moveBezierControlPair(a,t.handle.pointIndex,e);break;case"bezier-junction":const c=n.pointIndex;c>=0&&c<e.routingPoints.length&&(r=c-1,s=e.routingPoints[c],o=e.routingPoints[r],i=this.calcRelativeMove(s,a,o),e.routingPoints[c]=a,this.moveBezierControlPair(i,r,e));break;case"source":if(r=0,o=e.routingPoints[r],e.source instanceof d.SDanglingAnchorImpl)n.danglingAnchor&&(s=n.danglingAnchor.position,n.danglingAnchor.position=a);else{const o=new d.SDanglingAnchorImpl;o.id=e.id+"_dangling-source",o.original=e.source,o.position=t.toPosition,n.root.add(o),n.danglingAnchor=o,e.sourceId=o.id,e.source&&(s=e.source.position)}i=this.calcRelativeMove(s,a,o),this.moveBezierControlPair(i,r,e);break;case"target":if(r=e.routingPoints.length-1,o=e.routingPoints[r],e.target instanceof d.SDanglingAnchorImpl)n.danglingAnchor&&(s=n.danglingAnchor.position,n.danglingAnchor.position=a);else{const t=new d.SDanglingAnchorImpl;t.id=e.id+"_dangling-target",t.original=e.target,t.position=a,n.root.add(t),n.danglingAnchor=t,e.targetId=t.id,e.target&&(s=e.target.position)}i=this.calcRelativeMove(s,a,o),this.moveBezierControlPair(i,r,e)}}))}applyInnerHandleMoves(e,t){}getOptions(e){return{minimalPointDistance:2,standardDistance:.1,selfEdgeOffset:20}}calcRelativeMove(e,t,n){return{x:n.x-(e.x-t.x),y:n.y-(e.y-t.y)}}createNewBezierSegment(e,t){const n=t.routingPoints;let o,i,r;2===n.length?(i=n[e<0?0:e],r=n[n.length-1],o=(0,c.centerOfLine)(i,r)):(i=n[e],r=n[e+2],o=(0,c.centerOfLine)(i,r));const[s,a]=this.createDefaultBezierHandles(o,o);n.splice(e+1,0,s),n.splice(e+2,0,o),n.splice(e+3,0,a),this.moveBezierControlPair(s,e+1,t),t.removeAll((e=>e instanceof d.SRoutingHandleImpl)),this.rebuildHandles(t)}removeBezierSegment(e,t){t.routingPoints.splice(e-1,3),t.removeAll((e=>e instanceof d.SRoutingHandleImpl)),this.rebuildHandles(t)}moveBezierControlPair(e,t,n){t>=0&&t<n.routingPoints.length&&(t-1<0||t+1===n.routingPoints.length?n.routingPoints[t]=e:t%3==0?this.setBezierMirror(n,e,t,!1):(t+2)%3==0&&this.setBezierMirror(n,e,t,!0))}setBezierMirror(e,t,n,o){e.routingPoints[n]=t;const i=e.routingPoints[o?n+1:n-1];e.routingPoints[o?n+2:n-2]={x:i.x-(t.x-i.x),y:i.y-(t.y-i.y)}}};t.BezierEdgeRouter=g,g.KIND="bezier",g.DEFAULT_BEZIER_HANDLE_OFFSET=25,t.BezierEdgeRouter=g=o=i([(0,a.injectable)()],g);class m extends h.MouseListener{mouseDown(e,t){const n=[];return e instanceof d.SRoutingHandleImpl&&("bezier-add"===e.kind||"bezier-remove"===e.kind)&&("bezier-create-routing-point"===e.type?n.push(y.create("add",e.id)):"bezier-remove-routing-point"===e.type&&n.push(y.create("remove",e.id))),n}}var y;t.BezierMouseListener=m,function(e){e.KIND="addRemoveBezierSegment",e.create=function(t,n){return{kind:e.KIND,actionTask:t,targetId:n}}}(y||(t.AddRemoveBezierSegmentAction=y={}));let v=class extends p.Command{constructor(e,t){super(),this.action=e,this.edgeRouterRegistry=t}execute(e){const t=e.root.index.getById(this.action.targetId);if(this.edgeRouterRegistry&&t instanceof d.SRoutingHandleImpl){const n=this.edgeRouterRegistry.get(t.parent.routerKind);if(n instanceof g){const o=n;for(const n of e.root.children)if(n.id===t.parent.id){"add"===this.action.actionTask?o.createNewBezierSegment(t.pointIndex,n):"remove"===this.action.actionTask&&o.removeBezierSegment(t.pointIndex,n);break}}}return e.root}undo(e){throw new Error("Method not implemented.")}redo(e){throw new Error("Method not implemented.")}};t.AddRemoveBezierSegmentCommand=v,v.KIND=y.KIND,t.AddRemoveBezierSegmentCommand=v=i([(0,a.injectable)(),s(0,(0,a.inject)(f.TYPES.Action)),s(1,(0,a.inject)(l.EdgeRouterRegistry)),r("design:paramtypes",[Object,l.EdgeRouterRegistry])],v)},3027:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BringToFrontCommand=void 0;const s=n(2650),a=n(7020),c=n(2041),d=n(166),l=n(3194),u=n(5778);let h=class extends l.Command{constructor(e){super(),this.action=e,this.selected=[]}execute(e){const t=e.root;return this.action.elementIDs.forEach((e=>{const n=t.index.getById(e);n instanceof u.SRoutableElementImpl&&(n.source&&this.addToSelection(n.source),n.target&&this.addToSelection(n.target)),n instanceof d.SChildElementImpl&&this.addToSelection(n),this.includeConnectedEdges(n)})),this.redo(e)}includeConnectedEdges(e){if(e instanceof u.SConnectableElementImpl&&(e.incomingEdges.forEach((e=>this.addToSelection(e))),e.outgoingEdges.forEach((e=>this.addToSelection(e)))),e instanceof d.SParentElementImpl)for(const t of e.children)this.includeConnectedEdges(t)}addToSelection(e){this.selected.push({element:e,index:e.parent.children.indexOf(e)})}undo(e){for(let e=this.selected.length-1;e>=0;e--){const t=this.selected[e],n=t.element;n.parent.move(n,t.index)}return e.root}redo(e){for(let e=0;e<this.selected.length;e++)this.bringToFront(this.selected[e]);return e.root}bringToFront(e){const t=e.element,n=t.parent.children.length;t.parent.move(t,n-1)}};t.BringToFrontCommand=h,h.KIND=a.BringToFrontAction.KIND,t.BringToFrontCommand=h=o([(0,s.injectable)(),r(0,(0,s.inject)(c.TYPES.Action)),i("design:paramtypes",[Object])],h)},3108:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=function(e,t){return(0,i.createTaggedDecorator)(new o.Metadata(e,t))};const o=n(4045),i=n(3353)},3136:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CssClassPostprocessor=void 0;const i=n(2608),r=n(491),s=n(2650);let a=class{decorate(e,t){if(t.cssClasses)for(const n of t.cssClasses)(0,r.setClass)(e,n,!0);const n=(0,i.getSubType)(t);return n&&n!==t.type&&(0,r.setClass)(e,n,!0),e}postUpdate(){}};t.CssClassPostprocessor=a,t.CssClassPostprocessor=a=o([(0,s.injectable)()],a)},3152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeAnimation=void 0;const o=n(6320);class i extends o.Animation{constructor(e,t,n,o=!1){super(n),this.model=e,this.elementResizes=t,this.reverse=o}tween(e){return this.elementResizes.forEach((t=>{const n=t.element,o=this.reverse?{width:(1-e)*t.toDimension.width+e*t.fromDimension.width,height:(1-e)*t.toDimension.height+e*t.fromDimension.height}:{width:(1-e)*t.fromDimension.width+e*t.toDimension.width,height:(1-e)*t.fromDimension.height+e*t.toDimension.height};n.bounds={x:n.bounds.x,y:n.bounds.y,width:o.width,height:o.height}})),this.model}}t.ResizeAnimation=i},3194:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ResetCommand=t.SystemCommand=t.PopupCommand=t.HiddenCommand=t.MergeableCommand=t.Command=t.isStoppableCommand=void 0,n(8630);const i=n(2650),r=n(3807);t.isStoppableCommand=function(e){return e&&(0,r.hasOwnProperty)(e,"stoppableCommandKey")&&"stopExecution"in e&&"function"==typeof e.stopExecution};let s=class{};t.Command=s,t.Command=s=o([(0,i.injectable)()],s);let a=class extends s{merge(e,t){return!1}};t.MergeableCommand=a,t.MergeableCommand=a=o([(0,i.injectable)()],a);let c=class extends s{undo(e){return e.logger.error(this,"Cannot undo a hidden command"),e.root}redo(e){return e.logger.error(this,"Cannot redo a hidden command"),e.root}};t.HiddenCommand=c,t.HiddenCommand=c=o([(0,i.injectable)()],c);let d=class extends s{};t.PopupCommand=d,t.PopupCommand=d=o([(0,i.injectable)()],d);let l=class extends s{};t.SystemCommand=l,t.SystemCommand=l=o([(0,i.injectable)()],l);let u=class extends s{};t.ResetCommand=u,t.ResetCommand=u=o([(0,i.injectable)()],u)},3221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(2228),s=new o.ContainerModule((e=>{e(r.IntersectionFinder).toSelf().inSingletonScope(),e(i.TYPES.IEdgeRoutePostprocessor).toService(r.IntersectionFinder)}));t.default=s},3244:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CenterGridSnapper=void 0;const i=n(2650),r=n(5855);let s=class{get gridX(){return 10}get gridY(){return 10}snap(e,t){return t&&(0,r.isBoundsAware)(t)?{x:Math.round((e.x+.5*t.bounds.width)/this.gridX)*this.gridX-.5*t.bounds.width,y:Math.round((e.y+.5*t.bounds.height)/this.gridY)*this.gridY-.5*t.bounds.height}:{x:Math.round(e.x/this.gridX)*this.gridX,y:Math.round(e.y/this.gridY)*this.gridY}}};t.CenterGridSnapper=s,t.CenterGridSnapper=s=o([(0,i.injectable)()],s)},3289:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.SvgExporter=t.ExportSvgAction=void 0;const r=n(2650),s=n(5017),a=n(4932),c=n(2041),d=n(5855);var l;!function(e){e.KIND="exportSvg",e.create=function(t,n,o){return{kind:e.KIND,svg:t,responseId:n,options:o}}}(l||(t.ExportSvgAction=l={}));let u=class{constructor(){this.postprocessors=[]}export(e,t){var n;if("undefined"!=typeof document){const o=document.getElementById(this.options.hiddenDiv);if(null===o)return void this.log.warn(this,`Element with id ${this.options.hiddenDiv} not found. Nothing to export.`);const i=o.querySelector("svg");if(null===i)return void this.log.warn(this,`No svg element found in ${this.options.hiddenDiv} div. Nothing to export.`);const r=this.createSvg(i,e,null!==(n=null==t?void 0:t.options)&&void 0!==n?n:{},t);this.actionDispatcher.dispatch(l.create(r,t?t.requestId:"",null==t?void 0:t.options))}}createSvg(e,t,n,o){const i=new XMLSerializer,r=i.serializeToString(e),s=document.createElement("iframe");if(document.body.appendChild(s),!s.contentWindow)throw new Error("IFrame has no contentWindow");const a=s.contentWindow.document;a.open(),a.write(r),a.close();const c=a.querySelector("svg");c.removeAttribute("opacity"),(null==n?void 0:n.skipCopyStyles)||this.copyStyles(e,c,["width","height","opacity","inline-size"]),c.setAttribute("version","1.1");const d=this.getBounds(t,a);c.setAttribute("viewBox",`${d.x} ${d.y} ${d.width} ${d.height}`),c.setAttribute("width",`${d.width}`),c.setAttribute("height",`${d.height}`),this.postprocessors.forEach((e=>{e.postUpdate(c,o)}));const l=i.serializeToString(c);return document.body.removeChild(s),l}copyStyles(e,t,n){const o=getComputedStyle(e),i=getComputedStyle(t);let r="";for(let e=0;e<o.length;e++){const t=o[e];if(-1===n.indexOf(t)){const e=o.getPropertyValue(t);i.getPropertyValue(t)!==e&&(r+=t+":"+e+";")}}""!==r&&t.setAttribute("style",r);for(let n=0;n<e.childNodes.length;++n){const o=e.childNodes[n],i=t.childNodes[n];o instanceof Element&&this.copyStyles(o,i,[])}}getBounds(e,t){const n=t.querySelector("svg");if(n)return n.getBBox();const o=[s.Bounds.EMPTY];return e.children.forEach((e=>{(0,d.isBoundsAware)(e)&&o.push(e.bounds)})),o.reduce(((e,t)=>s.Bounds.combine(e,t)))}};t.SvgExporter=u,o([(0,r.inject)(c.TYPES.ViewerOptions),i("design:type",Object)],u.prototype,"options",void 0),o([(0,r.inject)(c.TYPES.IActionDispatcher),i("design:type",a.ActionDispatcher)],u.prototype,"actionDispatcher",void 0),o([(0,r.inject)(c.TYPES.ILogger),i("design:type",Object)],u.prototype,"log",void 0),o([(0,r.multiInject)(c.TYPES.ISvgExportPostprocessor),(0,r.optional)(),i("design:type",Array)],u.prototype,"postprocessors",void 0),t.SvgExporter=u=o([(0,r.injectable)()],u)},3313:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.PRE_DESTROY=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.PRE_DESTROY="pre_destroy",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},3353:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.decorate=function(e,t,n){"number"==typeof n?p([f(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):p([e],t)},t.tagParameter=l,t.tagProperty=u,t.createTaggedDecorator=function(e){return(t,n,o)=>{"number"==typeof o?l(t,n,o,e):u(t,n,e)}};const a=s(n(5007)),c=s(n(9466)),d=n(8833);function l(e,t,n,o){!function(e){if(void 0!==e)throw new Error(a.INVALID_DECORATOR_OPERATION)}(t),h(c.TAGGED,e,n.toString(),o)}function u(e,t,n){if(void 0!==e.prototype)throw new Error(a.INVALID_DECORATOR_OPERATION);h(c.TAGGED_PROP,e.constructor,t,n)}function h(e,t,n,o){const i=function(e){let t=[];if(Array.isArray(e)){t=e;const n=(0,d.getFirstArrayDuplicate)(t.map((e=>e.key)));if(void 0!==n)throw new Error(`${a.DUPLICATED_METADATA} ${n.toString()}`)}else t=[e];return t}(o);let r={};Reflect.hasOwnMetadata(e,t)&&(r=Reflect.getMetadata(e,t));let s=r[n];if(void 0===s)s=[];else for(const e of s)if(i.some((t=>t.key===e.key)))throw new Error(`${a.DUPLICATED_METADATA} ${e.key.toString()}`);s.push(...i),r[n]=s,Reflect.defineMetadata(e,r,t)}function p(e,t){Reflect.decorate(e,t)}function f(e,t){return function(n,o){t(n,o,e)}}},3382:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;const a=s(n(5007)),c=n(256);class d{_map;constructor(){this._map=new Map}getMap(){return this._map}add(e,t){if(this._checkNonNulish(e),null==t)throw new Error(a.NULL_ARGUMENT);const n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])}get(e){this._checkNonNulish(e);const t=this._map.get(e);if(void 0!==t)return t;throw new Error(a.KEY_NOT_FOUND)}remove(e){if(this._checkNonNulish(e),!this._map.delete(e))throw new Error(a.KEY_NOT_FOUND)}removeIntersection(e){this.traverse(((t,n)=>{const o=e.hasKey(t)?e.get(t):void 0;if(void 0!==o){const e=n.filter((e=>!o.some((t=>e===t))));this._setValue(t,e)}}))}removeByCondition(e){const t=[];return this._map.forEach(((n,o)=>{const i=[];for(const o of n)e(o)?t.push(o):i.push(o);this._setValue(o,i)})),t}hasKey(e){return this._checkNonNulish(e),this._map.has(e)}clone(){const e=new d;return this._map.forEach(((t,n)=>{t.forEach((t=>{e.add(n,(0,c.isClonable)(t)?t.clone():t)}))})),e}traverse(e){this._map.forEach(((t,n)=>{e(n,t)}))}_checkNonNulish(e){if(null==e)throw new Error(a.NULL_ARGUMENT)}_setValue(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)}}t.Lookup=d},3425:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3491:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectKeyboardListener=t.GetSelectionCommand=t.SelectMouseListener=t.SelectAllCommand=t.SelectCommand=void 0;const s=n(2650),a=n(7020),c=n(3194),d=n(7070),l=n(166),u=n(54),h=n(2041),p=n(8245),f=n(5677),g=n(491),m=n(9678),y=n(8302),v=n(7305),b=n(9082),S=n(9738),P=n(2872),_=n(5778),E=n(5778),w=n(8024),O=n(9882);let I=class extends c.Command{constructor(e){super(),this.action=e,this.selected=[],this.deselected=[]}execute(e){const t=e.root;return this.action.selectedElementsIDs.forEach((e=>{const n=t.index.getById(e);n instanceof l.SChildElementImpl&&(0,O.isSelectable)(n)&&this.selected.push(n)})),this.action.deselectedElementsIDs.forEach((e=>{const n=t.index.getById(e);n instanceof l.SChildElementImpl&&(0,O.isSelectable)(n)&&this.deselected.push(n)})),this.redo(e)}undo(e){for(const e of this.selected)e.selected=!1;for(const e of this.deselected)e.selected=!0;return e.root}redo(e){for(const e of this.deselected)e.selected=!1;for(const e of this.selected)e.selected=!0;return e.root}};t.SelectCommand=I,I.KIND=a.SelectAction.KIND,t.SelectCommand=I=o([(0,s.injectable)(),r(0,(0,s.inject)(h.TYPES.Action)),i("design:paramtypes",[Object])],I);let M=class extends c.Command{constructor(e){super(),this.action=e,this.previousSelection={}}execute(e){return this.selectAll(e.root,this.action.select),e.root}selectAll(e,t){(0,O.isSelectable)(e)&&(this.previousSelection[e.id]=e.selected,e.selected=t);for(const n of e.children)this.selectAll(n,t)}undo(e){const t=e.root.index;return Object.keys(this.previousSelection).forEach((e=>{const n=t.getById(e);void 0!==n&&(0,O.isSelectable)(n)&&(n.selected=this.previousSelection[e])})),e.root}redo(e){return this.selectAll(e.root,this.action.select),e.root}};t.SelectAllCommand=M,M.KIND=a.SelectAllAction.KIND,t.SelectAllCommand=M=o([(0,s.injectable)(),r(0,(0,s.inject)(h.TYPES.Action)),i("design:paramtypes",[Object])],M);class A extends f.MouseListener{constructor(){super(...arguments),this.wasSelected=!1,this.hasDragged=!1,this.isMouseDown=!1}mouseDown(e,t){if(0!==t.button)return[];this.isMouseDown=!0;const n=this.handleButton(e,t);if(n)return n;const o=(0,u.findParentByFeature)(e,O.isSelectable);if((void 0!==o||e instanceof l.SModelRootImpl)&&(this.hasDragged=!1),void 0!==o){let n=[];if((0,m.isCtrlOrCmd)(t)||(n=this.collectElementsToDeselect(e,o)),!o.selected)return this.wasSelected=!1,this.handleSelectTarget(o,n,t);if((0,m.isCtrlOrCmd)(t))return this.wasSelected=!1,this.handleDeselectTarget(o,t);this.wasSelected=!0}return[]}collectElementsToDeselect(e,t){return(0,y.toArray)(e.root.index.all().filter((e=>(0,O.isSelectable)(e)&&e.selected&&!(t instanceof _.SRoutingHandleImpl&&e===t.parent))))}handleButton(e,t){if(void 0!==this.buttonHandlerRegistry&&e instanceof S.SButtonImpl&&e.enabled){const t=this.buttonHandlerRegistry.get(e.type);if(void 0!==t)return t.buttonPressed(e)}}handleSelectTarget(e,t,n){const o=[];o.push(a.SelectAction.create({selectedElementsIDs:[e.id],deselectedElementsIDs:t.map((e=>e.id))})),o.push(a.BringToFrontAction.create([e.id]));const i=t.filter((e=>e instanceof E.SRoutableElementImpl)).map((e=>e.id));return e instanceof E.SRoutableElementImpl?o.push(P.SwitchEditModeAction.create({elementsToActivate:[e.id],elementsToDeactivate:i})):i.length>0&&o.push(P.SwitchEditModeAction.create({elementsToDeactivate:i})),o}handleDeselectTarget(e,t){const n=[];return n.push(a.SelectAction.create({selectedElementsIDs:[],deselectedElementsIDs:[e.id]})),e instanceof E.SRoutableElementImpl&&n.push(P.SwitchEditModeAction.create({elementsToDeactivate:[e.id]})),n}handleDeselectAll(e,t){const n=[];n.push(a.SelectAction.create({selectedElementsIDs:[],deselectedElementsIDs:e.map((e=>e.id))}));const o=e.filter((e=>e instanceof E.SRoutableElementImpl)).map((e=>e.id));return o.length>0&&n.push(P.SwitchEditModeAction.create({elementsToDeactivate:o})),n}mouseMove(e,t){return this.hasDragged=this.isMouseDown,[]}mouseUp(e,t){if(0===t.button&&!this.hasDragged){const n=(0,u.findParentByFeature)(e,O.isSelectable);if(void 0!==n){if(this.wasSelected)return[a.SelectAction.create({selectedElementsIDs:[n.id],deselectedElementsIDs:[]})]}else if(e instanceof l.SModelRootImpl&&!(0,w.findViewportScrollbar)(t)||!(e instanceof l.SModelRootImpl))return this.handleDeselectAll(this.collectElementsToDeselect(e,void 0),t)}return this.isMouseDown=!1,this.hasDragged=!1,[]}decorate(e,t){const n=(0,u.findParentByFeature)(t,O.isSelectable);return void 0!==n&&(0,g.setClass)(e,"selected",n.selected),e}}t.SelectMouseListener=A,o([(0,s.inject)(b.ButtonHandlerRegistry),(0,s.optional)(),i("design:type",b.ButtonHandlerRegistry)],A.prototype,"buttonHandlerRegistry",void 0);let R=class extends d.ModelRequestCommand{constructor(e){super(),this.action=e,this.previousSelection={}}retrieveResult(e){const t=e.root.index.all().filter((e=>(0,O.isSelectable)(e)&&e.selected)).map((e=>e.id));return a.SelectionResult.create((0,y.toArray)(t),this.action.requestId)}};t.GetSelectionCommand=R,R.KIND=a.GetSelectionAction.KIND,t.GetSelectionCommand=R=o([(0,s.injectable)(),r(0,(0,s.inject)(h.TYPES.Action)),i("design:paramtypes",[Object])],R);class x extends p.KeyListener{keyDown(e,t){return(0,v.matchesKeystroke)(t,"KeyA","ctrlCmd")?[a.SelectAllAction.create()]:[]}}t.SelectKeyboardListener=x},3498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertyMetadataFromLegacyMetadata=function(e,t,n){try{return(0,r.getClassElementMetadataFromLegacyMetadata)(n)}catch(n){throw o.InversifyCoreError.isErrorOfKind(n,i.InversifyCoreErrorKind.missingInjectionDecorator)?new o.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at property "${t.toString()}"`,{cause:n}):n}};const o=n(1773),i=n(4931),r=n(4063)},3610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labelEditUiModule=t.labelEditModule=t.edgeEditModule=void 0;const o=n(2650),i=n(2041),r=n(1094),s=n(2705),a=n(740),c=n(5778),d=n(1213),l=n(408),u=n(1864),h=n(5227),p=n(2872),f=n(9486);t.edgeEditModule=new o.ContainerModule(((e,t,n)=>{const o={bind:e,isBound:n};(0,r.configureCommand)(o,p.SwitchEditModeCommand),(0,r.configureCommand)(o,f.ReconnectCommand),(0,r.configureCommand)(o,l.DeleteElementCommand),(0,a.configureModelElement)(o,"dangling-anchor",c.SDanglingAnchorImpl,d.EmptyGroupView)})),t.labelEditModule=new o.ContainerModule(((e,t,n)=>{e(u.EditLabelMouseListener).toSelf().inSingletonScope(),e(i.TYPES.MouseListener).toService(u.EditLabelMouseListener),e(u.EditLabelKeyListener).toSelf().inSingletonScope(),e(i.TYPES.KeyListener).toService(u.EditLabelKeyListener),(0,r.configureCommand)({bind:e,isBound:n},u.ApplyLabelEditCommand)})),t.labelEditUiModule=new o.ContainerModule(((e,t,n)=>{const o={bind:e,isBound:n};(0,s.configureActionHandler)(o,u.EditLabelAction.KIND,h.EditLabelActionHandler),e(h.EditLabelUI).toSelf().inSingletonScope(),e(i.TYPES.IUIExtension).toService(h.EditLabelUI)}))},3635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMatches=t.ModelMatcher=t.forEachMatch=void 0;const o=n(166),i=n(3807);t.forEachMatch=function(e,t){Object.keys(e).forEach((n=>t(n,e[n])))},t.ModelMatcher=class{match(e,t){const n={};return this.matchLeft(e,n),this.matchRight(t,n),n}matchLeft(e,t,n){let i=t[e.id];if(void 0!==i?(i.left=e,i.leftParentId=n):(i={left:e,leftParentId:n},t[e.id]=i),(0,o.isParent)(e))for(const n of e.children)this.matchLeft(n,t,e.id)}matchRight(e,t,n){let i=t[e.id];if(void 0!==i?(i.right=e,i.rightParentId=n):(i={right:e,rightParentId:n},t[e.id]=i),(0,o.isParent)(e))for(const n of e.children)this.matchRight(n,t,e.id)}},t.applyMatches=function(e,t,n){e instanceof o.SModelRootImpl?n=e.index:void 0===n&&(n=new i.SModelIndex).add(e);for(const e of t){let t=!1;if(void 0!==e.left&&void 0!==e.leftParentId){const o=n.getById(e.leftParentId);if(void 0!==o&&void 0!==o.children){const i=o.children.indexOf(e.left);i>=0&&(void 0!==e.right&&e.leftParentId===e.rightParentId?(o.children.splice(i,1,e.right),t=!0):o.children.splice(i,1)),n.remove(e.left)}}if(!t&&void 0!==e.right&&void 0!==e.rightParentId){const t=n.getById(e.rightParentId);void 0!==t&&(void 0===t.children&&(t.children=[]),t.children.push(e.right))}}}},3648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;const o=n(9117),i=n(7763);class r{id;moduleId;activated;serviceIdentifier;implementationType;cache;dynamicValue;scope;type;factory;provider;constraint;onActivation;onDeactivation;constructor(e,t){this.id=(0,i.id)(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=o.BindingTypeEnum.Invalid,this.constraint=e=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}clone(){const e=new r(this.serviceIdentifier,this.scope);return e.activated=e.scope===o.BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e}}t.Binding=r},3654:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReflectMetadata=function(e,t){return Reflect.getMetadata(t,e)}},3660:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overrideCommandStackOptions=t.configureCommandStackOptions=t.defaultCommandStackOptions=void 0;const o=n(7154),i=n(2041);t.defaultCommandStackOptions=()=>({defaultDuration:250,undoHistoryLimit:50}),t.configureCommandStackOptions=function(e,n){const o=Object.assign(Object.assign({},(0,t.defaultCommandStackOptions)()),n);e.isBound(i.TYPES.CommandStackOptions)?e.rebind(i.TYPES.CommandStackOptions).toConstantValue(o):e.bind(i.TYPES.CommandStackOptions).toConstantValue(o)},t.overrideCommandStackOptions=function(e,t){const n=e.get(i.TYPES.CommandStackOptions);return(0,o.safeAssign)(n,t),n}},3686:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DOMHelper=void 0;const r=n(2650),s=n(2041);let a=class{getPrefix(){return void 0!==this.viewerOptions&&void 0!==this.viewerOptions.baseDiv?this.viewerOptions.baseDiv+"_":""}createUniqueDOMElementId(e){return this.getPrefix()+e.id}findSModelIdByDOMElement(e){return e.id.replace(this.getPrefix(),"")}};t.DOMHelper=a,o([(0,r.inject)(s.TYPES.ViewerOptions),i("design:type",Object)],a.prototype,"viewerOptions",void 0),t.DOMHelper=a=o([(0,r.injectable)()],a)},3697:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UndoRedoKeyListener=void 0;const o=n(7020),i=n(7305),r=n(8245),s=n(9678);class a extends r.KeyListener{keyDown(e,t){return(0,i.matchesKeystroke)(t,"KeyZ","ctrlCmd")?[o.UndoAction.create()]:(0,i.matchesKeystroke)(t,"KeyZ","ctrlCmd","shift")||!(0,s.isMac)()&&(0,i.matchesKeystroke)(t,"KeyY","ctrlCmd")?[o.RedoAction.create()]:[]}}t.UndoRedoKeyListener=a},3706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_EDGE_PLACEMENT=t.EdgePlacement=t.checkEdgePlacement=t.isEdgeLayoutable=t.edgeLayoutFeature=void 0;const o=n(166),i=n(5855),r=n(5778);t.edgeLayoutFeature=Symbol("edgeLayout"),t.isEdgeLayoutable=function(e){return e instanceof o.SChildElementImpl&&e.parent instanceof r.SRoutableElementImpl&&(0,i.isBoundsAware)(e)&&e.hasFeature(t.edgeLayoutFeature)},t.checkEdgePlacement=function(e){return"edgePlacement"in e},t.EdgePlacement=class extends Object{},t.DEFAULT_EDGE_PLACEMENT={rotate:!0,side:"top",position:.5,offset:7}},3719:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.named=function(e){return(0,d.createTaggedDecorator)(new c.Metadata(a.NAMED_TAG,e))};const a=s(n(9466)),c=n(4045),d=n(3353)},3743:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toAnchor=void 0,t.toAnchor=function(e){return e instanceof HTMLElement?{x:e.offsetLeft,y:e.offsetTop}:e}},3803:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3807:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7812),t),i(n(7020),t),i(n(4276),t),i(n(9123),t),i(n(6746),t),i(n(5097),t),i(n(5017),t),i(n(3803),t),i(n(2608),t),i(n(7154),t)},3934:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=b,t.plan=function(e,t,n,o,i,r=!1){const s=new f.Context(t),c=function(e,t,n){const o=P(t,n),i=(0,a.getClassElementMetadataFromLegacyMetadata)(o);if(i.kind===a.ClassElementMetadataKind.unmanaged)throw new Error("Unexpected metadata when creating target");return new a.LegacyTargetImpl("",i,e)}(n,o,i);try{return _(e,r,o,s,null,c),s}catch(e){throw(0,h.isStackOverflowException)(e)&&(0,p.circularDependencyToException)(s.plan.rootRequest),e}},t.createMockRequest=function(e,t,n){const o=P(t,n),i=(0,a.getClassElementMetadataFromLegacyMetadata)(o);if(i.kind===a.ClassElementMetadataKind.unmanaged)throw new Error("Unexpected metadata when creating target");const r=new a.LegacyTargetImpl("",i,"Variable"),s=new f.Context(e);return new v.Request(t,s,null,[],r)};const a=n(9687),c=n(6736),d=s(n(5007)),l=n(9117),u=s(n(9466)),h=n(2672),p=n(6272),f=n(8721),g=n(4045),m=n(1799),y=n(1823),v=n(1479);function b(e){return e._bindingDictionary}function S(e,t,n,o,i){let r=E(n.container,i.serviceIdentifier),s=[];return r.length===c.BindingCount.NoBindingsAvailable&&!0===n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),r=E(n.container,i.serviceIdentifier)),s=t?r:r.filter((e=>{const t=new v.Request(e.serviceIdentifier,n,o,e,i);return e.constraint(t)})),function(e,t,n,o,i){switch(t.length){case c.BindingCount.NoBindingsAvailable:if(o.isOptional())return t;{const t=(0,p.getServiceIdentifierAsString)(e);let r=d.NOT_REGISTERED;throw r+=(0,p.listMetadataForTarget)(t,o),r+=(0,p.listRegisteredBindingsForServiceIdentifier)(i,t,E),null!==n&&(r+=`\n${d.TRYING_TO_RESOLVE_BINDINGS((0,p.getServiceIdentifierAsString)(n.serviceIdentifier))}`),new Error(r)}case c.BindingCount.OnlyOneBindingAvailable:return t;case c.BindingCount.MultipleBindingsAvailable:default:if(o.isArray())return t;{const t=(0,p.getServiceIdentifierAsString)(e);let n=`${d.AMBIGUOUS_MATCH} ${t}`;throw n+=(0,p.listRegisteredBindingsForServiceIdentifier)(i,t,E),new Error(n)}}}(i.serviceIdentifier,s,o,i,n.container),s}function P(e,t){const n=t.isMultiInject?u.MULTI_INJECT_TAG:u.INJECT_TAG,o=[new g.Metadata(n,e)];return void 0!==t.customTag&&o.push(new g.Metadata(t.customTag.key,t.customTag.value)),!0===t.isOptional&&o.push(new g.Metadata(u.OPTIONAL_TAG,!0)),o}function _(e,t,n,o,i,r){let s,a;if(null===i){s=S(e,t,o,null,r),a=new v.Request(n,o,null,s,r);const i=new m.Plan(o,a);o.addPlan(i)}else s=S(e,t,o,i,r),a=i.addChildRequest(r.serviceIdentifier,s,r);s.forEach((t=>{let n=null;if(r.isArray())n=a.addChildRequest(t.serviceIdentifier,t,r);else{if(null!==t.cache)return;n=a}if(t.type===l.BindingTypeEnum.Instance&&null!==t.implementationType){const i=(0,y.getDependencies)(e,t.implementationType);if(!0!==o.container.options.skipBaseClassChecks){const n=(0,y.getBaseClassDependencyCount)(e,t.implementationType);if(i.length<n){const e=d.ARGUMENTS_LENGTH_MISMATCH((0,y.getFunctionName)(t.implementationType));throw new Error(e)}}i.forEach((t=>{_(e,!1,t.serviceIdentifier,o,n,t)}))}}))}function E(e,t){let n=[];const o=b(e);return o.hasKey(t)?n=o.get(t):null!==e.parent&&(n=E(e.parent,t)),n}},4035:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;const a=s(n(9466)),c=(0,n(8701).injectBase)(a.MULTI_INJECT_TAG);t.multiInject=c},4045:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;const a=s(n(9466));t.Metadata=class{key;value;constructor(e,t){this.key=e,this.value=t}toString(){return this.key===a.NAMED_TAG?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}},4063:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassElementMetadataFromLegacyMetadata=function(e){const t=e.find((e=>e.key===r.INJECT_TAG)),n=e.find((e=>e.key===r.MULTI_INJECT_TAG));if(void 0!==e.find((e=>e.key===r.UNMANAGED_TAG)))return function(e,t){if(void 0!==t||void 0!==e)throw new o.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,"Expected a single @inject, @multiInject or @unmanaged metadata");return{kind:s.ClassElementMetadataKind.unmanaged}}(t,n);if(void 0===n&&void 0===t)throw new o.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,"Expected @inject, @multiInject or @unmanaged metadata");const a=e.find((e=>e.key===r.NAMED_TAG)),c=e.find((e=>e.key===r.OPTIONAL_TAG)),d=e.find((e=>e.key===r.NAME_TAG));return{kind:void 0===t?s.ClassElementMetadataKind.multipleInjection:s.ClassElementMetadataKind.singleInjection,name:a?.value,optional:void 0!==c,tags:new Map(e.filter((e=>r.NON_CUSTOM_TAG_KEYS.every((t=>e.key!==t)))).map((e=>[e.key,e.value]))),targetName:d?.value,value:void 0===t?n?.value:t.value}};const o=n(1773),i=n(4931),r=n(3313),s=n(6277)},4076:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.modelSourceModule=t.zorderModule=t.viewportModule=t.updateModule=t.undoRedoModule=t.selectModule=t.routingModule=t.openModule=t.moveModule=t.hoverModule=t.fadeModule=t.exportModule=t.expandModule=t.edgeLayoutModule=t.edgeJunctionModule=t.edgeIntersectionModule=t.decorationModule=t.contextMenuModule=t.commandPaletteModule=t.buttonModule=t.boundsModule=t.defaultModule=void 0,i(n(1492),t),i(n(4932),t),i(n(2705),t),i(n(6634),t),i(n(5453),t),i(n(6320),t),i(n(2013),t),i(n(3194),t),i(n(1094),t),i(n(3660),t),i(n(9875),t),i(n(7559),t),i(n(9714),t),i(n(5857),t),i(n(54),t),i(n(166),t),i(n(2814),t),i(n(4556),t),i(n(8245),t),i(n(5677),t),i(n(6003),t),i(n(740),t),i(n(6204),t),i(n(2292),t),i(n(8315),t),i(n(1212),t),i(n(491),t),i(n(2041),t);const s=r(n(4949));t.defaultModule=s.default,i(n(6647),t),i(n(4232),t),i(n(5922),t),i(n(5855),t),i(n(5806),t),i(n(2848),t),i(n(5897),t),i(n(4348),t),i(n(9082),t),i(n(9738),t),i(n(5777),t),i(n(7337),t),i(n(3743),t),i(n(5524),t),i(n(2442),t),i(n(8486),t),i(n(4341),t),i(n(3706),t),i(n(2859),t),i(n(5884),t),i(n(3610),t),i(n(408),t),i(n(1864),t),i(n(5227),t),i(n(2872),t),i(n(4246),t),i(n(9486),t),i(n(2131),t),i(n(6570),t),i(n(2413),t),i(n(1711),t),i(n(68),t),i(n(3289),t),i(n(3425),t),i(n(1391),t),i(n(8416),t),i(n(2481),t),i(n(6538),t),i(n(136),t),i(n(723),t),i(n(5163),t),i(n(2228),t),i(n(8590),t),i(n(1702),t),i(n(5162),t),i(n(5027),t),i(n(5873),t),i(n(3244),t),i(n(2493),t),i(n(5239),t),i(n(438),t),i(n(2079),t),i(n(9820),t),i(n(2638),t),i(n(1011),t),i(n(4223),t),i(n(2912),t),i(n(1876),t),i(n(7259),t),i(n(5778),t),i(n(508),t),i(n(8675),t),i(n(2565),t),i(n(5829),t),i(n(9882),t),i(n(3491),t),i(n(3697),t),i(n(3635),t),i(n(353),t),i(n(5902),t),i(n(1644),t),i(n(8024),t),i(n(1892),t),i(n(4883),t),i(n(6282),t),i(n(3027),t);const a=r(n(5695));t.boundsModule=a.default;const c=r(n(5478));t.buttonModule=c.default;const d=r(n(1631));t.commandPaletteModule=d.default;const l=r(n(2379));t.contextMenuModule=l.default;const u=r(n(1752));t.decorationModule=u.default;const h=r(n(3221));t.edgeIntersectionModule=h.default;const p=r(n(7996));t.edgeJunctionModule=p.default;const f=r(n(8486));t.edgeLayoutModule=f.default;const g=r(n(7814));t.expandModule=g.default;const m=r(n(6988));t.exportModule=m.default;const y=r(n(9456));t.fadeModule=y.default;const v=r(n(5670));t.hoverModule=v.default;const b=r(n(8811));t.moveModule=b.default;const S=r(n(6762));t.openModule=S.default;const P=r(n(9710));t.routingModule=P.default;const _=r(n(7174));t.selectModule=_.default;const E=r(n(9817));t.undoRedoModule=E.default;const w=r(n(5075));t.updateModule=w.default;const O=r(n(8788));t.viewportModule=O.default;const I=r(n(5520));t.zorderModule=I.default,i(n(356),t),i(n(4117),t),i(n(8029),t),i(n(8698),t),i(n(9224),t),i(n(417),t),i(n(341),t),i(n(1213),t),i(n(1627),t),i(n(5341),t),i(n(221),t),i(n(5461),t),i(n(7747),t),i(n(5659),t);const M=r(n(6085));t.modelSourceModule=M.default,i(n(9678),t),i(n(1929),t),i(n(4369),t),i(n(7196),t),i(n(4615),t),i(n(4943),t),i(n(5559),t)},4117:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.SBezierControlHandleView=t.SBezierCreateHandleView=t.SCompartmentView=t.SLabelView=t.SRoutingHandleView=t.BezierCurveEdgeView=t.PolylineEdgeViewWithGapsOnIntersections=t.JumpingPolylineEdgeView=t.PolylineEdgeView=t.SGraphView=void 0;const r=n(2650),s=n(5017),a=n(2608),c=n(491),d=n(4348),l=n(2228),u=n(3706),h=n(5778),p=n(2565),f=n(5829),g=n(417),m=n(7196);let y=class{render(e,t){const n=this.edgeRouterRegistry.routeAllChildren(e),o=`scale(${e.zoom}) translate(${-e.scroll.x},${-e.scroll.y})`;return(0,g.svg)("svg",{"class-sprotty-graph":!0},(0,g.svg)("g",{transform:o},t.renderChildren(e,{edgeRouting:n})))}};t.SGraphView=y,o([(0,r.inject)(p.EdgeRouterRegistry),i("design:type",p.EdgeRouterRegistry)],y.prototype,"edgeRouterRegistry",void 0),t.SGraphView=y=o([(0,r.injectable)()],y);let v=class extends f.RoutableView{render(e,t,n){const o=this.edgeRouterRegistry.route(e,n);if(0===o.length)return this.renderDanglingEdge("Cannot compute route",e,t);if(!this.isVisible(e,o,t)){if(0===e.children.length)return;return(0,g.svg)("g",null,t.renderChildren(e,{route:o}))}return(0,g.svg)("g",{"class-sprotty-edge":!0,"class-mouseover":e.hoverFeedback},this.renderLine(e,o,t,n),this.renderAdditionals(e,o,t),this.renderJunctionPoints(e,o,t,n),t.renderChildren(e,{route:o}))}renderJunctionPoints(e,t,n,o){const i=[];for(let e=1;e<t.length;e++)t[e].isJunction&&i.push((0,g.svg)("circle",{cx:t[e].x,cy:t[e].y,r:5}));if(i.length>0)return(0,g.svg)("g",{"class-sprotty-junction":!0},i)}renderLine(e,t,n,o){const i=t[0];let r=`M ${i.x},${i.y}`;for(let e=1;e<t.length;e++){const n=t[e];r+=` L ${n.x},${n.y}`}return(0,g.svg)("path",{d:r})}renderAdditionals(e,t,n){return[]}renderDanglingEdge(e,t,n){return(0,g.svg)("text",{"class-sprotty-edge-dangling":!0,title:e},"?")}};t.PolylineEdgeView=v,o([(0,r.inject)(p.EdgeRouterRegistry),i("design:type",p.EdgeRouterRegistry)],v.prototype,"edgeRouterRegistry",void 0),t.PolylineEdgeView=v=o([(0,r.injectable)()],v);let b=class extends v{constructor(){super(...arguments),this.jumpOffsetBefore=5,this.jumpOffsetAfter=5,this.skipOffsetBefore=3,this.skipOffsetAfter=2}renderLine(e,t,n,o){let i="";for(let n=0;n<t.length;n++){const r=t[n];0===n&&(i=`M ${r.x},${r.y}`),(0,l.isIntersectingRoutedPoint)(r)&&(i+=this.intersectionPath(e,t,r,o)),0!==n&&(i+=` L ${r.x},${r.y}`)}return(0,g.svg)("path",{d:i})}intersectionPath(e,t,n,o){if(n.intersections.length<1)return"";const i=this.getLineSegment(e,n.intersections[0],o,t),r=this.getIntersectionsSortedBySegmentDirection(i,n);let s="";for(const n of r){const i=this.getOtherLineSegment(e,n,o);if(void 0===i)continue;const r=this.getLineSegment(e,n,o,t),a=n.intersectionPoint;this.shouldDrawLineJumpOnIntersection(r,i)?s+=this.createJumpPath(a,r):this.shouldDrawLineGapOnIntersection(r,i)&&(s+=this.createGapPath(a,r))}return s}getIntersectionsSortedBySegmentDirection(e,t){switch(e.direction){case"north":case"north-east":return t.intersections.sort(l.BY_X_THEN_DESCENDING_Y);case"south":case"south-east":case"east":return t.intersections.sort(l.BY_X_THEN_Y);case"south-west":case"west":return t.intersections.sort(l.BY_DESCENDING_X_THEN_Y);case"north-west":return t.intersections.sort(l.BY_DESCENDING_X_THEN_DESCENDING_Y)}}shouldDrawLineJumpOnIntersection(e,t){return Math.abs(e.slopeOrMax)<Math.abs(t.slopeOrMax)}shouldDrawLineGapOnIntersection(e,t){return!this.shouldDrawLineJumpOnIntersection(e,t)}getLineSegment(e,t,n,o){const i=o||this.edgeRouterRegistry.route(e,n),r=t.routable1===e.id?t.segmentIndex1:t.segmentIndex2;return new m.PointToPointLine(i[r],i[r+1])}getOtherLineSegment(e,t,n){const o=t.routable1===e.id?t.routable2:t.routable1,i=e.index.getById(o);if(i instanceof h.SRoutableElementImpl)return this.getLineSegment(i,t,n)}createJumpPath(e,t){const n=s.Point.shiftTowards(e,t.p1,this.jumpOffsetBefore),o=s.Point.shiftTowards(e,t.p2,this.jumpOffsetAfter),i=t.p1.x<t.p2.x?1:0;return` L ${n.x},${n.y} A 1,1 0,0 ${i} ${o.x},${o.y}`}createGapPath(e,t){let n,o;e.y<t.p1.y?(n=-this.skipOffsetBefore,o=this.jumpOffsetAfter+this.skipOffsetAfter):(n=this.jumpOffsetBefore+this.skipOffsetAfter,o=-this.skipOffsetBefore);const i=s.Point.shiftTowards(e,t.p1,n),r=s.Point.shiftTowards(e,t.p2,o);return` L ${i.x},${i.y} M ${r.x},${r.y}`}};t.JumpingPolylineEdgeView=b,t.JumpingPolylineEdgeView=b=o([(0,r.injectable)()],b);let S=class extends b{constructor(){super(...arguments),this.skipOffsetBefore=3,this.skipOffsetAfter=3}shouldDrawLineJumpOnIntersection(e,t){return!1}shouldDrawLineGapOnIntersection(e,t){return Math.abs(e.slopeOrMax)>=Math.abs(t.slopeOrMax)}createGapPath(e,t){const n=s.Point.shiftTowards(e,t.p1,this.skipOffsetBefore),o=s.Point.shiftTowards(e,t.p2,this.skipOffsetAfter);return` L ${n.x},${n.y} M ${o.x},${o.y}`}};t.PolylineEdgeViewWithGapsOnIntersections=S,t.PolylineEdgeViewWithGapsOnIntersections=S=o([(0,r.injectable)()],S);let P=class extends f.RoutableView{render(e,t,n){const o=this.edgeRouterRegistry.route(e,n);if(0===o.length)return this.renderDanglingEdge("Cannot compute route",e,t);if(!this.isVisible(e,o,t)){if(0===e.children.length)return;return(0,g.svg)("g",null,t.renderChildren(e,{route:o}))}return(0,g.svg)("g",{"class-sprotty-edge":!0,"class-mouseover":e.hoverFeedback},this.renderLine(e,o,t,n),this.renderAdditionals(e,o,t),t.renderChildren(e,{route:o}))}renderLine(e,t,n,o){let i="";if(t.length>=4){i+=this.buildMainSegment(t);const e=t.length-4;if(e>0&&e%3==0)for(let e=4;e<t.length;e+=3)i+=this.addSpline(t,e)}return(0,g.svg)("path",{d:i})}buildMainSegment(e){const t=e[0],n=e[1],o=e[2],i=e[3];return`M${t.x},${t.y} C${n.x},${n.y} ${o.x},${o.y} ${i.x},${i.y}`}addSpline(e,t){const n=e[t+1],o=e[t+2];return` S${n.x},${n.y} ${o.x},${o.y}`}renderAdditionals(e,t,n){return[]}renderDanglingEdge(e,t,n){return(0,g.svg)("text",{"class-sprotty-edge-dangling":!0,title:e},"?")}};t.BezierCurveEdgeView=P,o([(0,r.inject)(p.EdgeRouterRegistry),i("design:type",p.EdgeRouterRegistry)],P.prototype,"edgeRouterRegistry",void 0),t.BezierCurveEdgeView=P=o([(0,r.injectable)()],P);let _=class{constructor(){this.minimalPointDistance=10}render(e,t,n){if(n&&n.route&&e.parent instanceof h.SRoutableElementImpl){const t=this.edgeRouterRegistry.get(e.parent.routerKind),o=void 0===n.route?this.edgeRouterRegistry.route(e.parent,n):n.route,i=t.getHandlePosition(e.parent,o,e);if(void 0!==i){const t=(0,g.svg)("circle",{"class-sprotty-routing-handle":!0,"class-selected":e.selected,"class-mouseover":e.hoverFeedback,cx:i.x,cy:i.y,r:this.getRadius()});return(0,c.setAttr)(t,"data-kind",e.kind),t}}return(0,g.svg)("g",null)}getRadius(){return 7}};t.SRoutingHandleView=_,o([(0,r.inject)(p.EdgeRouterRegistry),i("design:type",p.EdgeRouterRegistry)],_.prototype,"edgeRouterRegistry",void 0),t.SRoutingHandleView=_=o([(0,r.injectable)()],_);let E=class extends d.ShapeView{render(e,t){if(!(0,u.isEdgeLayoutable)(e)&&!this.isVisible(e,t))return;const n=(0,g.svg)("text",{"class-sprotty-label":!0},e.text),o=(0,a.getSubType)(e);return o&&(0,c.setAttr)(n,"class",o),n}};t.SLabelView=E,t.SLabelView=E=o([(0,r.injectable)()],E);let w=class{render(e,t,n){const o=`translate(${e.bounds.x}, ${e.bounds.y})`,i=(0,g.svg)("g",{transform:o,"class-sprotty-comp":"{true}"},t.renderChildren(e)),r=(0,a.getSubType)(e);return r&&(0,c.setAttr)(i,"class",r),i}};t.SCompartmentView=w,t.SCompartmentView=w=o([(0,r.injectable)()],w);let O=class extends _{render(e,t,n){if(n){const t=n.route;if(t&&e.parent instanceof h.SRoutableElementImpl){const n=this.edgeRouterRegistry.get(e.parent.routerKind).getHandlePosition(e.parent,t,e);if(void 0!==n){const t="translate("+n.x+", "+n.y+")",o=-5.5,i=5.5,r="bezier-add"===e.kind?"+":"-",s=(0,g.svg)("g",{transform:t,"class-sprotty-routing-handle":!0,"class-selected":e.selected,"class-mouseover":e.hoverFeedback},(0,g.svg)("circle",{r:this.getRadius()}),(0,g.svg)("text",{x:o,y:i,"attrs-text-align":"middle","style-font-family":"monospace","style-pointer-events":"none","style-fill":"white"},r));return(0,c.setAttr)(s,"data-kind",e.kind),s}}}return(0,g.svg)("g",null)}};t.SBezierCreateHandleView=O,t.SBezierCreateHandleView=O=o([(0,r.injectable)()],O);let I=class extends _{render(e,t,n){if(n){const t=n.route;if(t&&e.parent instanceof h.SRoutableElementImpl){const n=this.edgeRouterRegistry.get(e.parent.routerKind).getHandlePosition(e.parent,t,e);if(void 0!==n){let o,i;for(let i=0;i<t.length;i++){const r=t[i];if(r.kind===n.kind&&r.pointIndex===n.pointIndex){o="bezier-control-before"===e.kind?t[i+1]:t[i-1];break}}if(o){const t=`M ${n.x}, ${n.y} L ${o.x}, ${o.y}`;i=(0,g.svg)("g",{"class-sprotty-routing-handle":!0,"class-selected":e.selected,"class-mouseover":e.hoverFeedback},(0,g.svg)("path",{d:t,stroke:"grey","style-stroke-width":"2px"}),(0,g.svg)("circle",{cx:n.x,cy:n.y,r:this.getRadius()}))}else i=(0,g.svg)("circle",{"class-sprotty-routing-handle":!0,"class-selected":e.selected,"class-mouseover":e.hoverFeedback,cx:n.x,cy:n.y,r:this.getRadius()});return(0,c.setAttr)(i,"data-kind",e.kind),i}}}return(0,g.svg)("g",null)}};t.SBezierControlHandleView=I,t.SBezierControlHandleView=I=o([(0,r.injectable)()],I)},4213:function(e,t,n){var o,i;void 0===(i="function"==typeof(o=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){a(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,n,s){var a=r.URL||r.webkitURL,c=document.createElement("a");n=n||e.name||"download",c.download=n,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?i(c):o(c.href)?t(e,n,s):i(c,c.target="_blank")):(c.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,r){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),n);else if(o(e))t(e,n,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){i(s)}))}}:function(e,n,o,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var a="application/octet-stream"===e.type,c=/constructor/i.test(r.HTMLElement)||r.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||a&&c||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(e)}else{var u=r.URL||r.webkitURL,h=u.createObjectURL(e);i?i.location=h:location.href=h,i=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}});r.saveAs=a.saveAs=a,e.exports=a})?o.apply(t,[]):o)||(e.exports=i)},4223:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BezierDiamondAnchor=t.BezierRectangleAnchor=t.BezierEllipseAnchor=void 0;const i=n(2638),r=n(2650),s=n(508),a=n(2912);let c=class extends s.EllipseAnchor{get kind(){return a.BezierEdgeRouter.KIND+":"+i.ELLIPTIC_ANCHOR_KIND}};t.BezierEllipseAnchor=c,t.BezierEllipseAnchor=c=o([(0,r.injectable)()],c);let d=class extends s.RectangleAnchor{get kind(){return a.BezierEdgeRouter.KIND+":"+i.RECTANGULAR_ANCHOR_KIND}};t.BezierRectangleAnchor=d,t.BezierRectangleAnchor=d=o([(0,r.injectable)()],d);let l=class extends s.DiamondAnchor{get kind(){return a.BezierEdgeRouter.KIND+":"+i.DIAMOND_ANCHOR_KIND}};t.BezierDiamondAnchor=l,t.BezierDiamondAnchor=l=o([(0,r.injectable)()],l)},4232:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ATTR_BBOX_ELEMENT=t.HiddenBoundsUpdater=t.BoundsData=void 0;const r=n(2650),s=n(7020),a=n(5017),c=n(9678),d=n(166),l=n(2041),u=n(5922),h=n(5855);t.BoundsData=class{};let p=class{constructor(){this.element2boundsData=new Map}decorate(e,t){return((0,h.isSizeable)(t)||(0,h.isLayoutContainer)(t))&&this.element2boundsData.set(t,{vnode:e,bounds:t.bounds,boundsChanged:!1,alignmentChanged:!1}),t instanceof d.SModelRootImpl&&(this.root=t),e}postUpdate(e){if(void 0===e||e.kind!==s.RequestBoundsAction.KIND)return;const t=e;this.getBoundsFromDOM(),this.layouter.layout(this.element2boundsData);const n=[],o=[];this.element2boundsData.forEach(((e,t)=>{if(e.boundsChanged&&void 0!==e.bounds){const o={elementId:t.id,newSize:{width:e.bounds.width,height:e.bounds.height}};t instanceof d.SChildElementImpl&&(0,h.isLayoutContainer)(t.parent)&&(o.newPosition={x:e.bounds.x,y:e.bounds.y}),n.push(o)}e.alignmentChanged&&void 0!==e.alignment&&o.push({elementId:t.id,newAlignment:e.alignment})}));const i=void 0!==this.root?this.root.revision:void 0;this.actionDispatcher.dispatch(s.ComputedBoundsAction.create(n,{revision:i,alignments:o,requestId:t.requestId})),this.element2boundsData.clear()}getBoundsFromDOM(){this.element2boundsData.forEach(((e,t)=>{if(e.bounds&&(0,h.isSizeable)(t)){const n=e.vnode;if(n&&n.elm){const o=this.getBounds(n.elm,t);!(0,h.isAlignable)(t)||(0,a.almostEquals)(o.x,0)&&(0,a.almostEquals)(o.y,0)||(e.alignment={x:-o.x,y:-o.y},e.alignmentChanged=!0);const i={x:t.bounds.x,y:t.bounds.y,width:o.width,height:o.height};(0,a.almostEquals)(i.x,t.bounds.x)&&(0,a.almostEquals)(i.y,t.bounds.y)&&(0,a.almostEquals)(i.width,t.bounds.width)&&(0,a.almostEquals)(i.height,t.bounds.height)||(e.bounds=i,e.boundsChanged=!0)}}}))}getBounds(e,n){if(!(0,c.isSVGGraphicsElement)(e))return this.logger.error(this,"Not an SVG element:",e),a.Bounds.EMPTY;if("g"===e.tagName)for(const o of Array.from(e.children))if(null!==o.getAttribute(t.ATTR_BBOX_ELEMENT))return this.getBounds(o,n);const o=e.getBBox();return{x:o.x,y:o.y,width:o.width,height:o.height}}};t.HiddenBoundsUpdater=p,o([(0,r.inject)(l.TYPES.ILogger),i("design:type",Object)],p.prototype,"logger",void 0),o([(0,r.inject)(l.TYPES.IActionDispatcher),i("design:type",Object)],p.prototype,"actionDispatcher",void 0),o([(0,r.inject)(l.TYPES.Layouter),i("design:type",u.Layouter)],p.prototype,"layouter",void 0),t.HiddenBoundsUpdater=p=o([(0,r.injectable)()],p),t.ATTR_BBOX_ELEMENT="bboxElement"},4246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWithEditableLabel=t.withEditLabelFeature=t.isEditableLabel=t.editLabelFeature=t.canEditRouting=t.editFeature=void 0;const o=n(5778);t.editFeature=Symbol("editFeature"),t.canEditRouting=function(e){return e instanceof o.SRoutableElementImpl&&e.hasFeature(t.editFeature)},t.editLabelFeature=Symbol("editLabelFeature"),t.isEditableLabel=function(e){return"text"in e&&e.hasFeature(t.editLabelFeature)},t.withEditLabelFeature=Symbol("withEditLabelFeature"),t.isWithEditableLabel=function(e){return"editableLabel"in e&&e.hasFeature(t.withEditLabelFeature)}},4262:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});class o{constructor(e=[],t=i){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,o=t[e];for(;e>0;){const i=e-1>>1,r=t[i];if(n(o,r)>=0)break;t[e]=r,e=i}t[e]=o}_down(e){const{data:t,compare:n}=this,o=this.length>>1,i=t[e];for(;e<o;){let o=1+(e<<1),r=t[o];const s=o+1;if(s<this.length&&n(t[s],r)<0&&(o=s,r=t[s]),n(r,i)>=0)break;t[e]=r,e=o}t[e]=i}}function i(e,t){return e<t?-1:e>t?1:0}},4269:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.inject=void 0;const a=s(n(9466)),c=(0,n(8701).injectBase)(a.INJECT_TAG);t.inject=c},4276:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramServer=void 0;const o=n(7020),i=n(5097),r=n(2608);t.DiagramServer=class{constructor(e,t){this.state={currentRoot:{type:"NONE",id:"ROOT"},revision:0},this.requests=new Map,this.dispatch=e,this.diagramGenerator=t.DiagramGenerator,this.layoutEngine=t.ModelLayoutEngine,this.actionHandlerRegistry=t.ServerActionHandlerRegistry}setModel(e){return e.revision=++this.state.revision,this.state.currentRoot=e,this.submitModel(e,!1)}updateModel(e){return e.revision=++this.state.revision,this.state.currentRoot=e,this.submitModel(e,!0)}get needsClientLayout(){return!this.state.options||void 0===this.state.options.needsClientLayout||!!this.state.options.needsClientLayout}get needsServerLayout(){return!(!this.state.options||void 0===this.state.options.needsServerLayout||!this.state.options.needsServerLayout)}accept(e){if((0,o.isResponseAction)(e)){const t=e.responseId,n=this.requests.get(t);if(n){if(this.requests.delete(t),e.kind===o.RejectAction.KIND){const t=e;n.reject(new Error(t.message)),console.warn(`Request with id ${e.responseId} failed: ${t.message}`,t.detail)}else n.resolve(e);return Promise.resolve()}console.info("No matching request for response:",e)}return this.handleAction(e)}request(e){e.requestId||(e.requestId="server_"+(0,o.generateRequestId)());const t=new i.Deferred;return this.requests.set(e.requestId,t),this.dispatch(e).catch((n=>{this.requests.delete(e.requestId),t.reject(n)})),t.promise}rejectRemoteRequest(e,t){e&&(0,o.isRequestAction)(e)&&this.dispatch({kind:o.RejectAction.KIND,responseId:e.requestId,message:t.message,detail:t.stack})}handleAction(e){var t,n;const i=null===(t=this.actionHandlerRegistry)||void 0===t?void 0:t.getHandler(e.kind);if(i&&1===i.length)return null!==(n=i[0](e,this.state,this))&&void 0!==n?n:Promise.resolve();if(i&&i.length>1)return Promise.all(i.map((t=>{var n;return null!==(n=t(e,this.state,this))&&void 0!==n?n:Promise.resolve()})));switch(e.kind){case o.RequestModelAction.KIND:return this.handleRequestModel(e);case o.ComputedBoundsAction.KIND:return this.handleComputedBounds(e);case o.LayoutAction.KIND:return this.handleLayout(e)}return console.warn(`Unhandled action from client: ${e.kind}`),Promise.resolve()}async handleRequestModel(e){var t;this.state.options=e.options;try{const n=await this.diagramGenerator.generate({options:null!==(t=this.state.options)&&void 0!==t?t:{},state:this.state});n.revision=++this.state.revision,this.state.currentRoot=n,await this.submitModel(this.state.currentRoot,!1,e)}catch(t){this.rejectRemoteRequest(e,t),console.error("Failed to generate diagram:",t)}}async submitModel(e,t,n){if(this.needsClientLayout)if(this.needsServerLayout){const i=o.RequestBoundsAction.create(e),s=await this.request(i),a=this.state.currentRoot;s.revision===a.revision?((0,r.applyBounds)(a,s),await this.doSubmitModel(a,t,n)):this.rejectRemoteRequest(n,new Error(`Model revision does not match: ${s.revision}`))}else this.dispatch({kind:o.RequestBoundsAction.KIND,newRoot:e});else await this.doSubmitModel(e,t,n)}async doSubmitModel(e,t,n){if(e.revision!==this.state.revision)return;this.needsServerLayout&&this.layoutEngine&&(e=await this.layoutEngine.layout(e));const i=e.type;if(n&&n.kind===o.RequestModelAction.KIND){const t=n.requestId,i=o.SetModelAction.create(e,t);await this.dispatch(i)}else t&&i===this.state.lastSubmittedModelType?await this.dispatch({kind:o.UpdateModelAction.KIND,newRoot:e,cause:n}):await this.dispatch({kind:o.SetModelAction.KIND,newRoot:e});this.state.lastSubmittedModelType=i}handleComputedBounds(e){return e.revision!==this.state.currentRoot.revision?Promise.reject():((0,r.applyBounds)(this.state.currentRoot,e),Promise.resolve())}async handleLayout(e){if(this.layoutEngine){if(!this.needsServerLayout){let e=(0,r.cloneModel)(this.state.currentRoot);e=await this.layoutEngine.layout(e),e.revision=++this.state.revision,this.state.currentRoot=e}await this.doSubmitModel(this.state.currentRoot,!0,e)}}}},4287:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.IdPostprocessor=void 0;const r=n(2650),s=n(2041),a=n(3686),c=n(491);let d=class{decorate(e,t){const n=(0,c.getAttrs)(e);return void 0!==n.id&&this.logger.warn(e,"Overriding id of vnode ("+n.id+"). Make sure not to set it manually in view."),n.id=this.domHelper.createUniqueDOMElementId(t),e.key||(e.key=t.id),e}postUpdate(){}};t.IdPostprocessor=d,o([(0,r.inject)(s.TYPES.ILogger),i("design:type",Object)],d.prototype,"logger",void 0),o([(0,r.inject)(s.TYPES.DOMHelper),i("design:type",a.DOMHelper)],d.prototype,"domHelper",void 0),t.IdPostprocessor=d=o([(0,r.injectable)()],d)},4341:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeLayoutPostprocessor=void 0;const r=n(2650),s=n(5017),a=n(166),c=n(491),d=n(356),l=n(5855),u=n(3706),h=n(2565),p=n(2041),f=n(5027);let g=class{decorate(e,t){var n,o,i,r;if((0,u.isEdgeLayoutable)(t)&&t.parent instanceof d.SEdgeImpl&&t.bounds!==s.Bounds.EMPTY){const a=t.bounds,d=(0,u.checkEdgePlacement)(t),l=this.getEdgePlacement(t),h=t.parent,p=Math.min(1,Math.max(0,l.position)),g=this.edgeRouterRegistry.get(h.routerKind),m=g.pointAt(h,p);let y="",v=g.derivativeAt(h,p);if(m)if(d){switch(l.moveMode){case"edge":const e=g.findOrthogonalIntersection(h,s.Point.add(m,a));e&&(v=e.derivative,y+=`translate(${e.point.x}, ${e.point.y})`);break;case"free":y+=`translate(${(null!==(n=null==m?void 0:m.x)&&void 0!==n?n:0)+a.x}, ${(null!==(o=null==m?void 0:m.y)&&void 0!==o?o:0)+a.y})`;break;case"none":y+=`translate(${m.x}, ${m.y})`;break;default:this.logger.error({},"No moveMode set for edge label. Skipping edge placement.")}if(v){const e=(0,s.toDegrees)(Math.atan2(v.y,v.x));if(l.rotate){let n=e;Math.abs(e)>90&&(e<0?n+=180:e>0&&(n-=180)),y+=` rotate(${n})`;const o=this.getRotatedAlignment(t,l,n!==e);y+=` translate(${o.x}, ${o.y})`}else{const n=this.getAlignment(t,l,e);y+=` translate(${n.x}, ${n.y})`}}}else(0,f.isMoveable)(t)?y+=`translate(${(null!==(i=null==m?void 0:m.x)&&void 0!==i?i:0)+a.x}, ${(null!==(r=null==m?void 0:m.y)&&void 0!==r?r:0)+a.y})`:y+=`translate(${m.x}, ${m.y})`;(0,c.setAttr)(e,"transform",y)}return e}getRotatedAlignment(e,t,n){let o=(0,l.isAlignable)(e)?e.alignment.x:0,i=(0,l.isAlignable)(e)?e.alignment.y:0;const r=e.bounds;if("on"===t.side)return{x:o-.5*r.height,y:i-.5*r.height};if(n)switch(t.position<.3333333?o-=r.width+t.offset:t.position<.6666666?o-=.5*r.width:o+=t.offset,t.side){case"left":case"bottom":i-=t.offset+r.height;break;case"right":case"top":i+=t.offset}else switch(t.position<.3333333?o+=t.offset:t.position<.6666666?o-=.5*r.width:o-=r.width+t.offset,t.side){case"right":case"bottom":i+=-t.offset-r.height;break;case"left":case"top":i+=t.offset}return{x:o,y:i}}getEdgePlacement(e){let t=e;const n=[];for(;void 0!==t;){const e=t.edgePlacement;if(void 0!==e&&n.push(e),!(t instanceof a.SChildElementImpl))break;t=t.parent}const o=n.reverse().reduce(((e,t)=>Object.assign(Object.assign({},e),t)),u.DEFAULT_EDGE_PLACEMENT);return o.moveMode||(o.moveMode=(0,f.isMoveable)(e)?"edge":"none"),o}getAlignment(e,t,n){const o=e.bounds,i=(0,l.isAlignable)(e)?e.alignment.x-o.width:0,r=(0,l.isAlignable)(e)?e.alignment.y-o.height:0;if("on"===t.side)return{x:i+.5*o.width,y:r+.5*o.height};const a=this.getQuadrant(n),c={x:t.offset,y:r+.5*o.height},d={x:t.offset,y:r+o.height+t.offset},u={x:-o.width-t.offset,y:r+o.height+t.offset},h={x:-o.width-t.offset,y:r+.5*o.height},p={x:-o.width-t.offset,y:r-t.offset},f={x:t.offset,y:r-t.offset};switch(t.side){case"left":switch(a.orientation){case"west":return s.Point.linear(d,u,a.position);case"north":return s.Point.linear(u,p,a.position);case"east":return s.Point.linear(p,f,a.position);case"south":return s.Point.linear(f,d,a.position)}break;case"right":switch(a.orientation){case"west":return s.Point.linear(p,f,a.position);case"north":return s.Point.linear(f,d,a.position);case"east":return s.Point.linear(d,u,a.position);case"south":return s.Point.linear(u,p,a.position)}break;case"top":switch(a.orientation){case"west":case"east":return s.Point.linear(p,f,a.position);case"north":case"south":return this.linearFlip(f,c,h,p,a.position)}break;case"bottom":switch(a.orientation){case"west":case"east":return s.Point.linear(d,u,a.position);case"north":case"south":return this.linearFlip(u,h,c,d,a.position)}}return{x:0,y:0}}getQuadrant(e){return Math.abs(e)>135?{orientation:"west",position:(e>0?e-135:e+225)/90}:e<-45?{orientation:"north",position:(e+135)/90}:e<45?{orientation:"east",position:(e+45)/90}:{orientation:"south",position:(e-45)/90}}linearFlip(e,t,n,o,i){return i<.5?s.Point.linear(e,t,2*i):s.Point.linear(n,o,2*i-1)}postUpdate(){}};t.EdgeLayoutPostprocessor=g,o([(0,r.inject)(h.EdgeRouterRegistry),i("design:type",h.EdgeRouterRegistry)],g.prototype,"edgeRouterRegistry",void 0),o([(0,r.inject)(p.TYPES.ILogger),i("design:type",Object)],g.prototype,"logger",void 0),t.EdgeLayoutPostprocessor=g=o([(0,r.injectable)()],g)},4348:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeView=void 0;const i=n(2650),r=n(5017),s=n(5855);let a=class{isVisible(e,t){if("hidden"===t.targetKind)return!0;if(!r.Dimension.isValid(e.bounds))return!0;const n=(0,s.getAbsoluteBounds)(e),o=e.root.canvasBounds;return n.x<=o.width&&n.x+n.width>=0&&n.y<=o.height&&n.y+n.height>=0}};t.ShapeView=a,t.ShapeView=a=o([(0,i.injectable)()],a)},4369:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorMap=t.toSVG=t.rgb=void 0,t.rgb=function(e,t,n){return{red:e,green:t,blue:n}},t.toSVG=function(e){return"rgb("+e.red+","+e.green+","+e.blue+")"},t.ColorMap=class{constructor(e){this.stops=e}getColor(e){e=Math.max(0,Math.min(.99999999,e));const t=Math.floor(e*this.stops.length);return this.stops[t]}}},4483:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;const a=s(n(5007)),c=n(9117),d=n(2760),l=n(1402);t.BindingToSyntax=class{_binding;constructor(e){this._binding=e}to(e){return this._binding.type=c.BindingTypeEnum.Instance,this._binding.implementationType=e,new d.BindingInWhenOnSyntax(this._binding)}toSelf(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(a.INVALID_TO_SELF_VALUE);const e=this._binding.serviceIdentifier;return this.to(e)}toConstantValue(e){return this._binding.type=c.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toDynamicValue(e){return this._binding.type=c.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new d.BindingInWhenOnSyntax(this._binding)}toConstructor(e){return this._binding.type=c.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toFactory(e){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toFunction(e){if("function"!=typeof e)throw new Error(a.INVALID_FUNCTION_BINDING);const t=this.toConstantValue(e);return this._binding.type=c.BindingTypeEnum.Function,this._binding.scope=c.BindingScopeEnum.Singleton,t}toAutoFactory(e){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=t=>()=>t.container.get(e),this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toAutoNamedFactory(e){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=t=>n=>t.container.getNamed(e,n),new l.BindingWhenOnSyntax(this._binding)}toProvider(e){return this._binding.type=c.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toService(e){this._binding.type=c.BindingTypeEnum.DynamicValue,Object.defineProperty(this._binding,"cache",{configurable:!0,enumerable:!0,get:()=>null,set(e){}}),this._binding.dynamicValue=t=>{try{return t.container.get(e)}catch(n){return t.container.getAsync(e)}},this._binding.implementationType=null}}},4556:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractUIExtension=t.isUIExtension=void 0;const r=n(2650),s=n(3807),a=n(2041);t.isUIExtension=function(e){return(0,s.hasOwnProperty)(e,"id","function")&&(0,s.hasOwnProperty)(e,"show","function")&&(0,s.hasOwnProperty)(e,"hide","function")};let c=class{show(e,...t){this.activeElement=document.activeElement,(this.containerElement||this.initialize())&&(this.onBeforeShow(this.containerElement,e,...t),this.setContainerVisible(!0))}hide(){this.setContainerVisible(!1),this.restoreFocus(),this.activeElement=null}restoreFocus(){const e=this.activeElement;e&&e.focus()}initialize(){const e=document.getElementById(this.options.baseDiv);return e?(this.containerElement=this.getOrCreateContainer(e.id),this.initializeContents(this.containerElement),e&&e.insertBefore(this.containerElement,e.firstChild),!0):(this.logger.warn(this,`Could not obtain sprotty base container for initializing UI extension ${this.id}`,this),!1)}getOrCreateContainer(e){let t=document.getElementById(this.id());return null===t&&(t=document.createElement("div"),t.id=e+"_"+this.id(),t.classList.add(this.containerClass())),t}setContainerVisible(e){this.containerElement&&(e?(this.containerElement.style.visibility="visible",this.containerElement.style.opacity="1"):(this.containerElement.style.visibility="hidden",this.containerElement.style.opacity="0"))}onBeforeShow(e,t,...n){}};t.AbstractUIExtension=c,o([(0,r.inject)(a.TYPES.ViewerOptions),i("design:type",Object)],c.prototype,"options",void 0),o([(0,r.inject)(a.TYPES.ILogger),i("design:type",Object)],c.prototype,"logger",void 0),t.AbstractUIExtension=c=o([(0,r.injectable)()],c)},4615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInjectable=void 0,t.isInjectable=function(e){return void 0!==Reflect.getMetadata("inversify:paramtypes",e)}},4744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(4076),r=n(1637);t.default=e=>{const t=new o.ContainerModule(((t,n,o,s)=>{t(i.TYPES.ModelSource).to(i.LocalModelSource).inSingletonScope(),s(i.TYPES.ILogger).to(i.ConsoleLogger).inSingletonScope(),s(i.TYPES.LogLevel).toConstantValue(i.LogLevel.log);const a={bind:t,unbind:n,isBound:o,rebind:s};(0,i.configureModelElement)(a,"graph",i.SGraphImpl,i.SGraphView),(0,i.configureModelElement)(a,"task",i.RectangularNode,r.TaskNodeView),(0,i.configureModelElement)(a,"edge",i.SEdgeImpl,i.PolylineEdgeView),(0,i.configureModelElement)(a,"routing-point",i.SRoutingHandleImpl,i.SRoutingHandleView),(0,i.configureModelElement)(a,"volatile-routing-point",i.SRoutingHandleImpl,i.SRoutingHandleView),(0,i.configureViewerOptions)(a,{needsClientLayout:!1,baseDiv:e})})),n=new o.Container;return(0,i.loadDefaultModules)(n),n.load(t),n}},4883:function(e,t,n){"use strict";var o,i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportAnimation=t.GetViewportCommand=t.SetViewportCommand=void 0;const a=n(2650),c=n(7020),d=n(5017),l=n(3194),u=n(6320),h=n(1644),p=n(2041),f=n(7070);let g=o=class extends l.MergeableCommand{constructor(e){super(),this.action=e,this.newViewport=e.newViewport}execute(e){const t=e.root,n=t.index.getById(this.action.elementId);if(n&&(0,h.isViewport)(n)){this.element=n,this.oldViewport={scroll:this.element.scroll,zoom:this.element.zoom};const{zoomLimits:o,horizontalScrollLimits:i,verticalScrollLimits:r}=this.viewerOptions;return this.newViewport=(0,h.limitViewport)(this.newViewport,t.canvasBounds,i,r,o),this.setViewport(n,this.oldViewport,this.newViewport,e)}return e.root}setViewport(e,t,n,o){if(e&&(0,h.isViewport)(e)){if(this.action.animate)return new y(e,t,n,o).start();e.scroll=n.scroll,e.zoom=n.zoom}return o.root}undo(e){return this.setViewport(this.element,this.newViewport,this.oldViewport,e)}redo(e){return this.setViewport(this.element,this.oldViewport,this.newViewport,e)}merge(e,t){return!this.action.animate&&e instanceof o&&this.element===e.element&&(this.newViewport=e.newViewport,!0)}};t.SetViewportCommand=g,g.KIND=c.SetViewportAction.KIND,i([(0,a.inject)(p.TYPES.ViewerOptions),r("design:type",Object)],g.prototype,"viewerOptions",void 0),t.SetViewportCommand=g=o=i([(0,a.injectable)(),s(0,(0,a.inject)(p.TYPES.Action)),r("design:paramtypes",[Object])],g);let m=class extends f.ModelRequestCommand{constructor(e){super(),this.action=e}retrieveResult(e){const t=e.root;let n;return n=(0,h.isViewport)(t)?{scroll:t.scroll,zoom:t.zoom}:{scroll:d.Point.ORIGIN,zoom:1},c.ViewportResult.create(n,t.canvasBounds,this.action.requestId)}};t.GetViewportCommand=m,m.KIND=c.GetViewportAction.KIND,t.GetViewportCommand=m=i([s(0,(0,a.inject)(p.TYPES.Action)),r("design:paramtypes",[Object])],m);class y extends u.Animation{constructor(e,t,n,o){super(o),this.element=e,this.oldViewport=t,this.newViewport=n,this.context=o,this.zoomFactor=Math.log(n.zoom/t.zoom)}tween(e,t){return this.element.scroll={x:(1-e)*this.oldViewport.scroll.x+e*this.newViewport.scroll.x,y:(1-e)*this.oldViewport.scroll.y+e*this.newViewport.scroll.y},this.element.zoom=this.oldViewport.zoom*Math.exp(e*this.zoomFactor),t.root}}t.ViewportAnimation=y},4931:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.InversifyCoreErrorKind=void 0,function(e){e[e.injectionDecoratorConflict=0]="injectionDecoratorConflict",e[e.missingInjectionDecorator=1]="missingInjectionDecorator",e[e.planning=2]="planning",e[e.unknown=3]="unknown"}(n||(t.InversifyCoreErrorKind=n={}))},4932:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionDispatcher=void 0;const r=n(2650),s=n(7020),a=n(5097),c=n(2041),d=n(5857),l=n(5453);(0,s.setRequestContext)("client");let u=class{constructor(){this.postponedActions=[],this.requests=new Map}initialize(){return this.initialized||(this.initialized=this.actionHandlerRegistryProvider().then((e=>{this.actionHandlerRegistry=e,this.handleAction(s.SetModelAction.create(d.EMPTY_ROOT)).catch((()=>{}))}))),this.initialized}dispatch(e){return this.initialize().then((()=>void 0!==this.blockUntil?this.handleBlocked(e,this.blockUntil):this.diagramLocker.isAllowed(e)?this.handleAction(e):void 0))}dispatchAll(e){return Promise.all(e.map((e=>this.dispatch(e))))}request(e){if(!e.requestId)return Promise.reject(new Error("Request without requestId"));const t=new a.Deferred;return this.requests.set(e.requestId,t),this.dispatch(e).catch((()=>{})),t.promise}handleAction(e){if(e.kind===s.UndoAction.KIND)return this.commandStack.undo().then((()=>{}));if(e.kind===s.RedoAction.KIND)return this.commandStack.redo().then((()=>{}));if((0,s.isResponseAction)(e)){const t=this.requests.get(e.responseId);if(void 0!==t){if(this.requests.delete(e.responseId),e.kind===s.RejectAction.KIND){const n=e;t.reject(new Error(n.message)),this.logger.warn(this,`Request with id ${e.responseId} failed.`,n.message,n.detail)}else t.resolve(e);return Promise.resolve()}this.logger.log(this,"No matching request for response",e)}const t=this.actionHandlerRegistry.get(e.kind);if(0===t.length){this.logger.warn(this,"Missing handler for action",e);const t=new Error(`Missing handler for action '${e.kind}'`);if((0,s.isRequestAction)(e)){const n=this.requests.get(e.requestId);void 0!==n&&(this.requests.delete(e.requestId),n.reject(t))}return Promise.reject(t)}this.logger.log(this,"Handle",e);const n=[];for(const o of t){const t=o.handle(e);(0,s.isAction)(t)?n.push(this.dispatch(t)):void 0!==t&&(n.push(this.commandStack.execute(t)),this.blockUntil=t.blockUntil)}return Promise.all(n)}handleBlocked(e,t){if(t(e)){this.blockUntil=void 0;const t=this.handleAction(e),n=this.postponedActions;this.postponedActions=[];for(const e of n)this.dispatch(e.action).then(e.resolve,e.reject);return t}return this.logger.log(this,"Action is postponed due to block condition",e),new Promise(((t,n)=>{this.postponedActions.push({action:e,resolve:t,reject:n})}))}};t.ActionDispatcher=u,o([(0,r.inject)(c.TYPES.ActionHandlerRegistryProvider),i("design:type",Function)],u.prototype,"actionHandlerRegistryProvider",void 0),o([(0,r.inject)(c.TYPES.ICommandStack),i("design:type",Object)],u.prototype,"commandStack",void 0),o([(0,r.inject)(c.TYPES.ILogger),i("design:type",Object)],u.prototype,"logger",void 0),o([(0,r.inject)(c.TYPES.AnimationFrameSyncer),i("design:type",l.AnimationFrameSyncer)],u.prototype,"syncer",void 0),o([(0,r.inject)(c.TYPES.IDiagramLocker),i("design:type",Object)],u.prototype,"diagramLocker",void 0),t.ActionDispatcher=u=o([(0,r.injectable)()],u)},4943:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=t.NullLogger=t.LogLevel=void 0;const r=n(2650),s=n(2041);var a;!function(e){e[e.none=0]="none",e[e.error=1]="error",e[e.warn=2]="warn",e[e.info=3]="info",e[e.log=4]="log"}(a||(t.LogLevel=a={}));let c=class{constructor(){this.logLevel=a.none}error(e,t,...n){}warn(e,t,...n){}info(e,t,...n){}log(e,t,...n){}};t.NullLogger=c,t.NullLogger=c=o([(0,r.injectable)()],c);let d=class{constructor(){this.logLevel=a.log,this.viewOptions={baseDiv:""}}error(e,t,...n){if(this.logLevel>=a.error)try{console.error.apply(e,this.consoleArguments(e,t,n))}catch(e){}}warn(e,t,...n){if(this.logLevel>=a.warn)try{console.warn.apply(e,this.consoleArguments(e,t,n))}catch(e){}}info(e,t,...n){if(this.logLevel>=a.info)try{console.info.apply(e,this.consoleArguments(e,t,n))}catch(e){}}log(e,t,...n){if(this.logLevel>=a.log)try{console.log.apply(e,this.consoleArguments(e,t,n))}catch(e){}}consoleArguments(e,t,n){let o;return o="object"==typeof e?e.constructor.name:e,[(new Date).toLocaleTimeString()+" "+this.viewOptions.baseDiv+" "+o+": "+t,...n]}};t.ConsoleLogger=d,o([(0,r.inject)(s.TYPES.LogLevel),i("design:type",Number)],d.prototype,"logLevel",void 0),o([(0,r.inject)(s.TYPES.ViewerOptions),i("design:type",Object)],d.prototype,"viewOptions",void 0),t.ConsoleLogger=d=o([(0,r.injectable)()],d)},4949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(7559),s=n(4943),a=n(4932),c=n(2705),d=n(9875),l=n(3660),u=n(5857),h=n(5453),p=n(8315),f=n(2292),g=n(5677),m=n(8245),y=n(1212),v=n(740),b=n(6204),S=n(3686),P=n(4287),_=n(1094),E=n(3136),w=n(9714),O=n(2814),I=n(6634),M=new o.ContainerModule(((e,t,n)=>{e(i.TYPES.ILogger).to(s.NullLogger).inSingletonScope(),e(i.TYPES.LogLevel).toConstantValue(s.LogLevel.warn),e(i.TYPES.SModelRegistry).to(u.SModelRegistry).inSingletonScope(),e(c.ActionHandlerRegistry).toSelf().inSingletonScope(),e(i.TYPES.ActionHandlerRegistryProvider).toProvider((e=>()=>new Promise((t=>{t(e.container.get(c.ActionHandlerRegistry))})))),e(i.TYPES.ViewRegistry).to(v.ViewRegistry).inSingletonScope(),e(i.TYPES.IModelFactory).to(u.SModelFactory).inSingletonScope(),e(i.TYPES.IActionDispatcher).to(a.ActionDispatcher).inSingletonScope(),e(i.TYPES.IActionDispatcherProvider).toProvider((e=>()=>new Promise((t=>{t(e.container.get(i.TYPES.IActionDispatcher))})))),e(i.TYPES.IDiagramLocker).to(I.DefaultDiagramLocker).inSingletonScope(),e(_.CommandActionHandlerInitializer).toSelf().inSingletonScope(),e(i.TYPES.IActionHandlerInitializer).toService(_.CommandActionHandlerInitializer),e(i.TYPES.ICommandStack).to(d.CommandStack).inSingletonScope(),e(i.TYPES.ICommandStackProvider).toProvider((e=>()=>new Promise((t=>{t(e.container.get(i.TYPES.ICommandStack))})))),e(i.TYPES.CommandStackOptions).toConstantValue((0,l.defaultCommandStackOptions)()),e(p.ModelViewer).toSelf().inSingletonScope(),e(p.HiddenModelViewer).toSelf().inSingletonScope(),e(p.PopupModelViewer).toSelf().inSingletonScope(),e(i.TYPES.ModelViewer).toDynamicValue((e=>{const t=e.container.createChild();return t.bind(i.TYPES.IViewer).toService(p.ModelViewer),t.bind(b.ViewerCache).toSelf(),t.get(b.ViewerCache)})).inSingletonScope(),e(i.TYPES.PopupModelViewer).toDynamicValue((e=>{const t=e.container.createChild();return t.bind(i.TYPES.IViewer).toService(p.PopupModelViewer),t.bind(b.ViewerCache).toSelf(),t.get(b.ViewerCache)})).inSingletonScope(),e(i.TYPES.HiddenModelViewer).toService(p.HiddenModelViewer),e(i.TYPES.IViewerProvider).toDynamicValue((e=>({get modelViewer(){return e.container.get(i.TYPES.ModelViewer)},get hiddenModelViewer(){return e.container.get(i.TYPES.HiddenModelViewer)},get popupModelViewer(){return e.container.get(i.TYPES.PopupModelViewer)}}))),e(i.TYPES.ViewerOptions).toConstantValue((0,f.defaultViewerOptions)()),e(i.TYPES.PatcherProvider).to(p.PatcherProvider).inSingletonScope(),e(i.TYPES.DOMHelper).to(S.DOMHelper).inSingletonScope(),e(i.TYPES.ModelRendererFactory).toFactory((e=>(t,n,o={})=>{const r=e.container.get(i.TYPES.ViewRegistry);return new p.ModelRenderer(r,t,n,o)})),e(P.IdPostprocessor).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(P.IdPostprocessor),e(i.TYPES.HiddenVNodePostprocessor).toService(P.IdPostprocessor),e(E.CssClassPostprocessor).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(E.CssClassPostprocessor),e(i.TYPES.HiddenVNodePostprocessor).toService(E.CssClassPostprocessor),e(g.MouseTool).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(g.MouseTool),e(m.KeyTool).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(m.KeyTool),e(y.FocusFixPostprocessor).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(y.FocusFixPostprocessor),e(i.TYPES.PopupVNodePostprocessor).toService(P.IdPostprocessor),e(g.PopupMouseTool).toSelf().inSingletonScope(),e(i.TYPES.PopupVNodePostprocessor).toService(g.PopupMouseTool),e(i.TYPES.AnimationFrameSyncer).to(h.AnimationFrameSyncer).inSingletonScope();const o={bind:e,isBound:n};(0,_.configureCommand)(o,r.InitializeCanvasBoundsCommand),e(r.CanvasBoundsInitializer).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(r.CanvasBoundsInitializer),(0,_.configureCommand)(o,w.SetModelCommand),e(i.TYPES.UIExtensionRegistry).to(O.UIExtensionRegistry).inSingletonScope(),(0,_.configureCommand)(o,O.SetUIExtensionVisibilityCommand),e(g.MousePositionTracker).toSelf().inSingletonScope(),e(i.TYPES.MouseListener).toService(g.MousePositionTracker)}));t.default=M},5007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.ON_DEACTIVATION_ERROR=t.PRE_DESTROY_ERROR=t.POST_CONSTRUCT_ERROR=t.ASYNC_UNBIND_REQUIRED=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.MULTIPLE_PRE_DESTROY_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.LAZY_IN_SYNC=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.TRYING_TO_RESOLVE_BINDINGS=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.TRYING_TO_RESOLVE_BINDINGS=e=>`Trying to resolve bindings for "${e}"`,t.UNDEFINED_INJECT_ANNOTATION=e=>`@inject called with undefined this could mean that the class ${e} has a circular dependency problem. You can use a LazyServiceIdentifer to overcome this limitation.`,t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.LAZY_IN_SYNC=e=>`You are attempting to construct ${function(e){return"function"==typeof e?`[function/class ${e.name||"<anonymous>"}]`:"symbol"==typeof e?e.toString():`'${e}'`}(e)} in a synchronous way but it has asynchronous dependencies.`,t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=e=>`The number of constructor arguments in the derived class ${e} must be >= than the number of constructor arguments of its base class.`,t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE='Invalid Container option. Default scope must be a string ("singleton" or "transient").',t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_PRE_DESTROY_METHODS="Cannot apply @preDestroy decorator multiple times in the same class",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.ASYNC_UNBIND_REQUIRED="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)",t.POST_CONSTRUCT_ERROR=(e,t)=>`@postConstruct error in class ${e}: ${t}`,t.PRE_DESTROY_ERROR=(e,t)=>`@preDestroy error in class ${e}: ${t}`,t.ON_DEACTIVATION_ERROR=(e,t)=>`onDeactivation() error in class ${e}: ${t}`,t.CIRCULAR_DEPENDENCY_IN_FACTORY=(e,t)=>`It looks like there is a circular dependency in one of the '${e}' bindings. Please investigate bindings with service identifier '${t}'.`,t.STACK_OVERFLOW="Maximum call stack size exceeded"},5017:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.almostEquals=t.toRadians=t.toDegrees=t.Bounds=t.isBounds=t.Dimension=t.centerOfLine=t.angleBetweenPoints=t.angleOfPoint=t.Point=void 0;const o=n(7154);var i,r,s;!function(e){function t(e,t){return{x:e.x+t.x,y:e.y+t.y}}function n(e,t){return{x:e.x-t.x,y:e.y-t.y}}function o(t){const n=i(t);return 0===n||1===n?e.ORIGIN:{x:t.x/n,y:t.y/n}}function i(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}e.ORIGIN=Object.freeze({x:0,y:0}),e.add=t,e.subtract=n,e.equals=function(e,t){return e.x===t.x&&e.y===t.y},e.shiftTowards=function(e,i,r){const s=o(n(i,e));return t(e,{x:s.x*r,y:s.y*r})},e.normalize=o,e.magnitude=i,e.linear=function(e,t,n){return{x:(1-n)*e.x+n*t.x,y:(1-n)*e.y+n*t.y}},e.euclideanDistance=function(e,t){const n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)},e.manhattanDistance=function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},e.maxDistance=function(e,t){return Math.max(Math.abs(t.x-e.x),Math.abs(t.y-e.y))},e.dotProduct=function(e,t){return e.x*t.x+e.y*t.y}}(i||(t.Point=i={})),t.angleOfPoint=function(e){return Math.atan2(e.y,e.x)},t.angleBetweenPoints=function(e,t){const n=Math.sqrt((e.x*e.x+e.y*e.y)*(t.x*t.x+t.y*t.y));if(isNaN(n)||0===n)return NaN;const o=e.x*t.x+e.y*t.y;return Math.acos(o/n)},t.centerOfLine=function(e,t){const n={x:e.x>t.x?t.x:e.x,y:e.y>t.y?t.y:e.y,width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)};return s.center(n)},function(e){e.EMPTY=Object.freeze({width:-1,height:-1}),e.isValid=function(e){return e.width>=0&&e.height>=0}}(r||(t.Dimension=r={})),t.isBounds=function(e){return(0,o.hasOwnProperty)(e,["x","y","width","height"])},function(e){e.EMPTY=Object.freeze({x:0,y:0,width:-1,height:-1}),e.combine=function(t,n){if(!r.isValid(t))return r.isValid(n)?n:e.EMPTY;if(!r.isValid(n))return t;const o=Math.min(t.x,n.x),i=Math.min(t.y,n.y);return{x:o,y:i,width:Math.max(t.x+(t.width>=0?t.width:0),n.x+(n.width>=0?n.width:0))-o,height:Math.max(t.y+(t.height>=0?t.height:0),n.y+(n.height>=0?n.height:0))-i}},e.translate=function(e,t){return{x:e.x+t.x,y:e.y+t.y,width:e.width,height:e.height}},e.center=function(e){return{x:e.x+(e.width>=0?.5*e.width:0),y:e.y+(e.height>=0?.5*e.height:0)}},e.includes=function(e,t){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}}(s||(t.Bounds=s={})),t.toDegrees=function(e){return 180*e/Math.PI},t.toRadians=function(e){return e*Math.PI/180},t.almostEquals=function(e,t){return Math.abs(e-t)<.001}},5027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMoveable=t.isLocateable=t.moveFeature=void 0;const o=n(7154);function i(e){return(0,o.hasOwnProperty)(e,"position")}t.moveFeature=Symbol("moveFeature"),t.isLocateable=i,t.isMoveable=function(e){return e.hasFeature(t.moveFeature)&&i(e)}},5028:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseType=function(e){const t=Object.getPrototypeOf(e.prototype),n=t?.constructor;return n}},5075:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(1094),r=n(353),s=new o.ContainerModule(((e,t,n)=>{(0,i.configureCommand)({bind:e,isBound:n},r.UpdateModelCommand)}));t.default=s},5097:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0,t.Deferred=class{constructor(){this._state="unresolved",this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),this.promise.then((e=>this._state="resolved"),(e=>this._state="rejected"))}set state(e){"unresolved"===this._state&&(this._state=e)}get state(){return this._state}}},5162:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.JunctionPostProcessor=void 0;const r=n(2650),s=n(3807),a=n(2041),c=n(7747);let d=class{constructor(){this.isFirstRender=!0}decorate(e,t){return e}postUpdate(e){this.currentModel!==this.modelSource.model&&(this.isFirstRender=!0),(null==e?void 0:e.kind)===s.RequestBoundsAction.KIND&&this.isFirstRender&&(document.querySelectorAll(`#${this.viewerOptions.hiddenDiv} > svg > g > g.sprotty-junction`).forEach((e=>e.remove())),document.querySelectorAll(`#${this.viewerOptions.baseDiv} > svg > g > g.sprotty-junction`).forEach((e=>e.remove())));const t=document.querySelector(`#${this.viewerOptions.hiddenDiv} > svg > g`),n=document.querySelector(`#${this.viewerOptions.baseDiv} > svg > g`);if(t){const e=Array.from(document.querySelectorAll(`#${this.viewerOptions.hiddenDiv} > svg > g > g > g.sprotty-junction`));e.forEach((e=>{e.remove()})),t.append(...e)}if(n){const e=Array.from(document.querySelectorAll(`#${this.viewerOptions.baseDiv} > svg > g > g > g.sprotty-junction`));e.forEach((e=>{e.remove()})),n.append(...e)}this.currentModel=this.modelSource.model,this.isFirstRender=!1}};t.JunctionPostProcessor=d,o([(0,r.inject)(a.TYPES.ViewerOptions),i("design:type",Object)],d.prototype,"viewerOptions",void 0),o([(0,r.inject)(a.TYPES.ModelSource),i("design:type",c.ModelSource)],d.prototype,"modelSource",void 0),t.JunctionPostProcessor=d=o([(0,r.injectable)()],d)},5163:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationPlacer=void 0;const r=n(2650),s=n(166),a=n(136),c=n(491),d=n(5855),l=n(5778),u=n(2565),h=n(3807);let p=class{decorate(e,t){if((0,a.isDecoration)(t)){const n=this.getPosition(t),o="translate("+n.x+", "+n.y+")";(0,c.setAttr)(e,"transform",o)}return e}getPosition(e){if(e instanceof s.SChildElementImpl&&e.parent instanceof l.SRoutableElementImpl){const t=this.edgeRouterRegistry.route(e.parent);if(t.length>1){const n=Math.floor(.5*(t.length-1)),o=(0,d.isSizeable)(e)?{x:-.5*e.bounds.width,y:-.5*e.bounds.width}:h.Point.ORIGIN;return{x:.5*(t[n].x+t[n+1].x)+o.x,y:.5*(t[n].y+t[n+1].y)+o.y}}}return(0,d.isSizeable)(e)?{x:-.666*e.bounds.width,y:-.666*e.bounds.height}:h.Point.ORIGIN}postUpdate(){}};t.DecorationPlacer=p,o([(0,r.inject)(u.EdgeRouterRegistry),i("design:type",u.EdgeRouterRegistry)],p.prototype,"edgeRouterRegistry",void 0),t.DecorationPlacer=p=o([(0,r.injectable)()],p)},5227:function(e,t,n){"use strict";var o,i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.EditLabelUI=t.EditLabelActionHandler=void 0;const s=n(2650),a=n(7020),c=n(2041),d=n(4556),l=n(2814),u=n(3686),h=n(1627),p=n(7305),f=n(5855),g=n(6282),m=n(1864),y=n(4246);let v=class{handle(e){if((0,m.isEditLabelAction)(e))return l.SetUIExtensionVisibilityAction.create({extensionId:b.ID,visible:!0,contextElementsId:[e.labelId]})}};t.EditLabelActionHandler=v,t.EditLabelActionHandler=v=i([(0,s.injectable)()],v);let b=o=class extends d.AbstractUIExtension{constructor(){super(...arguments),this.validationTimeout=void 0,this.isActive=!1,this.blockApplyEditOnInvalidInput=!0,this.isCurrentLabelValid=!0}id(){return o.ID}containerClass(){return"label-edit"}get labelId(){return this.label?this.label.id:"unknown"}initializeContents(e){e.style.position="absolute",this.inputElement=document.createElement("input"),this.textAreaElement=document.createElement("textarea"),[this.inputElement,this.textAreaElement].forEach((t=>{t.onkeydown=e=>this.applyLabelEditOnEvent(e,"Enter"),this.configureAndAdd(t,e)}))}configureAndAdd(e,t){e.style.visibility="hidden",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.addEventListener("keydown",(e=>this.hideIfEscapeEvent(e))),e.addEventListener("keyup",(t=>this.validateLabelIfContentChange(t,e.value))),e.addEventListener("blur",(()=>window.setTimeout((()=>this.applyLabelEdit()),200))),t.appendChild(e)}get editControl(){return this.label&&this.label.isMultiLine?this.textAreaElement:this.inputElement}hideIfEscapeEvent(e){(0,p.matchesKeystroke)(e,"Escape")&&this.hide()}applyLabelEditOnEvent(e,t,...n){(0,p.matchesKeystroke)(e,t||"Enter",...n)&&(e.preventDefault(),this.applyLabelEdit())}validateLabelIfContentChange(e,t){void 0!==this.previousLabelContent&&this.previousLabelContent===t||(this.previousLabelContent=t,this.performLabelValidation(e,this.editControl.value))}async applyLabelEdit(){var e;if(this.isActive)if((null===(e=this.label)||void 0===e?void 0:e.text)!==this.editControl.value){if(this.blockApplyEditOnInvalidInput&&"error"===(await this.validateLabel(this.editControl.value)).severity)return void this.editControl.focus();this.actionDispatcherProvider().then((e=>e.dispatchAll([a.ApplyLabelEditAction.create(this.labelId,this.editControl.value),h.CommitModelAction.create()]))).catch((e=>this.logger.error(this,"No action dispatcher available to execute apply label edit action",e))),this.hide()}else this.hide()}performLabelValidation(e,t){this.validationTimeout&&window.clearTimeout(this.validationTimeout),this.validationTimeout=window.setTimeout((()=>this.validateLabel(t)),200)}async validateLabel(e){if(this.labelValidator&&this.label)try{const t=await this.labelValidator.validate(e,this.label);return this.isCurrentLabelValid="error"!==t.severity,this.showValidationResult(t),t}catch(e){this.logger.error(this,"Error validating edited label",e)}return this.isCurrentLabelValid=!0,{severity:"ok",message:void 0}}showValidationResult(e){this.clearValidationResult(),this.validationDecorator&&this.validationDecorator.decorate(this.editControl,e)}clearValidationResult(){this.validationDecorator&&this.validationDecorator.dispose(this.editControl)}show(e,...t){(function(e,t){return 1===S(e,t).length})(t,e)&&!this.isActive&&(super.show(e,...t),this.isActive=!0)}hide(){this.editControl.style.visibility="hidden",super.hide(),this.clearValidationResult(),this.isActive=!1,this.isCurrentLabelValid=!0,this.previousLabelContent=void 0,this.labelElement&&(this.labelElement.style.visibility="visible")}onBeforeShow(e,t,...n){this.label=S(n,t)[0],this.previousLabelContent=this.label.text,this.setPosition(e),this.applyTextContents(),this.applyFontStyling(),this.editControl.style.visibility="visible",this.editControl.focus()}setPosition(e){let t=0,n=0,o=100,i=20;if(this.label){const e=(0,g.getZoom)(this.label),r=(0,f.getAbsoluteClientBounds)(this.label,this.domHelper,this.viewerOptions);t=r.x+(this.label.editControlPositionCorrection?this.label.editControlPositionCorrection.x:0)*e,n=r.y+(this.label.editControlPositionCorrection?this.label.editControlPositionCorrection.y:0)*e,i=(this.label.editControlDimension?this.label.editControlDimension.height:i)*e,o=(this.label.editControlDimension?this.label.editControlDimension.width:o)*e}e.style.left=`${t}px`,e.style.top=`${n}px`,e.style.width=`${o}px`,this.editControl.style.width=`${o}px`,e.style.height=`${i}px`,this.editControl.style.height=`${i}px`}applyTextContents(){this.label&&(this.editControl.value=this.label.text,this.editControl instanceof HTMLTextAreaElement?(this.editControl.selectionStart=0,this.editControl.selectionEnd=0,this.editControl.scrollTop=0,this.editControl.scrollLeft=0):this.editControl.setSelectionRange(0,this.editControl.value.length))}applyFontStyling(){if(this.label&&(this.labelElement=document.getElementById(this.domHelper.createUniqueDOMElementId(this.label)),this.labelElement)){this.labelElement.style.visibility="hidden";const n=window.getComputedStyle(this.labelElement);this.editControl.style.font=n.font,this.editControl.style.fontStyle=n.fontStyle,this.editControl.style.fontFamily=n.fontFamily,this.editControl.style.fontSize=(e=n.fontSize,t=(0,g.getZoom)(this.label),e.replace(/\d+(\.\d+)?/,(e=>String(Number.parseInt(e,10)*t)))),this.editControl.style.fontWeight=n.fontWeight,this.editControl.style.lineHeight=n.lineHeight}var e,t}};function S(e,t){return e.map((e=>t.index.getById(e))).filter(y.isEditableLabel)}t.EditLabelUI=b,b.ID="editLabelUi",i([(0,s.inject)(c.TYPES.IActionDispatcherProvider),r("design:type",Function)],b.prototype,"actionDispatcherProvider",void 0),i([(0,s.inject)(c.TYPES.ViewerOptions),r("design:type",Object)],b.prototype,"viewerOptions",void 0),i([(0,s.inject)(c.TYPES.DOMHelper),r("design:type",u.DOMHelper)],b.prototype,"domHelper",void 0),i([(0,s.inject)(c.TYPES.IEditLabelValidator),(0,s.optional)(),r("design:type",Object)],b.prototype,"labelValidator",void 0),i([(0,s.inject)(c.TYPES.IEditLabelValidationDecorator),(0,s.optional)(),r("design:type",Object)],b.prototype,"validationDecorator",void 0),t.EditLabelUI=b=o=i([(0,s.injectable)()],b)},5239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenMouseListener=void 0;const o=n(7020),i=n(5677),r=n(54),s=n(438);class a extends i.MouseListener{doubleClick(e,t){const n=(0,r.findParentByFeature)(e,s.isOpenable);return void 0!==n?[o.OpenAction.create(n.id)]:[]}}t.OpenMouseListener=a},5265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyServiceIdentifier=t.LazyServiceIdentifier=void 0;const o=n(1446);Object.defineProperty(t,"stringifyServiceIdentifier",{enumerable:!0,get:function(){return o.stringifyServiceIdentifier}});const i=n(2151);Object.defineProperty(t,"LazyServiceIdentifier",{enumerable:!0,get:function(){return i.LazyServiceIdentifier}})},5341:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramServerProxy=t.ServerStatusAction=void 0;const r=n(4213),s=n(2650),a=n(7020),c=n(9714),d=n(2041),l=n(6647),u=n(353),h=n(7747);class p{constructor(){this.kind=p.KIND}}t.ServerStatusAction=p,p.KIND="serverStatus";const f="__receivedFromServer";let g=class extends h.ModelSource{constructor(){super(...arguments),this.currentRoot={type:"NONE",id:"ROOT"}}get model(){return this.currentRoot}initialize(e){super.initialize(e),e.register(a.ComputedBoundsAction.KIND,this),e.register(l.RequestBoundsCommand.KIND,this),e.register(a.RequestPopupModelAction.KIND,this),e.register(a.CollapseExpandAction.KIND,this),e.register(a.CollapseExpandAllAction.KIND,this),e.register(a.OpenAction.KIND,this),e.register(p.KIND,this),this.clientId||(this.clientId=this.viewerOptions.baseDiv)}handle(e){this.handleLocally(e)&&this.forwardToServer(e)}forwardToServer(e){const t={clientId:this.clientId,action:e};this.logger.log(this,"sending",t),this.sendMessage(t)}messageReceived(e){const t="string"==typeof e?JSON.parse(e):e;(0,a.isActionMessage)(t)&&t.action?t.clientId&&t.clientId!==this.clientId||(t.action[f]=!0,this.logger.log(this,"receiving",t),this.actionDispatcher.dispatch(t.action).then((()=>{this.storeNewModel(t.action)}))):this.logger.error(this,"received data is not an action message",t)}handleLocally(e){switch(this.storeNewModel(e),e.kind){case a.ComputedBoundsAction.KIND:return this.handleComputedBounds(e);case a.RequestModelAction.KIND:return this.handleRequestModel(e);case l.RequestBoundsCommand.KIND:return!1;case a.ExportSvgAction.KIND:return this.handleExportSvgAction(e);case p.KIND:return this.handleServerStateAction(e)}return!e[f]}storeNewModel(e){if(e.kind===c.SetModelCommand.KIND||e.kind===u.UpdateModelCommand.KIND||e.kind===l.RequestBoundsCommand.KIND){const t=e.newRoot;t&&(this.currentRoot=t,e.kind!==c.SetModelCommand.KIND&&e.kind!==u.UpdateModelCommand.KIND||(this.lastSubmittedModelType=t.type))}}handleRequestModel(e){const t=Object.assign({needsClientLayout:this.viewerOptions.needsClientLayout,needsServerLayout:this.viewerOptions.needsServerLayout},e.options),n=Object.assign(Object.assign({},e),{options:t});return this.forwardToServer(n),!1}handleComputedBounds(e){if(this.viewerOptions.needsServerLayout)return!0;{const t=this.currentRoot;return this.computedBoundsApplicator.apply(t,e),t.type===this.lastSubmittedModelType?this.actionDispatcher.dispatch(a.UpdateModelAction.create(t)):this.actionDispatcher.dispatch(a.SetModelAction.create(t)),this.lastSubmittedModelType=t.type,!1}}handleExportSvgAction(e){const t=new Blob([e.svg],{type:"text/plain;charset=utf-8"});return(0,r.saveAs)(t,"diagram.svg"),!1}handleServerStateAction(e){return!1}commitModel(e){const t=this.currentRoot;return this.currentRoot=e,t}};t.DiagramServerProxy=g,o([(0,s.inject)(d.TYPES.ILogger),i("design:type",Object)],g.prototype,"logger",void 0),o([(0,s.inject)(h.ComputedBoundsApplicator),i("design:type",h.ComputedBoundsApplicator)],g.prototype,"computedBoundsApplicator",void 0),t.DiagramServerProxy=g=o([(0,s.injectable)()],g)},5453:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameSyncer=void 0;const i=n(2650);let r=class{constructor(){this.tasks=[],this.endTasks=[],this.triggered=!1}isAvailable(){return"function"==typeof requestAnimationFrame}onNextFrame(e){this.tasks.push(e),this.trigger()}onEndOfNextFrame(e){this.endTasks.push(e),this.trigger()}trigger(){this.triggered||(this.triggered=!0,this.isAvailable()?requestAnimationFrame((e=>this.run(e))):setTimeout((e=>this.run(e))))}run(e){const t=this.tasks,n=this.endTasks;this.triggered=!1,this.tasks=[],this.endTasks=[],t.forEach((t=>t.call(void 0,e))),n.forEach((t=>t.call(void 0,e)))}};t.AnimationFrameSyncer=r,t.AnimationFrameSyncer=r=o([(0,i.injectable)()],r)},5461:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardingLogger=void 0;const r=n(2650),s=n(7020),a=n(4943),c=n(2041);let d=class{error(e,t,...n){this.logLevel>=a.LogLevel.error&&this.forward(e,t,a.LogLevel.error,n)}warn(e,t,...n){this.logLevel>=a.LogLevel.warn&&this.forward(e,t,a.LogLevel.warn,n)}info(e,t,...n){this.logLevel>=a.LogLevel.info&&this.forward(e,t,a.LogLevel.info,n)}log(e,t,...n){if(this.logLevel>=a.LogLevel.log)try{const o="object"==typeof e?e.constructor.name:String(e);console.log.apply(e,[o+": "+t,...n])}catch(e){}}forward(e,t,n,o){const i=new Date,r=s.LoggingAction.create({message:t,severity:a.LogLevel[n],time:i.toLocaleTimeString(),caller:"object"==typeof e?e.constructor.name:String(e),params:o.map((e=>JSON.stringify(e)))});this.modelSourceProvider().then((n=>{try{n.handle(r)}catch(n){try{console.log.apply(e,[t,r,n])}catch(e){}}}))}};t.ForwardingLogger=d,o([(0,r.inject)(c.TYPES.ModelSourceProvider),i("design:type",Function)],d.prototype,"modelSourceProvider",void 0),o([(0,r.inject)(c.TYPES.LogLevel),i("design:type",Number)],d.prototype,"logLevel",void 0),t.ForwardingLogger=d=o([(0,r.injectable)()],d)},5478:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(9082),r=new o.ContainerModule((e=>{e(i.ButtonHandlerRegistry).toSelf().inSingletonScope()}));t.default=r},5520:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(1094),r=n(3027),s=new o.ContainerModule(((e,t,n)=>{(0,i.configureCommand)({bind:e,isBound:n},r.BringToFrontCommand)}));t.default=s},5524:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteContextMenuItemProvider=t.ContextMenuProviderRegistry=void 0;const s=n(2650),a=n(2041),c=n(408),d=n(9882),l=n(3807);let u=class{constructor(e=[]){this.menuProviders=e}getItems(e,t){const n=this.menuProviders.map((n=>n.getItems(e,t)));return Promise.all(n).then(this.flattenAndRestructure)}flattenAndRestructure(e){let t=e.reduce(((e,t)=>void 0!==t?e.concat(t):e),[]);const n=t.filter((e=>e.parentId));for(const e of n)if(e.parentId){const n=e.parentId.split(".");let o,i=t;for(const e of n)o=i.find((t=>e===t.id)),o&&o.children&&(i=o.children);o&&(o.children?o.children.push(e):o.children=[e],t=t.filter((t=>t!==e)))}return t}};t.ContextMenuProviderRegistry=u,t.ContextMenuProviderRegistry=u=o([(0,s.injectable)(),r(0,(0,s.multiInject)(a.TYPES.IContextMenuItemProvider)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],u);let h=class{getItems(e,t){const n=Array.from(e.index.all().filter(d.isSelected).filter(c.isDeletable));return Promise.resolve([{id:"delete",label:"Delete",sortString:"d",group:"edit",actions:[l.DeleteElementAction.create(n.map((e=>e.id)))],isEnabled:()=>n.length>0}])}};t.DeleteContextMenuItemProvider=h,t.DeleteContextMenuItemProvider=h=o([(0,s.injectable)()],h)},5528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;class n{bindings;activations;deactivations;middleware;moduleActivationStore;static of(e,t,o,i,r){const s=new n;return s.bindings=e,s.middleware=t,s.deactivations=i,s.activations=o,s.moduleActivationStore=r,s}}t.ContainerSnapshot=n},5559:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiInstanceRegistry=t.InstanceRegistry=t.FactoryRegistry=t.ProviderRegistry=void 0;const i=n(2650);let r=class{constructor(){this.elements=new Map}register(e,t){if(void 0===e)throw new Error("Key is undefined");if(this.hasKey(e))throw new Error("Key is already registered: "+e);this.elements.set(e,t)}deregister(e){if(void 0===e)throw new Error("Key is undefined");this.elements.delete(e)}hasKey(e){return this.elements.has(e)}get(e,t){const n=this.elements.get(e);return n?new n(t):this.missing(e,t)}missing(e,t){throw new Error("Unknown registry key: "+e)}};t.ProviderRegistry=r,t.ProviderRegistry=r=o([(0,i.injectable)()],r);let s=class{constructor(){this.elements=new Map}register(e,t){if(void 0===e)throw new Error("Key is undefined");if(this.hasKey(e))throw new Error(`Key is already registered: ${e}. Use \`overrideModelElement\` instead.`);this.elements.set(e,t)}override(e,t){if(void 0===e)throw new Error("Key is undefined");if(!this.hasKey(e))throw new Error(`Key is not registered: ${e}. Use \`configureModelElement\` instead.`);this.elements.set(e,t)}deregister(e){if(void 0===e)throw new Error("Key is undefined");this.elements.delete(e)}hasKey(e){return this.elements.has(e)}get(e,t){const n=this.elements.get(e);return n?n(t):this.missing(e,t)}missing(e,t){throw new Error("Unknown registry key: "+e)}};t.FactoryRegistry=s,t.FactoryRegistry=s=o([(0,i.injectable)()],s);let a=class{constructor(){this.elements=new Map}register(e,t){if(void 0===e)throw new Error("Key is undefined");if(this.hasKey(e))throw new Error(`Key is already registered: ${e}. Use \`overrideModelElement\` instead.`);this.elements.set(e,t)}override(e,t){if(void 0===e)throw new Error("Key is undefined");if(!this.hasKey(e))throw new Error(`Key is not registered: ${e}. Use \`configureModelElement\` instead.`);this.elements.set(e,t)}deregister(e){if(void 0===e)throw new Error("Key is undefined");this.elements.delete(e)}hasKey(e){return this.elements.has(e)}get(e){return this.elements.get(e)||this.missing(e)}missing(e){throw new Error("Unknown registry key: "+e)}};t.InstanceRegistry=a,t.InstanceRegistry=a=o([(0,i.injectable)()],a);let c=class{constructor(){this.elements=new Map}register(e,t){if(void 0===e)throw new Error("Key is undefined");const n=this.elements.get(e);void 0!==n?n.push(t):this.elements.set(e,[t])}deregisterAll(e){if(void 0===e)throw new Error("Key is undefined");this.elements.delete(e)}get(e){const t=this.elements.get(e);return void 0!==t?t:[]}};t.MultiInstanceRegistry=c,t.MultiInstanceRegistry=c=o([(0,i.injectable)()],c)},5659:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketDiagramServerProxy=void 0;const i=n(2650),r=n(5341);let s=class extends r.DiagramServerProxy{listen(e){e.addEventListener("message",(e=>{this.messageReceived(e.data)})),e.addEventListener("error",(e=>{this.logger.error(this,"error event received",e)})),this.webSocket=e}disconnect(){this.webSocket&&(this.webSocket.close(),this.webSocket=void 0)}sendMessage(e){if(!this.webSocket)throw new Error("WebSocket is not connected");this.webSocket.send(JSON.stringify(e))}};t.WebSocketDiagramServerProxy=s,t.WebSocketDiagramServerProxy=s=o([(0,i.injectable)()],s)},5670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(2481),s=n(2761),a=n(1094),c=n(2705),d=n(5902),l=n(4883),u=n(5873),h=new o.ContainerModule(((e,t,n)=>{e(s.PopupPositionUpdater).toSelf().inSingletonScope(),e(i.TYPES.PopupVNodePostprocessor).toService(s.PopupPositionUpdater),e(r.HoverMouseListener).toSelf().inSingletonScope(),e(i.TYPES.MouseListener).toService(r.HoverMouseListener),e(r.PopupHoverMouseListener).toSelf().inSingletonScope(),e(i.TYPES.PopupMouseListener).toService(r.PopupHoverMouseListener),e(r.HoverKeyListener).toSelf().inSingletonScope(),e(i.TYPES.KeyListener).toService(r.HoverKeyListener),e(i.TYPES.HoverState).toConstantValue({mouseOverTimer:void 0,mouseOutTimer:void 0,popupOpen:!1,previousPopupElement:void 0}),e(r.ClosePopupActionHandler).toSelf().inSingletonScope();const o={bind:e,isBound:n};(0,a.configureCommand)(o,r.HoverFeedbackCommand),(0,a.configureCommand)(o,r.SetPopupModelCommand),(0,c.configureActionHandler)(o,r.SetPopupModelCommand.KIND,r.ClosePopupActionHandler),(0,c.configureActionHandler)(o,d.FitToScreenCommand.KIND,r.ClosePopupActionHandler),(0,c.configureActionHandler)(o,d.CenterCommand.KIND,r.ClosePopupActionHandler),(0,c.configureActionHandler)(o,l.SetViewportCommand.KIND,r.ClosePopupActionHandler),(0,c.configureActionHandler)(o,u.MoveCommand.KIND,r.ClosePopupActionHandler)}));t.default=h},5677:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MousePositionTracker=t.MouseListener=t.PopupMouseTool=t.MouseTool=void 0;const s=n(2650),a=n(7020),c=n(166),d=n(2041),l=n(3686),u=n(491);let h=class{constructor(e=[]){this.mouseListeners=e}register(e){this.mouseListeners.push(e)}deregister(e){const t=this.mouseListeners.indexOf(e);t>=0&&this.mouseListeners.splice(t,1)}getTargetElement(e,t){let n=t.target;const o=e.index;for(;n;){if(n.id){const e=o.getById(this.domHelper.findSModelIdByDOMElement(n));if(void 0!==e)return e}n=n.parentNode}}handleEvent(e,t,n){this.focusOnMouseEvent(e,t);const o=this.getTargetElement(t,n);if(!o)return;const i=this.mouseListeners.map((t=>t[e](o,n))).reduce(((e,t)=>e.concat(t)));if(i.length>0){n.preventDefault();for(const e of i)(0,a.isAction)(e)?this.actionDispatcher.dispatch(e):e.then((e=>{this.actionDispatcher.dispatch(e)}))}}focusOnMouseEvent(e,t){if(document&&"mouseDown"===e){const e=document.getElementById(this.domHelper.createUniqueDOMElementId(t));null!==e&&"function"==typeof e.focus&&e.focus()}}mouseOver(e,t){this.handleEvent("mouseOver",e,t)}mouseOut(e,t){this.handleEvent("mouseOut",e,t)}mouseEnter(e,t){this.handleEvent("mouseEnter",e,t)}mouseLeave(e,t){this.handleEvent("mouseLeave",e,t)}mouseDown(e,t){this.handleEvent("mouseDown",e,t)}mouseMove(e,t){this.handleEvent("mouseMove",e,t)}mouseUp(e,t){this.handleEvent("mouseUp",e,t)}wheel(e,t){this.handleEvent("wheel",e,t)}contextMenu(e,t){t.preventDefault(),this.handleEvent("contextMenu",e,t)}doubleClick(e,t){this.handleEvent("doubleClick",e,t)}decorate(e,t){return t instanceof c.SModelRootImpl&&((0,u.on)(e,"mouseover",this.mouseOver.bind(this,t)),(0,u.on)(e,"mouseout",this.mouseOut.bind(this,t)),(0,u.on)(e,"mouseenter",this.mouseEnter.bind(this,t)),(0,u.on)(e,"mouseleave",this.mouseLeave.bind(this,t)),(0,u.on)(e,"mousedown",this.mouseDown.bind(this,t)),(0,u.on)(e,"mouseup",this.mouseUp.bind(this,t)),(0,u.on)(e,"mousemove",this.mouseMove.bind(this,t)),(0,u.on)(e,"wheel",this.wheel.bind(this,t)),(0,u.on)(e,"contextmenu",this.contextMenu.bind(this,t)),(0,u.on)(e,"dblclick",this.doubleClick.bind(this,t)),(0,u.on)(e,"dragover",(e=>this.handleEvent("dragOver",t,e))),(0,u.on)(e,"drop",(e=>this.handleEvent("drop",t,e)))),this.mouseListeners.reduce(((e,n)=>n.decorate(e,t)),e)}postUpdate(){}};t.MouseTool=h,o([(0,s.inject)(d.TYPES.IActionDispatcher),i("design:type",Object)],h.prototype,"actionDispatcher",void 0),o([(0,s.inject)(d.TYPES.DOMHelper),i("design:type",l.DOMHelper)],h.prototype,"domHelper",void 0),t.MouseTool=h=o([(0,s.injectable)(),r(0,(0,s.multiInject)(d.TYPES.MouseListener)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],h);let p=class extends h{constructor(e=[]){super(e),this.mouseListeners=e}};t.PopupMouseTool=p,t.PopupMouseTool=p=o([(0,s.injectable)(),r(0,(0,s.multiInject)(d.TYPES.PopupMouseListener)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],p);let f=class{mouseOver(e,t){return[]}mouseOut(e,t){return[]}mouseEnter(e,t){return[]}mouseLeave(e,t){return[]}mouseDown(e,t){return[]}mouseMove(e,t){return[]}mouseUp(e,t){return[]}wheel(e,t){return[]}doubleClick(e,t){return[]}contextMenu(e,t){return[]}dragOver(e,t){return[]}drop(e,t){return[]}decorate(e,t){return e}};t.MouseListener=f,t.MouseListener=f=o([(0,s.injectable)()],f);let g=class extends f{mouseMove(e,t){return this.lastPosition=e.root.parentToLocal({x:t.offsetX,y:t.offsetY}),[]}get lastPositionOnDiagram(){return this.lastPosition}};t.MousePositionTracker=g,t.MousePositionTracker=g=o([(0,s.injectable)()],g)},5695:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(6647),s=n(4232),a=n(5922),c=n(1094),d=n(2848),l=n(5806),u=n(5897),h=new o.ContainerModule(((e,t,n)=>{(0,c.configureCommand)({bind:e,isBound:n},r.SetBoundsCommand),(0,c.configureCommand)({bind:e,isBound:n},r.RequestBoundsCommand),e(s.HiddenBoundsUpdater).toSelf().inSingletonScope(),e(i.TYPES.HiddenVNodePostprocessor).toService(s.HiddenBoundsUpdater),e(i.TYPES.Layouter).to(a.Layouter).inSingletonScope(),e(i.TYPES.LayoutRegistry).to(a.LayoutRegistry).inSingletonScope(),(0,a.configureLayout)({bind:e,isBound:n},l.VBoxLayouter.KIND,l.VBoxLayouter),(0,a.configureLayout)({bind:e,isBound:n},d.HBoxLayouter.KIND,d.HBoxLayouter),(0,a.configureLayout)({bind:e,isBound:n},u.StackLayouter.KIND,u.StackLayouter)}));t.default=h},5777:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RevealNamedElementActionProvider=t.CommandPaletteActionProviderRegistry=void 0;const s=n(2650),a=n(7020),c=n(1492),d=n(2041),l=n(8302),u=n(2493);let h=class{constructor(e=[]){this.actionProviders=e}getActions(e,t,n,o){const i=this.actionProviders.map((i=>i.getActions(e,t,n,o)));return Promise.all(i).then((e=>e.reduce(((e,t)=>void 0!==t?e.concat(t):e))))}};t.CommandPaletteActionProviderRegistry=h,t.CommandPaletteActionProviderRegistry=h=o([(0,s.injectable)(),r(0,(0,s.multiInject)(d.TYPES.ICommandPaletteActionProvider)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],h);let p=class{constructor(e){this.logger=e}getActions(e,t,n,o){return void 0!==o&&o%2==0?Promise.resolve(this.createSelectActions(e)):Promise.resolve([new c.LabeledAction("Select all",[a.SelectAllAction.create()])])}createSelectActions(e){return(0,l.toArray)(e.index.all().filter((e=>(0,u.isNameable)(e)))).map((e=>new c.LabeledAction(`Reveal ${(0,u.name)(e)}`,[a.SelectAction.create({selectedElementsIDs:[e.id]}),a.CenterAction.create([e.id])],"eye")))}};t.RevealNamedElementActionProvider=p,t.RevealNamedElementActionProvider=p=o([(0,s.injectable)(),r(0,(0,s.inject)(d.TYPES.ILogger)),i("design:paramtypes",[Object])],p)},5778:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.edgeInProgressTargetHandleID=t.edgeInProgressID=t.SDanglingAnchorImpl=t.SRoutingHandleImpl=t.SConnectableElementImpl=t.getRouteBounds=t.getAbsoluteRouteBounds=t.isConnectable=t.connectableFeature=t.SRoutableElementImpl=void 0;const o=n(5017),i=n(166),r=n(5855),s=n(408),a=n(9882),c=n(6538),d=n(5027);class l extends i.SChildElementImpl{constructor(){super(...arguments),this.routingPoints=[]}get source(){return this.index.getById(this.sourceId)}get target(){return this.index.getById(this.targetId)}get bounds(){return this.routingPoints.reduce(((e,t)=>o.Bounds.combine(e,{x:t.x,y:t.y,width:0,height:0})),o.Bounds.EMPTY)}}function u(e){const t={x:NaN,y:NaN,width:0,height:0};for(const n of e)isNaN(t.x)?(t.x=n.x,t.y=n.y):(n.x<t.x?(t.width+=t.x-n.x,t.x=n.x):n.x>t.x+t.width&&(t.width=n.x-t.x),n.y<t.y?(t.height+=t.y-n.y,t.y=n.y):n.y>t.y+t.height&&(t.height=n.y-t.y));return t}t.SRoutableElementImpl=l,t.connectableFeature=Symbol("connectableFeature"),t.isConnectable=function(e){return e.hasFeature(t.connectableFeature)&&e.canConnect},t.getAbsoluteRouteBounds=function(e,t=e.routingPoints){let n=u(t),o=e;for(;o instanceof i.SChildElementImpl;){const e=o.parent;n=e.localToParent(n),o=e}return n},t.getRouteBounds=u;class h extends r.SShapeElementImpl{constructor(){super(...arguments),this.strokeWidth=0}get anchorKind(){}get incomingEdges(){return this.index.all().filter((e=>e instanceof l)).filter((e=>e.targetId===this.id))}get outgoingEdges(){return this.index.all().filter((e=>e instanceof l)).filter((e=>e.sourceId===this.id))}canConnect(e,t){return!0}}t.SConnectableElementImpl=h;class p extends i.SChildElementImpl{constructor(){super(...arguments),this.editMode=!1,this.hoverFeedback=!1,this.selected=!1}hasFeature(e){return-1!==p.DEFAULT_FEATURES.indexOf(e)}}t.SRoutingHandleImpl=p,p.DEFAULT_FEATURES=[a.selectFeature,d.moveFeature,c.hoverFeedbackFeature];class f extends h{constructor(){super(),this.type="dangling-anchor",this.size={width:0,height:0}}}t.SDanglingAnchorImpl=f,f.DEFAULT_FEATURES=[s.deletableFeature],t.edgeInProgressID="edge-in-progress",t.edgeInProgressTargetHandleID=t.edgeInProgressID+"-target-anchor"},5806:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.VBoxLayouter=void 0;const i=n(2650),r=n(5017),s=n(7445),a=n(5855);let c=class extends s.AbstractLayout{getChildrenSize(e,t,n){let o=-1,i=0,s=!0;return e.children.forEach((e=>{if((0,a.isLayoutableChild)(e)){const a=n.getBoundsData(e).bounds;void 0!==a&&r.Dimension.isValid(a)&&(i+=a.height,s?s=!1:i+=t.vGap,o=Math.max(o,a.width))}})),{width:o,height:i}}layoutChild(e,t,n,o,i,r,s,a){const c=this.getDx(o.hAlign,n,s);return t.bounds={x:i.paddingLeft+e.bounds.x-n.x+c,y:r.y+e.bounds.y-n.y,width:n.width,height:n.height},t.boundsChanged=!0,{x:r.x,y:r.y+n.height+i.vGap}}getDefaultLayoutOptions(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,vGap:1,hAlign:"center",minWidth:0,minHeight:0}}spread(e,t){return Object.assign(Object.assign({},e),t)}};t.VBoxLayouter=c,c.KIND="vbox",t.VBoxLayouter=c=o([(0,i.injectable)()],c)},5829:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.RoutableView=void 0;const i=n(2650),r=n(5778);let s=class{isVisible(e,t,n){if("hidden"===n.targetKind)return!0;if(0===t.length)return!0;const o=(0,r.getAbsoluteRouteBounds)(e,t),i=e.root.canvasBounds;return o.x<=i.width&&o.x+o.width>=0&&o.y<=i.height&&o.y+o.height>=0}};t.RoutableView=s,t.RoutableView=s=o([(0,i.injectable)()],s)},5855:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SShapeElementImpl=t.findChildrenAtPosition=t.getAbsoluteClientBounds=t.getAbsoluteBounds=t.isAlignable=t.isSizeable=t.isLayoutableChild=t.isLayoutContainer=t.isBoundsAware=t.alignFeature=t.layoutableChildFeature=t.layoutContainerFeature=t.boundsFeature=void 0;const o=n(5017),i=n(166),r=n(54),s=n(9678);function a(e){return"bounds"in e}function c(e,t,n){e.children.forEach((e=>{if(a(e)&&o.Bounds.includes(e.bounds,t)&&n.push(e),e instanceof i.SParentElementImpl){const o=e.parentToLocal(t);c(e,o,n)}}))}t.boundsFeature=Symbol("boundsFeature"),t.layoutContainerFeature=Symbol("layoutContainerFeature"),t.layoutableChildFeature=Symbol("layoutableChildFeature"),t.alignFeature=Symbol("alignFeature"),t.isBoundsAware=a,t.isLayoutContainer=function(e){return a(e)&&e.hasFeature(t.layoutContainerFeature)&&"layout"in e},t.isLayoutableChild=function(e){return a(e)&&e.hasFeature(t.layoutableChildFeature)},t.isSizeable=function(e){return e.hasFeature(t.boundsFeature)&&a(e)},t.isAlignable=function(e){return e.hasFeature(t.alignFeature)&&"alignment"in e},t.getAbsoluteBounds=function(e){const t=(0,r.findParentByFeature)(e,a);if(void 0!==t){let e=t.bounds,n=t;for(;n instanceof i.SChildElementImpl;){const t=n.parent;e=t.localToParent(e),n=t}return e}if(e instanceof i.SModelRootImpl){const t=e.canvasBounds;return{x:0,y:0,width:t.width,height:t.height}}return o.Bounds.EMPTY},t.getAbsoluteClientBounds=function(e,t,n){let o=0,i=0,r=0,a=0;const c=t.createUniqueDOMElementId(e),d=document.getElementById(c);if(d){const e=d.getBoundingClientRect(),t=(0,s.getWindowScroll)();o=e.left+t.x,i=e.top+t.y,r=e.width,a=e.height}let l=document.getElementById(n.baseDiv);if(l)for(;l.offsetParent instanceof HTMLElement&&(l=l.offsetParent);)o-=l.offsetLeft,i-=l.offsetTop;return{x:o,y:i,width:r,height:a}},t.findChildrenAtPosition=function(e,t){const n=[];return c(e,t,n),n};class d extends i.SChildElementImpl{constructor(){super(...arguments),this.position=o.Point.ORIGIN,this.size=o.Dimension.EMPTY}get bounds(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}}set bounds(e){this.position={x:e.x,y:e.y},this.size={width:e.width,height:e.height}}localToParent(e){const t={x:e.x+this.position.x,y:e.y+this.position.y,width:-1,height:-1};return(0,o.isBounds)(e)&&(t.width=e.width,t.height=e.height),t}parentToLocal(e){const t={x:e.x-this.position.x,y:e.y-this.position.y,width:-1,height:-1};return(0,o.isBounds)(e)&&(t.width=e.width,t.height=e.height),t}}t.SShapeElementImpl=d},5857:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.createFeatureSet=t.EMPTY_ROOT=t.SModelFactory=t.SModelRegistry=void 0;const s=n(2650),a=n(2041),c=n(5559),d=n(166);let l=class extends c.FactoryRegistry{constructor(e){super(),e.forEach((e=>{let t=this.getDefaultFeatures(e.constr);if(!t&&e.features&&e.features.enable&&(t=[]),t){const n=h(t,e.features);e.isOverride?this.override(e.type,(()=>{const t=new e.constr;return t.features=n,t})):this.register(e.type,(()=>{const t=new e.constr;return t.features=n,t}))}else e.isOverride?this.override(e.type,(()=>new e.constr)):this.register(e.type,(()=>new e.constr))}))}getDefaultFeatures(e){let t=e;do{const e=t.DEFAULT_FEATURES;if(e)return e;t=Object.getPrototypeOf(t)}while(t)}};t.SModelRegistry=l,t.SModelRegistry=l=o([(0,s.injectable)(),r(0,(0,s.multiInject)(a.TYPES.SModelElementRegistration)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],l);let u=class{createElement(e,t){let n;if(this.registry.hasKey(e.type)){const t=this.registry.get(e.type,void 0);if(!(t instanceof d.SChildElementImpl))throw new Error(`Element with type ${e.type} was expected to be an SChildElement.`);n=t}else n=new d.SChildElementImpl;return this.initializeChild(n,e,t)}createRoot(e){let t;if(this.registry.hasKey(e.type)){const n=this.registry.get(e.type,void 0);if(!(n instanceof d.SModelRootImpl))throw new Error(`Element with type ${e.type} was expected to be an SModelRoot.`);t=n}else t=new d.SModelRootImpl;return this.initializeRoot(t,e)}createSchema(e){const t={};for(const n in e)if(!this.isReserved(e,n)){const o=e[n];"function"!=typeof o&&(t[n]=o)}return e instanceof d.SParentElementImpl&&(t.children=e.children.map((e=>this.createSchema(e)))),t}initializeElement(e,t){for(const n in t)if(!this.isReserved(e,n)){const o=t[n];"function"!=typeof o&&(e[n]=o)}return e}isReserved(e,t){if(["children","parent","index"].indexOf(t)>=0)return!0;let n=e;do{const e=Object.getOwnPropertyDescriptor(n,t);if(void 0!==e)return void 0!==e.get;n=Object.getPrototypeOf(n)}while(n);return!1}initializeParent(e,t){return this.initializeElement(e,t),(0,d.isParent)(t)&&(e.children=t.children.map((t=>this.createElement(t,e)))),e}initializeChild(e,t,n){return this.initializeParent(e,t),void 0!==n&&(e.parent=n),e}initializeRoot(e,t){return this.initializeParent(e,t),e.index.add(e),e}};function h(e,t){const n=new Set(e);if(t&&t.enable)for(const e of t.enable)n.add(e);if(t&&t.disable)for(const e of t.disable)n.delete(e);return n}t.SModelFactory=u,o([(0,s.inject)(a.TYPES.SModelRegistry),i("design:type",l)],u.prototype,"registry",void 0),t.SModelFactory=u=o([(0,s.injectable)()],u),t.EMPTY_ROOT=Object.freeze({type:"NONE",id:"EMPTY"}),t.createFeatureSet=h},5873:function(e,t,n){"use strict";var o,i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LocationPostprocessor=t.MoveMouseListener=t.MorphEdgesAnimation=t.MoveAnimation=t.MoveCommand=void 0;const a=n(2650),c=n(5017),d=n(7020),l=n(6320),u=n(3194),h=n(166),p=n(54),f=n(2041),g=n(5677),m=n(491),y=n(356),v=n(1627),b=n(5855),S=n(5884),P=n(2872),_=n(9486),E=n(5778),w=n(2565),O=n(3706),I=n(9882),M=n(1644),A=n(5027);let R=o=class extends u.MergeableCommand{constructor(e){super(),this.action=e,this.resolvedMoves=new Map,this.edgeMementi=[],this.stoppableCommandKey=o.KIND}stopExecution(){this.animation&&(this.animation.stop(),this.animation=void 0)}execute(e){const t=e.root.index,n=new Map,o=new Map;return this.action.moves.forEach((e=>{const i=t.getById(e.elementId);if(i instanceof E.SRoutingHandleImpl&&this.edgeRouterRegistry){const t=i.parent;if(t instanceof E.SRoutableElementImpl){const o=this.resolveHandleMove(i,t,e);if(o){let e=n.get(t);e||(e=[],n.set(t,e)),e.push(o)}}}else if(i&&(0,A.isLocateable)(i)){const n=this.resolveElementMove(i,e);if(n&&(this.resolvedMoves.set(n.element.id,n),this.edgeRouterRegistry)){const e=e=>{t.getAttachedElements(e).forEach((e=>{if(e instanceof E.SRoutableElementImpl&&!this.isChildOfMovedElements(e)){const t=o.get(e),i=c.Point.subtract(n.toPosition,n.fromPosition),r=t?c.Point.linear(t,i,.5):i;o.set(e,r)}}))},r=t=>{(0,h.isParent)(t)&&t.children.forEach((t=>{t instanceof h.SModelElementImpl&&(t instanceof E.SConnectableElementImpl&&e(t),r(t))}))};r(i),e(i)}}})),this.doMove(n,o),this.action.animate?(this.undoMove(),(this.animation=new l.CompoundAnimation(e.root,e,[new x(e.root,this.resolvedMoves,e,!1),new T(e.root,this.edgeMementi,e,!1)])).start()):e.root}resolveHandleMove(e,t,n){let o=n.fromPosition;if(!o){const n=this.edgeRouterRegistry.get(t.routerKind);o=n.getHandlePosition(t,n.route(t),e)}if(o)return{handle:e,fromPosition:o,toPosition:n.toPosition}}resolveElementMove(e,t){return{element:e,fromPosition:t.fromPosition||{x:e.position.x,y:e.position.y},toPosition:t.toPosition}}doMove(e,t){this.resolvedMoves.forEach((e=>{e.element.position=e.toPosition})),e.forEach(((e,t)=>{const n=this.edgeRouterRegistry.get(t.routerKind),o=n.takeSnapshot(t);n.applyHandleMoves(t,e);const i=n.takeSnapshot(t);this.edgeMementi.push({edge:t,before:o,after:i})})),t.forEach(((t,n)=>{if(!e.get(n)){const e=this.edgeRouterRegistry.get(n.routerKind),o=e.takeSnapshot(n);if(this.isAttachedEdge(n))n.routingPoints=n.routingPoints.map((e=>c.Point.add(e,t)));else{const t=(0,I.isSelectable)(n)&&n.selected;e.cleanupRoutingPoints(n,n.routingPoints,t,this.action.finished)}const i=e.takeSnapshot(n);this.edgeMementi.push({edge:n,before:o,after:i})}}))}isChildOfMovedElements(e){const t=e.parent;return!!Array.from(this.resolvedMoves.values()).map((e=>e.element.id)).includes(t.id)||t instanceof h.SChildElementImpl&&this.isChildOfMovedElements(t)}isAttachedEdge(e){const t=e.source,n=e.target,o=e=>Boolean(this.resolvedMoves.get(e.id))||this.isChildOfMovedElements(e);return Boolean(t&&n&&o(t)&&o(n))}undoMove(){this.resolvedMoves.forEach((e=>{e.element.position=e.fromPosition})),this.edgeMementi.forEach((e=>{this.edgeRouterRegistry.get(e.edge.routerKind).applySnapshot(e.edge,e.before)}))}undo(e){return new l.CompoundAnimation(e.root,e,[new x(e.root,this.resolvedMoves,e,!0),new T(e.root,this.edgeMementi,e,!0)]).start()}redo(e){return new l.CompoundAnimation(e.root,e,[new x(e.root,this.resolvedMoves,e,!1),new T(e.root,this.edgeMementi,e,!1)]).start()}merge(e,t){if(!this.action.animate&&e instanceof o)return e.resolvedMoves.forEach(((e,t)=>{const n=this.resolvedMoves.get(t);n?n.toPosition=e.toPosition:this.resolvedMoves.set(t,e)})),e.edgeMementi.forEach((e=>{const t=this.edgeMementi.find((t=>t.edge.id===e.edge.id));t?t.after=e.after:this.edgeMementi.push(e)})),!0;if(e instanceof _.ReconnectCommand){const t=e.memento;if(t){const e=this.edgeMementi.find((e=>e.edge.id===t.edge.id));e?e.after=t.after:this.edgeMementi.push(t)}return!0}return!1}};t.MoveCommand=R,R.KIND=d.MoveAction.KIND,i([(0,a.inject)(w.EdgeRouterRegistry),(0,a.optional)(),r("design:type",w.EdgeRouterRegistry)],R.prototype,"edgeRouterRegistry",void 0),t.MoveCommand=R=o=i([(0,a.injectable)(),s(0,(0,a.inject)(f.TYPES.Action)),r("design:paramtypes",[Object])],R);class x extends l.Animation{constructor(e,t,n,o=!1){super(n),this.model=e,this.elementMoves=t,this.reverse=o}tween(e){return this.elementMoves.forEach((t=>{this.reverse?t.element.position={x:(1-e)*t.toPosition.x+e*t.fromPosition.x,y:(1-e)*t.toPosition.y+e*t.fromPosition.y}:t.element.position={x:(1-e)*t.fromPosition.x+e*t.toPosition.x,y:(1-e)*t.fromPosition.y+e*t.toPosition.y}})),this.model}}t.MoveAnimation=x;class T extends l.Animation{constructor(e,t,n,o=!1){super(n),this.model=e,this.reverse=o,this.expanded=[],t.forEach((e=>{const t=this.reverse?e.after:e.before,n=this.reverse?e.before:e.after,o=t.routedPoints,i=n.routedPoints,r=Math.max(o.length,i.length);this.expanded.push({startExpandedRoute:this.growToSize(o,r),endExpandedRoute:this.growToSize(i,r),memento:e})}))}midPoint(e){const t=e.edge,n=e.edge.source,o=e.edge.target;return c.Point.linear((0,p.translatePoint)(c.Bounds.center(n.bounds),n.parent,t.parent),(0,p.translatePoint)(c.Bounds.center(o.bounds),o.parent,t.parent),.5)}start(){return this.expanded.forEach((e=>{e.memento.edge.removeAll((e=>e instanceof E.SRoutingHandleImpl))})),super.start()}tween(e){return 1===e?this.expanded.forEach((e=>{const t=e.memento;this.reverse?t.before.router.applySnapshot(t.edge,t.before):t.after.router.applySnapshot(t.edge,t.after)})):this.expanded.forEach((t=>{const n=[];for(let o=1;o<t.startExpandedRoute.length-1;++o)n.push(c.Point.linear(t.startExpandedRoute[o],t.endExpandedRoute[o],e));const o=e<.5?t.memento.before:t.memento.after,i=Object.assign(Object.assign({},o),{routingPoints:n,routingHandles:[]});o.router.applySnapshot(t.memento.edge,i)})),this.model}growToSize(e,t){const n=t-e.length;if(n<=0)return e;const o=[];o.push(e[0]);const i=1/(n+1),r=1/(e.length-1);let s=1;for(let t=1;t<e.length;++t){const n=r*t;let a=0;for(;n>(s+a)*i;)++a;s+=a;for(let n=0;n<a;++n){const i=c.Point.linear(e[t-1],e[t],(n+1)/(a+1));o.push(i)}o.push(e[t])}return o}}t.MorphEdgesAnimation=T;class j extends g.MouseListener{constructor(){super(...arguments),this.hasDragged=!1,this.elementId2startPos=new Map}mouseDown(e,t){if(0===t.button){const n=(0,p.findParentByFeature)(e,A.isMoveable),o=e instanceof E.SRoutingHandleImpl;if(void 0!==n||o||(0,S.isCreatingOnDrag)(e)?this.startDragPosition={x:t.pageX,y:t.pageY}:this.startDragPosition=void 0,this.hasDragged=!1,(0,S.isCreatingOnDrag)(e))return this.startCreatingOnDrag(e,t);if(o)return this.activateRoutingHandle(e,t)}return[]}startCreatingOnDrag(e,t){const n=[];return n.push(d.SelectAllAction.create({select:!1})),n.push(e.createAction(E.edgeInProgressID)),n.push(d.SelectAction.create({selectedElementsIDs:[E.edgeInProgressID]})),n.push(P.SwitchEditModeAction.create({elementsToActivate:[E.edgeInProgressID]})),n.push(d.SelectAction.create({selectedElementsIDs:[E.edgeInProgressTargetHandleID]})),n.push(P.SwitchEditModeAction.create({elementsToActivate:[E.edgeInProgressTargetHandleID]})),n}activateRoutingHandle(e,t){return[P.SwitchEditModeAction.create({elementsToActivate:[e.id]})]}mouseMove(e,t){const n=[];if(0===t.buttons)this.mouseUp(e,t);else if(this.startDragPosition){0===this.elementId2startPos.size&&this.collectStartPositions(e.root),this.hasDragged=!0;const o=this.getElementMoves(e,t,!1);o&&n.push(o)}return n}collectStartPositions(e){const t=new Set(e.index.all().filter((e=>(0,I.isSelectable)(e)&&e.selected)));t.forEach((e=>{if(!this.isChildOfSelected(t,e))if((0,A.isMoveable)(e))this.elementId2startPos.set(e.id,e.position);else if(e instanceof E.SRoutingHandleImpl){const t=this.getHandlePosition(e);t&&this.elementId2startPos.set(e.id,t)}}))}isChildOfSelected(e,t){for(;t instanceof h.SChildElementImpl;)if(t=t.parent,(0,A.isMoveable)(t)&&e.has(t))return!0;return!1}getElementMoves(e,t,n){if(!this.startDragPosition)return;const o=[],i=(0,p.findParentByFeature)(e,M.isViewport),r=i?i.zoom:1,s={x:(t.pageX-this.startDragPosition.x)/r,y:(t.pageY-this.startDragPosition.y)/r};return this.elementId2startPos.forEach(((n,i)=>{const r=e.root.index.getById(i);if(r){const e=this.createElementMove(r,n,s,t);e&&o.push(e)}})),o.length>0?d.MoveAction.create(o,{animate:!1,finished:n}):void 0}createElementMove(e,t,n,o){const i=this.snap({x:t.x+n.x,y:t.y+n.y},e,!o.shiftKey);if((0,A.isMoveable)(e))return{elementId:e.id,elementType:e.type,fromPosition:{x:e.position.x,y:e.position.y},toPosition:i};if(e instanceof E.SRoutingHandleImpl){const t=this.getHandlePosition(e);if(void 0!==t)return{elementId:e.id,elementType:e.type,fromPosition:t,toPosition:i}}}snap(e,t,n){return n&&this.snapper?this.snapper.snap(e,t):e}getHandlePosition(e){if(this.edgeRouterRegistry){const t=e.parent;if(!(t instanceof E.SRoutableElementImpl))return;const n=this.edgeRouterRegistry.get(t.routerKind),o=n.route(t);return n.getHandlePosition(t,o,e)}}mouseEnter(e,t){return e instanceof h.SModelRootImpl&&0===t.buttons&&!this.startDragPosition&&this.mouseUp(e,t),[]}mouseUp(e,t){const n=[];if(this.startDragPosition){const o=this.getElementMoves(e,t,!0);o&&n.push(o),e.root.index.all().forEach((o=>{o instanceof E.SRoutingHandleImpl&&n.push(...this.deactivateRoutingHandle(o,e,t))}))}if(!n.some((e=>e.kind===d.ReconnectAction.KIND))){const t=e.root.index.getById(E.edgeInProgressID);t instanceof h.SChildElementImpl&&n.push(this.deleteEdgeInProgress(t))}return this.hasDragged&&n.push(v.CommitModelAction.create()),this.hasDragged=!1,this.startDragPosition=void 0,this.elementId2startPos.clear(),n}deactivateRoutingHandle(e,t,n){const o=[],i=e.parent;if(i instanceof E.SRoutableElementImpl&&e.danglingAnchor){const n=this.getHandlePosition(e);if(n){const r=(0,p.translatePoint)(n,e.parent,e.root),s=(0,b.findChildrenAtPosition)(t.root,r).find((t=>(0,E.isConnectable)(t)&&t.canConnect(i,e.kind)));s&&this.hasDragged&&o.push(d.ReconnectAction.create({routableId:e.parent.id,newSourceId:"source"===e.kind?s.id:i.sourceId,newTargetId:"target"===e.kind?s.id:i.targetId}))}}return e.editMode&&o.push(P.SwitchEditModeAction.create({elementsToDeactivate:[e.id]})),o}deleteEdgeInProgress(e){const t=[];return t.push(E.edgeInProgressID),e.children.forEach((e=>{e instanceof E.SRoutingHandleImpl&&e.danglingAnchor&&t.push(e.danglingAnchor.id)})),d.DeleteElementAction.create(t)}decorate(e,t){return e}}t.MoveMouseListener=j,i([(0,a.inject)(w.EdgeRouterRegistry),(0,a.optional)(),r("design:type",w.EdgeRouterRegistry)],j.prototype,"edgeRouterRegistry",void 0),i([(0,a.inject)(f.TYPES.ISnapper),(0,a.optional)(),r("design:type",Object)],j.prototype,"snapper",void 0);let C=class{decorate(e,t){if((0,O.isEdgeLayoutable)(t)&&t.parent instanceof y.SEdgeImpl)return e;let n="";if((0,A.isLocateable)(t)&&t instanceof h.SChildElementImpl&&void 0!==t.parent){const e=t.position;0===e.x&&0===e.y||(n="translate("+e.x+", "+e.y+")")}if((0,b.isAlignable)(t)){const e=t.alignment;0===e.x&&0===e.y||(n.length>0&&(n+=" "),n+="translate("+e.x+", "+e.y+")")}return n.length>0&&(0,m.setAttr)(e,"transform",n),e}postUpdate(){}};t.LocationPostprocessor=C,t.LocationPostprocessor=C=i([(0,a.injectable)()],C)},5884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCreatingOnDrag=t.creatingOnDragFeature=void 0,t.creatingOnDragFeature=Symbol("creatingOnDragFeature"),t.isCreatingOnDrag=function(e){return e.hasFeature(t.creatingOnDragFeature)&&void 0!==e.createAction}},5897:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.StackLayouter=void 0;const i=n(2650),r=n(5017),s=n(7445),a=n(5855);let c=class extends s.AbstractLayout{getChildrenSize(e,t,n){let o=-1,i=-1;return e.children.forEach((e=>{if((0,a.isLayoutableChild)(e)){const t=n.getBoundsData(e).bounds;void 0!==t&&r.Dimension.isValid(t)&&(o=Math.max(o,t.width),i=Math.max(i,t.height))}})),{width:o,height:i}}layoutChild(e,t,n,o,i,r,s,a){const c=this.getDx(o.hAlign,n,s),d=this.getDy(o.vAlign,n,a);return t.bounds={x:i.paddingLeft+e.bounds.x-n.x+c,y:i.paddingTop+e.bounds.y-n.y+d,width:n.width,height:n.height},t.boundsChanged=!0,r}getDefaultLayoutOptions(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hAlign:"center",vAlign:"center",minWidth:0,minHeight:0}}spread(e,t){return Object.assign(Object.assign({},e),t)}};t.StackLayouter=c,c.KIND="stack",t.StackLayouter=c=o([(0,i.injectable)()],c)},5902:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CenterKeyboardListener=t.FitToScreenCommand=t.CenterCommand=t.BoundsAwareViewportCommand=void 0;const s=n(7020),a=n(5017),c=n(7305),d=n(166),l=n(3194),u=n(8245),h=n(5855),p=n(9882),f=n(4883),g=n(1644),m=n(2650),y=n(2041);let v=class extends l.Command{constructor(e){super(),this.animate=e}initialize(e){if(!(0,g.isViewport)(e))return;this.oldViewport={scroll:e.scroll,zoom:e.zoom};const t=[];if(this.getElementIds().forEach((n=>{const o=e.index.getById(n);o&&(0,h.isBoundsAware)(o)&&t.push(this.boundsInViewport(o,o.bounds,e))})),0===t.length&&e.index.all().forEach((n=>{(0,p.isSelectable)(n)&&n.selected&&(0,h.isBoundsAware)(n)&&t.push(this.boundsInViewport(n,n.bounds,e))})),0===t.length&&e.index.all().forEach((n=>{(0,h.isBoundsAware)(n)&&t.push(this.boundsInViewport(n,n.bounds,e))})),0!==t.length){const n=t.reduce(((e,t)=>a.Bounds.combine(e,t)));if(a.Dimension.isValid(n)){const t=this.getNewViewport(n,e);if(t){const{zoomLimits:n,horizontalScrollLimits:o,verticalScrollLimits:i}=this.viewerOptions;this.newViewport=(0,g.limitViewport)(t,e.canvasBounds,o,i,n)}}}}boundsInViewport(e,t,n){return e instanceof d.SChildElementImpl&&e.parent!==n?this.boundsInViewport(e.parent,e.parent.localToParent(t),n):t}execute(e){return this.initialize(e.root),this.redo(e)}undo(e){const t=e.root;if((0,g.isViewport)(t)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new f.ViewportAnimation(t,this.newViewport,this.oldViewport,e).start();t.scroll=this.oldViewport.scroll,t.zoom=this.oldViewport.zoom}return t}redo(e){const t=e.root;if((0,g.isViewport)(t)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new f.ViewportAnimation(t,this.oldViewport,this.newViewport,e).start();t.scroll=this.newViewport.scroll,t.zoom=this.newViewport.zoom}return t}equal(e,t){return(0,a.almostEquals)(e.zoom,t.zoom)&&(0,a.almostEquals)(e.scroll.x,t.scroll.x)&&(0,a.almostEquals)(e.scroll.y,t.scroll.y)}};t.BoundsAwareViewportCommand=v,o([(0,m.inject)(y.TYPES.ViewerOptions),i("design:type",Object)],v.prototype,"viewerOptions",void 0),t.BoundsAwareViewportCommand=v=o([(0,m.injectable)(),i("design:paramtypes",[Boolean])],v);let b=class extends v{constructor(e){super(e.animate),this.action=e}getElementIds(){return this.action.elementIds}getNewViewport(e,t){if(!a.Dimension.isValid(t.canvasBounds))return;let n=1;this.action.retainZoom&&(0,g.isViewport)(t)?n=t.zoom:this.action.zoomScale&&(n=this.action.zoomScale);const o=a.Bounds.center(e);return{scroll:{x:o.x-.5*t.canvasBounds.width/n,y:o.y-.5*t.canvasBounds.height/n},zoom:n}}};t.CenterCommand=b,b.KIND=s.CenterAction.KIND,t.CenterCommand=b=o([r(0,(0,m.inject)(y.TYPES.Action)),i("design:paramtypes",[Object])],b);let S=class extends v{constructor(e){super(e.animate),this.action=e}getElementIds(){return this.action.elementIds}getNewViewport(e,t){if(!a.Dimension.isValid(t.canvasBounds))return;const n=a.Bounds.center(e),o=void 0===this.action.padding?0:2*this.action.padding;let i=Math.min(t.canvasBounds.width/(e.width+o),t.canvasBounds.height/(e.height+o));return void 0!==this.action.maxZoom&&(i=Math.min(i,this.action.maxZoom)),i===1/0&&(i=1),{scroll:{x:n.x-.5*t.canvasBounds.width/i,y:n.y-.5*t.canvasBounds.height/i},zoom:i}}};t.FitToScreenCommand=S,S.KIND=s.FitToScreenAction.KIND,t.FitToScreenCommand=S=o([r(0,(0,m.inject)(y.TYPES.Action)),i("design:paramtypes",[Object])],S);class P extends u.KeyListener{keyDown(e,t){return(0,c.matchesKeystroke)(t,"KeyC","ctrlCmd","shift")?[s.CenterAction.create([])]:(0,c.matchesKeystroke)(t,"KeyF","ctrlCmd","shift")?[s.FitToScreenAction.create([])]:[]}}t.CenterKeyboardListener=P},5922:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.configureLayout=t.StatefulLayouter=t.Layouter=t.LayoutRegistry=void 0;const s=n(2650),a=n(5017),c=n(2041),d=n(5559),l=n(5855),u=n(4615);let h=class extends d.InstanceRegistry{constructor(e=[]){super(),e.forEach((e=>{this.hasKey(e.layoutKind)?this.logger.warn("Layout kind is already defined: ",e.layoutKind):this.register(e.layoutKind,e.factory())}))}};t.LayoutRegistry=h,o([(0,s.inject)(c.TYPES.ILogger),i("design:type",Object)],h.prototype,"logger",void 0),t.LayoutRegistry=h=o([(0,s.injectable)(),r(0,(0,s.multiInject)(c.TYPES.LayoutRegistration)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],h);let p=class{layout(e){new f(e,this.layoutRegistry,this.logger).layout()}};t.Layouter=p,o([(0,s.inject)(c.TYPES.LayoutRegistry),i("design:type",h)],p.prototype,"layoutRegistry",void 0),o([(0,s.inject)(c.TYPES.ILogger),i("design:type",Object)],p.prototype,"logger",void 0),t.Layouter=p=o([(0,s.injectable)()],p);class f{constructor(e,t,n){this.element2boundsData=e,this.layoutRegistry=t,this.log=n,this.toBeLayouted=[],e.forEach(((e,t)=>{(0,l.isLayoutContainer)(t)&&this.toBeLayouted.push(t)}))}getBoundsData(e){let t=this.element2boundsData.get(e),n=e.bounds;return(0,l.isLayoutContainer)(e)&&this.toBeLayouted.indexOf(e)>=0&&(n=this.doLayout(e)),t||(t={bounds:n,boundsChanged:!1,alignmentChanged:!1},this.element2boundsData.set(e,t)),t}layout(){for(;this.toBeLayouted.length>0;){const e=this.toBeLayouted[0];this.doLayout(e)}}doLayout(e){const t=this.toBeLayouted.indexOf(e);t>=0&&this.toBeLayouted.splice(t,1);const n=this.layoutRegistry.get(e.layout);n&&n.layout(e,this);const o=this.element2boundsData.get(e);return void 0!==o&&void 0!==o.bounds?o.bounds:(this.log.error(e,"Layout failed"),a.Bounds.EMPTY)}}t.StatefulLayouter=f,t.configureLayout=function(e,t,n){if("function"==typeof n){if(!(0,u.isInjectable)(n))throw new Error(`Layouts be @injectable: ${n.name}`);e.isBound(n)||e.bind(n).toSelf()}e.bind(c.TYPES.LayoutRegistration).toDynamicValue((e=>({layoutKind:t,factory:()=>e.container.get(n)})))}},6003:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.isThunk=t.ThunkView=void 0;const i=n(1638),r=n(2650);let s=class{render(e,t){return(0,i.h)(this.selector(e),{key:e.id,hook:{init:this.init.bind(this),prepatch:this.prepatch.bind(this)},fn:()=>this.renderAndDecorate(e,t),args:this.watchedArgs(e),thunk:!0})}renderAndDecorate(e,t){const n=this.doRender(e,t);return t.decorate(n,e),n}copyToThunk(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}init(e){const t=e.data,n=t.fn.apply(void 0,t.args);this.copyToThunk(n,e)}prepatch(e,t){const n=e.data,o=t.data;this.equals(n.args,o.args)?this.copyToThunk(e,t):this.copyToThunk(o.fn.apply(void 0,o.args),t)}equals(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<t.length;++n)if(!this.equals(e[n],t[n]))return!1}else if("object"==typeof e&&"object"==typeof t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!("parent"===n||"root"===n||n in t&&this.equals(e[n],t[n])))return!1}else if(e!==t)return!1;return!0}};t.ThunkView=s,t.ThunkView=s=o([(0,r.injectable)()],s),t.isThunk=function(e){return"thunk"in e}},6004:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.optional=function(){return(0,d.createTaggedDecorator)(new c.Metadata(a.OPTIONAL_TAG,!0))};const a=s(n(9466)),c=n(4045),d=n(3353)},6085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(1094),r=n(2041),s=n(1627),a=n(7747),c=new o.ContainerModule(((e,t,n)=>{e(r.TYPES.ModelSourceProvider).toProvider((e=>()=>new Promise((t=>{t(e.container.get(r.TYPES.ModelSource))})))),(0,i.configureCommand)({bind:e,isBound:n},s.CommitModelCommand),e(r.TYPES.IActionHandlerInitializer).toService(r.TYPES.ModelSource),e(a.ComputedBoundsApplicator).toSelf().inSingletonScope()}));t.default=c},6204:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewerCache=void 0;const r=n(2650),s=n(2041),a=n(5453);let c=class{update(e,t){if(void 0!==t)this.delegate.update(e,t),this.cachedModel=void 0;else{const t=void 0===this.cachedModel;this.cachedModel=e,t&&this.scheduleUpdate()}}scheduleUpdate(){this.syncer.onEndOfNextFrame((()=>{this.cachedModel&&(this.delegate.update(this.cachedModel),this.cachedModel=void 0)}))}};t.ViewerCache=c,o([(0,r.inject)(s.TYPES.IViewer),i("design:type",Object)],c.prototype,"delegate",void 0),o([(0,r.inject)(s.TYPES.AnimationFrameSyncer),i("design:type",a.AnimationFrameSyncer)],c.prototype,"syncer",void 0),t.ViewerCache=c=o([(0,r.injectable)()],c)},6249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataConstructorArgumentsFromMetadataReader=function(e,t){const n=t.getConstructorMetadata(e),s=[];for(const[t,o]of Object.entries(n.userGeneratedMetadata)){const n=parseInt(t);s[n]=(0,r.getConstructorArgumentMetadataFromLegacyMetadata)(e,n,o)}if(void 0!==n.compilerGeneratedMetadata)for(let e=0;e<n.compilerGeneratedMetadata.length;++e)if(void 0===s[e]){const t=n.compilerGeneratedMetadata[e];s[e]=(0,i.getClassElementMetadataFromNewable)(t)}return(0,o.assertConstructorMetadataArrayFilled)(e,s),s};const o=n(8650),i=n(2727),r=n(2818)},6268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graph=void 0,t.graph={type:"graph",id:"graph",children:[{type:"task",id:"task01",name:"First Task",isFinished:!0,isRunning:!1,position:{x:0,y:0},size:{width:100,height:100}},{type:"task",id:"task02",name:"Second Task",isFinished:!1,isRunning:!0,position:{x:0,y:200},size:{width:100,height:100}},{type:"task",id:"task03",name:"Third Task",isFinished:!1,isRunning:!1,position:{x:150,y:0},size:{width:100,height:100}},{type:"edge",id:"edge01",sourceId:"task01",targetId:"task02",routerKind:"manhattan"}]}},6272:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=l,t.getServiceIdentifierAsString=c,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){let o="";const i=n(e,t);return 0!==i.length&&(o="\nRegistered bindings:",i.forEach((e=>{let t="Object";null!==e.implementationType&&(t=l(e.implementationType)),o=`${o}\n ${t}`,e.constraint.metaData&&(o=`${o} - ${e.constraint.metaData}`)}))),o},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){let n="";const o=t.getNamedTag(),i=t.getCustomTags();return null!==o&&(n+=u(o)+"\n"),null!==i&&i.forEach((e=>{n+=u(e)+"\n"})),` ${e}\n ${e} - ${n}`}return` ${e}`},t.circularDependencyToException=function e(t){t.childRequests.forEach((n=>{if(d(t,n.serviceIdentifier)){const e=function(e){const t=function e(t,n=[]){const o=c(t.serviceIdentifier);return n.push(o),null!==t.parentRequest?e(t.parentRequest,n):n}(e);return t.reverse().join(" --\x3e ")}(n);throw new Error(`${a.CIRCULAR_DEPENDENCY} ${e}`)}e(n)}))},t.getSymbolDescription=function(e){return e.toString().slice(7,-1)};const a=s(n(5007));function c(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function d(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||d(e.parentRequest,t))}function l(e){if(null!=e.name&&""!==e.name)return e.name;{const t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return null===n?`Anonymous function: ${t}`:n[1]}}function u(e){return`{"key":"${e.key.toString()}","value":"${e.value.toString()}"}`}},6277:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ClassElementMetadataKind=void 0,function(e){e[e.multipleInjection=0]="multipleInjection",e[e.singleInjection=1]="singleInjection",e[e.unmanaged=2]="unmanaged"}(n||(t.ClassElementMetadataKind=n={}))},6282:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZoomMouseListener=t.getZoom=void 0;const r=n(2650),s=n(7020),a=n(5017),c=n(54),d=n(2041),l=n(5677),u=n(9678),h=n(1644),p=n(7196);t.getZoom=function(e){let t=1;const n=(0,c.findParentByFeature)(e,h.isViewport);return n&&(t=n.zoom),t};class f extends l.MouseListener{wheel(e,t){const n=(0,c.findParentByFeature)(e,h.isViewport);if(!n)return[];const o=this.isScrollMode(t)?this.processScroll(n,t):this.processZoom(n,e,t);return o?[s.SetViewportAction.create(n.id,o,{animate:!1})]:[]}isScrollMode(e){return e.altKey}processScroll(e,t){return{scroll:{x:e.scroll.x+t.deltaX,y:e.scroll.y+t.deltaY},zoom:e.zoom}}processZoom(e,t,n){const o=this.getZoomFactor(n);if(o>1&&(0,a.almostEquals)(e.zoom,this.viewerOptions.zoomLimits.max)||o<1&&(0,a.almostEquals)(e.zoom,this.viewerOptions.zoomLimits.min))return;const i=(0,p.limit)(e.zoom*o,this.viewerOptions.zoomLimits),r=this.getViewportOffset(t.root,n),s=1/i-1/e.zoom;return{scroll:{x:e.scroll.x-s*r.x,y:e.scroll.y-s*r.y},zoom:i}}getViewportOffset(e,t){const n=e.canvasBounds,o=(0,u.getWindowScroll)();return{x:t.clientX+o.x-n.x,y:t.clientY+o.y-n.y}}getZoomFactor(e){return e.deltaMode===e.DOM_DELTA_PAGE?Math.exp(.5*-e.deltaY):e.deltaMode===e.DOM_DELTA_LINE?Math.exp(.05*-e.deltaY):Math.exp(.005*-e.deltaY)}}t.ZoomMouseListener=f,o([(0,r.inject)(d.TYPES.ViewerOptions),i("design:type",Object)],f.prototype,"viewerOptions",void 0)},6289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleActivationStore=void 0;const o=n(3382);class i{_map=new Map;remove(e){const t=this._map.get(e);return void 0===t?this._getEmptyHandlersStore():(this._map.delete(e),t)}addDeactivation(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)}addActivation(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)}clone(){const e=new i;return this._map.forEach(((t,n)=>{e._map.set(n,{onActivations:t.onActivations.clone(),onDeactivations:t.onDeactivations.clone()})})),e}_getModuleActivationHandlers(e){let t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t}_getEmptyHandlersStore(){return{onActivations:new o.Lookup,onDeactivations:new o.Lookup}}}t.ModuleActivationStore=i},6294:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.preDestroy=void 0;const a=s(n(5007)),c=s(n(9466)),d=(0,n(9260).propertyEventDecorator)(c.PRE_DESTROY,a.MULTIPLE_PRE_DESTROY_METHODS);t.preDestroy=d},6320:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompoundAnimation=t.Animation=void 0;const o=n(2013);class i{constructor(e,t=o.easeInOut){this.context=e,this.ease=t,this.stopped=!1}start(){return this.stopped=!1,new Promise(((e,t)=>{let n,o=0;const i=t=>{let r;o++,void 0===n?(n=t,r=0):r=t-n;const s=Math.min(1,r/this.context.duration),a=this.tween(this.ease(s),this.context);this.context.modelChanged.update(a),1===s?(this.context.logger.log(this,1e3*o/this.context.duration+" fps"),e(a)):this.stopped?(this.context.logger.log(this,"Animation stopped at "+100*s+"%"),e(a)):this.context.syncer.onNextFrame(i)};if(this.context.syncer.isAvailable())this.context.syncer.onNextFrame(i);else{const t=this.tween(1,this.context);e(t)}}))}stop(){this.stopped=!0}}t.Animation=i,t.CompoundAnimation=class extends i{constructor(e,t,n=[],i=o.easeInOut){super(t,i),this.model=e,this.context=t,this.components=n,this.ease=i}include(e){return this.components.push(e),this}tween(e,t){for(const n of this.components)n.tween(e,t);return this.model}}},6331:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=function(e){return function(t,n,o){const i=new c.Metadata(a.NAME_TAG,e);(0,d.tagParameter)(t,n,o,i)}};const a=s(n(9466)),c=n(4045),d=n(3353)},6338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyQueryableStringImpl=void 0,t.LegacyQueryableStringImpl=class{#a;constructor(e){this.#a=e}startsWith(e){return this.#a.startsWith(e)}endsWith(e){return this.#a.endsWith(e)}contains(e){return this.#a.includes(e)}equals(e){return this.#a===e}value(){return this.#a}}},6538:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasPopupFeature=t.popupFeature=t.isHoverable=t.hoverFeedbackFeature=void 0,t.hoverFeedbackFeature=Symbol("hoverFeedbackFeature"),t.isHoverable=function(e){return e.hasFeature(t.hoverFeedbackFeature)},t.popupFeature=Symbol("popupFeature"),t.hasPopupFeature=function(e){return e.hasFeature(t.popupFeature)}},6570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExpandable=t.expandFeature=void 0,t.expandFeature=Symbol("expandFeature"),t.isExpandable=function(e){return e.hasFeature(t.expandFeature)&&"expanded"in e}},6586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetsFromMetadataProviders=function(e,t){return function(n){const s=e(n);let a=(0,i.getBaseType)(n);for(;void 0!==a&&a!==Object;){const e=t(a);for(const[t,n]of e)s.properties.has(t)||s.properties.set(t,n);a=(0,i.getBaseType)(a)}const c=[];for(const e of s.constructorArguments)if(e.kind!==o.ClassElementMetadataKind.unmanaged){const t=e.targetName??"";c.push(new r.LegacyTargetImpl(t,e,"ConstructorArgument"))}for(const[e,t]of s.properties)if(t.kind!==o.ClassElementMetadataKind.unmanaged){const n=t.targetName??e;c.push(new r.LegacyTargetImpl(n,t,"ClassProperty"))}return c}};const o=n(6277),i=n(5028),r=n(877)},6634:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultDiagramLocker=void 0;const i=n(2650);let r=class{isAllowed(e){return!0}};t.DefaultDiagramLocker=r,t.DefaultDiagramLocker=r=o([(0,i.injectable)()],r)},6647:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RequestBoundsCommand=t.SetBoundsCommand=void 0;const s=n(2650),a=n(7020),c=n(3194),d=n(2041),l=n(5855);let u=class extends c.SystemCommand{constructor(e){super(),this.action=e,this.bounds=[]}execute(e){return this.action.bounds.forEach((t=>{const n=e.root.index.getById(t.elementId);n&&(0,l.isBoundsAware)(n)&&this.bounds.push({element:n,oldBounds:n.bounds,newPosition:t.newPosition,newSize:t.newSize})})),this.redo(e)}undo(e){return this.bounds.forEach((e=>e.element.bounds=e.oldBounds)),e.root}redo(e){return this.bounds.forEach((e=>{e.newPosition?e.element.bounds=Object.assign(Object.assign({},e.newPosition),e.newSize):e.element.bounds=Object.assign({x:e.element.bounds.x,y:e.element.bounds.y},e.newSize)})),e.root}};t.SetBoundsCommand=u,u.KIND=a.SetBoundsAction.KIND,t.SetBoundsCommand=u=o([(0,s.injectable)(),r(0,(0,s.inject)(d.TYPES.Action)),i("design:paramtypes",[Object])],u);let h=class extends c.HiddenCommand{constructor(e){super(),this.action=e}execute(e){return{model:e.modelFactory.createRoot(this.action.newRoot),modelChanged:!0,cause:this.action}}get blockUntil(){return e=>e.kind===a.ComputedBoundsAction.KIND}};t.RequestBoundsCommand=h,h.KIND=a.RequestBoundsAction.KIND,t.RequestBoundsCommand=h=o([(0,s.injectable)(),r(0,(0,s.inject)(d.TYPES.Action)),i("design:paramtypes",[Object])],h)},6727:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;const a=s(n(9466)),c=n(4045),d=(e,t)=>{const n=e.parentRequest;return null!==n&&(!!t(n)||d(n,t))};t.traverseAncerstors=d;const l=e=>t=>{const n=n=>null!==n&&null!==n.target&&n.target.matchesTag(e)(t);return n.metaData=new c.Metadata(e,t),n};t.taggedConstraint=l;const u=l(a.NAMED_TAG);t.namedConstraint=u,t.typeConstraint=e=>t=>{let n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;{const n=t.bindings[0].implementationType;return e===n}}return!1}},6736:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0,function(e){e[e.MultipleBindingsAvailable=2]="MultipleBindingsAvailable",e[e.NoBindingsAvailable=0]="NoBindingsAvailable",e[e.OnlyOneBindingAvailable=1]="OnlyOneBindingAvailable"}(n||(t.BindingCount=n={}))},6746:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isZoomable=t.isScrollable=void 0;const o=n(7154);t.isScrollable=function(e){return(0,o.hasOwnProperty)(e,"scroll")},t.isZoomable=function(e){return(0,o.hasOwnProperty)(e,"zoom")}},6757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetId=function(){const e=(0,o.getReflectMetadata)(Object,i)??0;return e===Number.MAX_SAFE_INTEGER?(0,o.updateReflectMetadata)(Object,i,e,(()=>Number.MIN_SAFE_INTEGER)):(0,o.updateReflectMetadata)(Object,i,e,(e=>e+1)),e};const o=n(9517),i="@inversifyjs/core/targetId"},6762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(5239),s=new o.ContainerModule((e=>{e(r.OpenMouseListener).toSelf().inSingletonScope(),e(i.TYPES.MouseListener).toService(r.OpenMouseListener)}));t.default=s},6871:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=function(e){return g(e.plan.rootRequest.requestScope)(e.plan.rootRequest)};const a=s(n(5007)),c=n(9117),d=n(3934),l=n(7353),u=n(2576),h=n(8835),p=n(2672),f=n(7508),g=e=>t=>{t.parentContext.setCurrentRequest(t);const n=t.bindings,o=t.childRequests,i=t.target&&t.target.isArray(),r=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(i&&r)return o.map((t=>g(e)(t)));{if(t.target.isOptional()&&0===n.length)return;const o=n[0];return m(e,t,o)}},m=(e,t,n)=>((e,t,n)=>{let o=(0,l.tryGetFromScope)(e,t);return null!==o||(o=n(),(0,l.saveToScope)(e,t,o)),o})(e,n,(()=>{let o=((e,t,n)=>{let o;const i=t.childRequests;switch((0,h.ensureFullyBound)(n),n.type){case c.BindingTypeEnum.ConstantValue:case c.BindingTypeEnum.Function:o=n.cache;break;case c.BindingTypeEnum.Constructor:o=n.implementationType;break;case c.BindingTypeEnum.Instance:o=(0,f.resolveInstance)(n,n.implementationType,i,g(e));break;default:o=((e,t)=>{const n=(0,h.getFactoryDetails)(e);return(0,p.tryAndThrowErrorIfStackOverflow)((()=>n.factory.bind(e)(t)),(()=>new Error(a.CIRCULAR_DEPENDENCY_IN_FACTORY(n.factoryType,t.currentRequest.serviceIdentifier.toString()))))})(n,t.parentContext)}return o})(e,t,n);return o=(0,u.isPromise)(o)?o.then((e=>y(t,n,e))):y(t,n,o),o}));function y(e,t,n){let o=v(e.parentContext,t,n);const i=_(e.parentContext.container);let r,s=i.next();do{r=s.value;const t=e.parentContext,n=e.serviceIdentifier,a=P(r,n);o=(0,u.isPromise)(o)?S(a,t,o):b(a,t,o),s=i.next()}while(!0!==s.done&&!(0,d.getBindingDictionary)(r).hasKey(e.serviceIdentifier));return o}const v=(e,t,n)=>{let o;return o="function"==typeof t.onActivation?t.onActivation(e,n):n,o},b=(e,t,n)=>{let o=e.next();for(;!0!==o.done;){if(n=o.value(t,n),(0,u.isPromise)(n))return S(e,t,n);o=e.next()}return n},S=async(e,t,n)=>{let o=await n,i=e.next();for(;!0!==i.done;)o=await i.value(t,o),i=e.next();return o},P=(e,t)=>{const n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},_=e=>{const t=[e];let n=e.parent;for(;null!==n;)t.push(n),n=n.parent;return{next:()=>{const e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}}},6988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(1711),s=n(3289),a=n(1094),c=new o.ContainerModule(((e,t,n)=>{e(r.ExportSvgKeyListener).toSelf().inSingletonScope(),e(i.TYPES.KeyListener).toService(r.ExportSvgKeyListener),e(r.ExportSvgPostprocessor).toSelf().inSingletonScope(),e(i.TYPES.HiddenVNodePostprocessor).toService(r.ExportSvgPostprocessor),(0,a.configureCommand)({bind:e,isBound:n},r.ExportSvgCommand),e(i.TYPES.SvgExporter).to(s.SvgExporter).inSingletonScope()}));t.default=c},7020:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReconnectAction=t.ApplyLabelEditAction=t.DeleteElementAction=t.CreateElementAction=t.ExportSvgAction=t.RequestExportSvgAction=t.HoverFeedbackAction=t.MoveAction=t.RedoAction=t.UndoAction=t.BringToFrontAction=t.ViewportResult=t.GetViewportAction=t.SetViewportAction=t.FitToScreenAction=t.CenterAction=t.LayoutAction=t.OpenAction=t.CollapseExpandAllAction=t.CollapseExpandAction=t.SelectionResult=t.GetSelectionAction=t.SelectAllAction=t.SelectAction=t.LoggingAction=t.ComputedBoundsAction=t.RequestBoundsAction=t.SetBoundsAction=t.SetPopupModelAction=t.RequestPopupModelAction=t.UpdateModelAction=t.SetModelAction=t.RequestModelAction=t.RejectAction=t.isResponseAction=t.setRequestContext=t.generateRequestId=t.isRequestAction=t.isAction=t.isActionMessage=void 0;const o=n(7154);t.isActionMessage=function(e){return(0,o.hasOwnProperty)(e,"action")},t.isAction=function(e){return(0,o.hasOwnProperty)(e,"kind","string")},t.isRequestAction=function(e){return(0,o.hasOwnProperty)(e,"requestId","string")};let i="",r=1;function s(){return`${i}_${r++}`}var a,c,d,l,u,h,p,f,g,m,y,v,b,S,P,_,E,w,O,I,M,A,R,x,T,j,C,D,N,L,B,k,F,V;t.generateRequestId=s,t.setRequestContext=function(e){i=e},t.isResponseAction=function(e){return(0,o.hasOwnProperty)(e,"responseId","string")&&""!==e.responseId},function(e){e.KIND="rejectRequest",e.create=function(t){return{kind:e.KIND,message:t.message,detail:t.detail,responseId:t.requestId}}}(a||(t.RejectAction=a={})),function(e){e.KIND="requestModel",e.create=function(t){return{kind:e.KIND,options:t,requestId:s()}}}(c||(t.RequestModelAction=c={})),function(e){e.KIND="setModel",e.create=function(t,n=""){return{kind:e.KIND,newRoot:t,responseId:n}}}(d||(t.SetModelAction=d={})),function(e){e.KIND="updateModel",e.create=function(t,n={}){return Array.isArray(t)?{kind:e.KIND,matches:t,animate:n.animate,cause:n.cause}:{kind:e.KIND,newRoot:t,animate:n.animate,cause:n.cause}}}(l||(t.UpdateModelAction=l={})),function(e){e.KIND="requestPopupModel",e.create=function(t){return{kind:e.KIND,elementId:t.elementId,bounds:t.bounds,requestId:s()}}}(u||(t.RequestPopupModelAction=u={})),function(e){e.KIND="setPopupModel",e.create=function(t,n=""){return{kind:e.KIND,newRoot:t,responseId:n}}}(h||(t.SetPopupModelAction=h={})),function(e){e.KIND="setBounds",e.create=function(t){return{kind:e.KIND,bounds:t}}}(p||(t.SetBoundsAction=p={})),function(e){e.KIND="requestBounds",e.create=function(t){return{kind:e.KIND,newRoot:t,requestId:s()}}}(f||(t.RequestBoundsAction=f={})),function(e){e.KIND="computedBounds",e.create=function(t,n={}){var o;return{kind:e.KIND,bounds:t,revision:n.revision,alignments:n.alignments,responseId:null!==(o=n.requestId)&&void 0!==o?o:""}}}(g||(t.ComputedBoundsAction=g={})),function(e){e.KIND="logging",e.create=function(t){return Object.assign({kind:e.KIND},t)}}(m||(t.LoggingAction=m={})),function(e){e.KIND="elementSelected",e.create=function(t){var n,o;return{kind:e.KIND,selectedElementsIDs:null!==(n=t.selectedElementsIDs)&&void 0!==n?n:[],deselectedElementsIDs:null!==(o=t.deselectedElementsIDs)&&void 0!==o?o:[]}}}(y||(t.SelectAction=y={})),function(e){e.KIND="allSelected",e.create=function(t={}){var n;return{kind:e.KIND,select:null===(n=t.select)||void 0===n||n}}}(v||(t.SelectAllAction=v={})),function(e){e.KIND="getSelection",e.create=function(){return{kind:e.KIND,requestId:s()}}}(b||(t.GetSelectionAction=b={})),function(e){e.KIND="selectionResult",e.create=function(t,n){return{kind:e.KIND,selectedElementsIDs:t,responseId:n}}}(S||(t.SelectionResult=S={})),function(e){e.KIND="collapseExpand",e.create=function(t){var n,o;return{kind:e.KIND,expandIds:null!==(n=t.expandIds)&&void 0!==n?n:[],collapseIds:null!==(o=t.collapseIds)&&void 0!==o?o:[]}}}(P||(t.CollapseExpandAction=P={})),function(e){e.KIND="collapseExpandAll",e.create=function(t={}){var n;return{kind:e.KIND,expand:null===(n=t.expand)||void 0===n||n}}}(_||(t.CollapseExpandAllAction=_={})),function(e){e.KIND="open",e.create=function(t){return{kind:e.KIND,elementId:t}}}(E||(t.OpenAction=E={})),function(e){e.KIND="layout",e.create=function(t={}){return{kind:e.KIND,layoutType:t.layoutType,elementIds:t.elementIds}}}(w||(t.LayoutAction=w={})),function(e){e.KIND="center",e.create=function(t,n={}){var o,i;return{kind:e.KIND,elementIds:t,animate:null===(o=n.animate)||void 0===o||o,retainZoom:null!==(i=n.retainZoom)&&void 0!==i&&i,zoomScale:n.zoomScale}}}(O||(t.CenterAction=O={})),function(e){e.KIND="fit",e.create=function(t,n={}){var o;return{kind:e.KIND,elementIds:t,padding:n.padding,maxZoom:n.maxZoom,animate:null===(o=n.animate)||void 0===o||o}}}(I||(t.FitToScreenAction=I={})),function(e){e.KIND="viewport",e.create=function(t,n,o={}){var i;return{kind:e.KIND,elementId:t,newViewport:n,animate:null===(i=o.animate)||void 0===i||i}}}(M||(t.SetViewportAction=M={})),function(e){e.KIND="getViewport",e.create=function(){return{kind:e.KIND,requestId:s()}}}(A||(t.GetViewportAction=A={})),function(e){e.KIND="viewportResult",e.create=function(t,n,o){return{kind:e.KIND,viewport:t,canvasBounds:n,responseId:o}}}(R||(t.ViewportResult=R={})),function(e){e.KIND="bringToFront",e.create=function(t){return{kind:e.KIND,elementIDs:t}}}(x||(t.BringToFrontAction=x={})),function(e){e.KIND="undo",e.create=function(){return{kind:e.KIND}}}(T||(t.UndoAction=T={})),function(e){e.KIND="redo",e.create=function(){return{kind:e.KIND}}}(j||(t.RedoAction=j={})),function(e){e.KIND="move",e.create=function(t,n={}){var o,i,r;return{kind:e.KIND,moves:t,animate:null===(o=n.animate)||void 0===o||o,finished:null!==(i=n.finished)&&void 0!==i&&i,stoppable:null!==(r=n.stoppable)&&void 0!==r&&r}}}(C||(t.MoveAction=C={})),function(e){e.KIND="hoverFeedback",e.create=function(t){return{kind:e.KIND,mouseoverElement:t.mouseoverElement,mouseIsOver:t.mouseIsOver}}}(D||(t.HoverFeedbackAction=D={})),function(e){e.KIND="requestExportSvg",e.create=function(t){return{kind:e.KIND,requestId:s(),options:t}}}(N||(t.RequestExportSvgAction=N={})),function(e){e.KIND="exportSvg",e.create=function(t,n,o){return{kind:e.KIND,svg:t,responseId:n,options:o}}}(L||(t.ExportSvgAction=L={})),function(e){e.KIND="createElement",e.create=function(t,n){return{kind:e.KIND,elementSchema:t,containerId:n.containerId}}}(B||(t.CreateElementAction=B={})),function(e){e.KIND="delete",e.create=function(t){return{kind:e.KIND,elementIds:t}}}(k||(t.DeleteElementAction=k={})),function(e){e.KIND="applyLabelEdit",e.create=function(t,n){return{kind:e.KIND,labelId:t,text:n}}}(F||(t.ApplyLabelEditAction=F={})),function(e){e.KIND="reconnect",e.create=function(t){return{kind:e.KIND,routableId:t.routableId,newSourceId:t.newSourceId,newTargetId:t.newTargetId}}}(V||(t.ReconnectAction=V={}))},7059:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;const o=n(732);t.BindingOnSyntax=class{_binding;constructor(e){this._binding=e}onActivation(e){return this._binding.onActivation=e,new o.BindingWhenSyntax(this._binding)}onDeactivation(e){return this._binding.onDeactivation=e,new o.BindingWhenSyntax(this._binding)}}},7070:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ModelRequestCommand=void 0;const r=n(2650),s=n(2041),a=n(3194);let c=class extends a.SystemCommand{execute(e){const t=this.retrieveResult(e);return this.actionDispatcher.dispatch(t),{model:e.root,modelChanged:!1}}undo(e){return{model:e.root,modelChanged:!1}}redo(e){return{model:e.root,modelChanged:!1}}};t.ModelRequestCommand=c,o([(0,r.inject)(s.TYPES.IActionDispatcher),i("design:type",Object)],c.prototype,"actionDispatcher",void 0),t.ModelRequestCommand=c=o([(0,r.injectable)()],c)},7154:(e,t)=>{"use strict";function n(e){return"object"==typeof e&&null!==e}Object.defineProperty(t,"__esModule",{value:!0}),t.safeAssign=t.hasOwnProperty=t.isObject=void 0,t.isObject=n,t.hasOwnProperty=function(e,t,o){if(!n(e))return!1;if(Array.isArray(t))for(const n of t){if(!Object.prototype.hasOwnProperty.call(e,n))return!1;if("string"==typeof o&&typeof e[n]!==o)return!1;if("function"==typeof o&&!o(e[n]))return!1}else{if(!Object.prototype.hasOwnProperty.call(e,t))return!1;if("string"==typeof o)return typeof e[t]===o;if("function"==typeof o)return o(e[t])}return!0},t.safeAssign=function(e,t){return Object.assign(e,t)}},7161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;const o=n(9117),i=n(1402);t.BindingInSyntax=class{_binding;constructor(e){this._binding=e}inRequestScope(){return this._binding.scope=o.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)}inSingletonScope(){return this._binding.scope=o.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)}inTransientScope(){return this._binding.scope=o.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)}}},7174:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(3491),s=n(1094),a=new o.ContainerModule(((e,t,n)=>{(0,s.configureCommand)({bind:e,isBound:n},r.SelectCommand),(0,s.configureCommand)({bind:e,isBound:n},r.SelectAllCommand),(0,s.configureCommand)({bind:e,isBound:n},r.GetSelectionCommand),e(r.SelectKeyboardListener).toSelf().inSingletonScope(),e(i.TYPES.KeyListener).toService(r.SelectKeyboardListener),e(r.SelectMouseListener).toSelf().inSingletonScope(),e(i.TYPES.MouseListener).toService(r.SelectMouseListener)}));t.default=a},7196:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.limit=t.intersection=t.PointToPointLine=t.Diamond=void 0;const o=n(3807);t.Diamond=class{constructor(e){this.bounds=e}get topPoint(){return{x:this.bounds.x+this.bounds.width/2,y:this.bounds.y}}get rightPoint(){return{x:this.bounds.x+this.bounds.width,y:this.bounds.y+this.bounds.height/2}}get bottomPoint(){return{x:this.bounds.x+this.bounds.width/2,y:this.bounds.y+this.bounds.height}}get leftPoint(){return{x:this.bounds.x,y:this.bounds.y+this.bounds.height/2}}get topRightSideLine(){return new i(this.topPoint,this.rightPoint)}get topLeftSideLine(){return new i(this.topPoint,this.leftPoint)}get bottomRightSideLine(){return new i(this.bottomPoint,this.rightPoint)}get bottomLeftSideLine(){return new i(this.bottomPoint,this.leftPoint)}closestSideLine(e){const t=o.Bounds.center(this.bounds);return e.x>t.x?e.y>t.y?this.bottomRightSideLine:this.topRightSideLine:e.y>t.y?this.bottomLeftSideLine:this.topLeftSideLine}};class i{constructor(e,t){this.p1=e,this.p2=t}get a(){return this.p1.y-this.p2.y}get b(){return this.p2.x-this.p1.x}get c(){return this.p2.x*this.p1.y-this.p1.x*this.p2.y}get angle(){return Math.atan2(-this.a,this.b)}get slope(){if(0!==this.b)return this.a/this.b}get slopeOrMax(){return void 0===this.slope?Number.MAX_SAFE_INTEGER:this.slope}get direction(){const e=(0,o.toDegrees)(this.angle),t=e<0?360+e:e;if(90===t)return"south";if(0===t||360===t)return"east";if(270===t)return"north";if(180===t)return"west";if(t>0&&t<90)return"south-east";if(t>90&&t<180)return"south-west";if(t>180&&t<270)return"north-west";if(t>270&&t<360)return"north-east";throw new Error(`Cannot determine direction of line (${this.p1.x},${this.p1.y}) to (${this.p2.x},${this.p2.y})`)}intersection(e){if(this.hasIndistinctPoints(e))return;const t=this.p1.x,n=this.p1.y,o=this.p2.x,i=this.p2.y,r=e.p1.x,s=e.p1.y,a=e.p2.x,c=e.p2.y,d=(c-s)*(o-t)-(a-r)*(i-n);if(0===d)return;const l=(a-r)*(n-s)-(c-s)*(t-r),u=(o-t)*(n-s)-(i-n)*(t-r);if(0===l&&0===u)return;const h=l/d,p=u/d;return h<0||h>1||p<0||p>1?void 0:{x:t+h*(o-t),y:n+h*(i-n)}}hasIndistinctPoints(e){return o.Point.equals(this.p1,e.p1)||o.Point.equals(this.p1,e.p2)||o.Point.equals(this.p2,e.p1)||o.Point.equals(this.p2,e.p2)}}t.PointToPointLine=i,t.intersection=function(e,t){return{x:(e.c*t.b-t.c*e.b)/(e.a*t.b-t.a*e.b),y:(e.a*t.c-t.a*e.c)/(e.a*t.b-t.a*e.b)}},t.limit=function(e,t){return e<t.min?t.min:e>t.max?t.max:e}},7259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManhattanEdgeRouter=void 0;const o=n(5017),i=n(54),r=n(1011),s=n(5778);class a extends r.AbstractEdgeRouter{get kind(){return a.KIND}getOptions(e){return{standardDistance:20,minimalPointDistance:3,selfEdgeOffset:.25}}route(e){if(!e.source||!e.target)return[];const t=this.createRoutedCorners(e),n=t[0]||(0,i.translatePoint)(o.Bounds.center(e.target.bounds),e.target.parent,e.parent),r=this.getTranslatedAnchor(e.source,n,e.parent,e,e.sourceAnchorCorrection),s=t[t.length-1]||(0,i.translatePoint)(o.Bounds.center(e.source.bounds),e.source.parent,e.parent),a=this.getTranslatedAnchor(e.target,s,e.parent,e,e.targetAnchorCorrection);if(!r||!a)return[];const c=[];return c.push(Object.assign({kind:"source"},r)),t.forEach((e=>c.push(e))),c.push(Object.assign({kind:"target"},a)),c}createRoutedCorners(e){const t=new r.DefaultAnchors(e.source,e.parent,"source"),n=new r.DefaultAnchors(e.target,e.parent,"target");if(e.routingPoints.length>0){const t=e.routingPoints.slice();if(this.cleanupRoutingPoints(e,t,!1,!0),t.length>0)return t.map(((e,t)=>Object.assign({kind:"linear",pointIndex:t},e)))}const o=this.getOptions(e);return this.calculateDefaultCorners(e,t,n,o).map((e=>Object.assign({kind:"linear"},e)))}createRoutingHandles(e){const t=this.route(e);if(this.commitRoute(e,t),t.length>0){this.addHandle(e,"source","routing-point",-2);for(let n=0;n<t.length-1;++n)this.addHandle(e,"manhattan-50%","volatile-routing-point",n-1);this.addHandle(e,"target","routing-point",t.length-2)}}getInnerHandlePosition(e,t,n){const i=this.getFraction(n.kind);if(void 0!==i){const{start:r,end:s}=this.findRouteSegment(e,t,n.pointIndex);if(void 0!==r&&void 0!==s)return o.Point.linear(r,s,i)}}getFraction(e){if("manhattan-50%"===e)return.5}applyInnerHandleMoves(e,t){const n=this.route(e),i=e.routingPoints,r=this.getOptions(e).minimalPointDistance;t.forEach((e=>{const t=e.handle,s=t.pointIndex,a=this.correctX(i,s,e.toPosition.x,r),c=this.correctY(i,s,e.toPosition.y,r);"manhattan-50%"===t.kind&&(s<0?0===i.length?(i.push({x:a,y:c}),t.pointIndex=0):(0,o.almostEquals)(n[0].x,n[1].x)?this.alignX(i,0,a):this.alignY(i,0,c):s<i.length-1?(0,o.almostEquals)(i[s].x,i[s+1].x)?(this.alignX(i,s,a),this.alignX(i,s+1,a)):(this.alignY(i,s,c),this.alignY(i,s+1,c)):(0,o.almostEquals)(n[n.length-2].x,n[n.length-1].x)?this.alignX(i,i.length-1,a):this.alignY(i,i.length-1,c))}))}correctX(e,t,n,o){return t>0&&Math.abs(n-e[t-1].x)<o?e[t-1].x:t<e.length-2&&Math.abs(n-e[t+2].x)<o?e[t+2].x:n}alignX(e,t,n){t>=0&&t<e.length&&(e[t]={x:n,y:e[t].y})}correctY(e,t,n,o){return t>0&&Math.abs(n-e[t-1].y)<o?e[t-1].y:t<e.length-2&&Math.abs(n-e[t+2].y)<o?e[t+2].y:n}alignY(e,t,n){t>=0&&t<e.length&&(e[t]={x:e[t].x,y:n})}cleanupRoutingPoints(e,t,n,i){const s=new r.DefaultAnchors(e.source,e.parent,"source"),a=new r.DefaultAnchors(e.target,e.parent,"target");if(!this.resetRoutingPointsOnReconnect(e,t,n,s,a)){for(let i=0;i<t.length&&o.Bounds.includes(s.bounds,t[i]);++i)t.splice(0,1),n&&this.removeHandle(e,-1);for(let i=t.length-1;i>=0&&o.Bounds.includes(a.bounds,t[i]);--i)t.splice(i,1),n&&this.removeHandle(e,i);if(t.length>=2){const i=this.getOptions(e);for(let r=t.length-2;r>=0;--r)o.Point.manhattanDistance(t[r],t[r+1])<i.minimalPointDistance&&(t.splice(r,2),--r,n&&(this.removeHandle(e,r-1),this.removeHandle(e,r)))}i&&(this.addAdditionalCorner(e,t,s,a,n),this.addAdditionalCorner(e,t,a,s,n),this.manhattanify(e,t))}}removeHandle(e,t){const n=[];e.children.forEach((e=>{e instanceof s.SRoutingHandleImpl&&(e.pointIndex>t?--e.pointIndex:e.pointIndex===t&&n.push(e))})),n.forEach((t=>e.remove(t)))}addAdditionalCorner(e,t,n,i,a){if(0===t.length)return;const c="source"===n.kind?t[0]:t[t.length-1],d="source"===n.kind?0:t.length,l=d-("source"===n.kind?1:0);let u;if(t.length>1)u=0===d?(0,o.almostEquals)(t[0].x,t[1].x):(0,o.almostEquals)(t[t.length-1].x,t[t.length-2].x);else{const e=i.getNearestSide(c);u=e===r.Side.TOP||e===r.Side.BOTTOM}if(u){if(c.y<n.get(r.Side.TOP).y||c.y>n.get(r.Side.BOTTOM).y){const o={x:n.get(r.Side.TOP).x,y:c.y};t.splice(d,0,o),a&&(e.children.forEach((e=>{e instanceof s.SRoutingHandleImpl&&e.pointIndex>=l&&++e.pointIndex})),this.addHandle(e,"manhattan-50%","volatile-routing-point",l))}}else if(c.x<n.get(r.Side.LEFT).x||c.x>n.get(r.Side.RIGHT).x){const o={x:c.x,y:n.get(r.Side.LEFT).y};t.splice(d,0,o),a&&(e.children.forEach((e=>{e instanceof s.SRoutingHandleImpl&&e.pointIndex>=l&&++e.pointIndex})),this.addHandle(e,"manhattan-50%","volatile-routing-point",l))}}manhattanify(e,t){for(let e=1;e<t.length;++e){const n=Math.abs(t[e-1].x-t[e].x)<1,o=Math.abs(t[e-1].y-t[e].y)<1;n||o||(t.splice(e,0,{x:t[e-1].x,y:t[e].y}),++e)}}calculateDefaultCorners(e,t,n,o){const i=super.calculateDefaultCorners(e,t,n,o);if(i.length>0)return i;const s=this.getBestConnectionAnchors(e,t,n,o),a=s.source,c=s.target,d=[],l=t.get(a);let u=n.get(c);switch(a){case r.Side.RIGHT:switch(c){case r.Side.BOTTOM:case r.Side.TOP:d.push({x:u.x,y:l.y});break;case r.Side.RIGHT:d.push({x:Math.max(l.x,u.x)+1.5*o.standardDistance,y:l.y}),d.push({x:Math.max(l.x,u.x)+1.5*o.standardDistance,y:u.y});break;case r.Side.LEFT:u.y!==l.y&&(d.push({x:(l.x+u.x)/2,y:l.y}),d.push({x:(l.x+u.x)/2,y:u.y}))}break;case r.Side.LEFT:switch(c){case r.Side.BOTTOM:case r.Side.TOP:d.push({x:u.x,y:l.y});break;default:u=n.get(r.Side.RIGHT),u.y!==l.y&&(d.push({x:(l.x+u.x)/2,y:l.y}),d.push({x:(l.x+u.x)/2,y:u.y}))}break;case r.Side.TOP:switch(c){case r.Side.RIGHT:u.x-l.x>0?(d.push({x:l.x,y:l.y-o.standardDistance}),d.push({x:u.x+1.5*o.standardDistance,y:l.y-o.standardDistance}),d.push({x:u.x+1.5*o.standardDistance,y:u.y})):d.push({x:l.x,y:u.y});break;case r.Side.LEFT:u.x-l.x<0?(d.push({x:l.x,y:l.y-o.standardDistance}),d.push({x:u.x-1.5*o.standardDistance,y:l.y-o.standardDistance}),d.push({x:u.x-1.5*o.standardDistance,y:u.y})):d.push({x:l.x,y:u.y});break;case r.Side.TOP:d.push({x:l.x,y:Math.min(l.y,u.y)-1.5*o.standardDistance}),d.push({x:u.x,y:Math.min(l.y,u.y)-1.5*o.standardDistance});break;case r.Side.BOTTOM:u.x!==l.x&&(d.push({x:l.x,y:(l.y+u.y)/2}),d.push({x:u.x,y:(l.y+u.y)/2}))}break;case r.Side.BOTTOM:switch(c){case r.Side.RIGHT:u.x-l.x>0?(d.push({x:l.x,y:l.y+o.standardDistance}),d.push({x:u.x+1.5*o.standardDistance,y:l.y+o.standardDistance}),d.push({x:u.x+1.5*o.standardDistance,y:u.y})):d.push({x:l.x,y:u.y});break;case r.Side.LEFT:u.x-l.x<0?(d.push({x:l.x,y:l.y+o.standardDistance}),d.push({x:u.x-1.5*o.standardDistance,y:l.y+o.standardDistance}),d.push({x:u.x-1.5*o.standardDistance,y:u.y})):d.push({x:l.x,y:u.y});break;default:u=n.get(r.Side.TOP),u.x!==l.x&&(d.push({x:l.x,y:(l.y+u.y)/2}),d.push({x:u.x,y:(l.y+u.y)/2}))}}return d}getBestConnectionAnchors(e,t,n,i){let s=t.get(r.Side.RIGHT),a=n.get(r.Side.LEFT);if(a.x-s.x>i.standardDistance)return{source:r.Side.RIGHT,target:r.Side.LEFT};if(s=t.get(r.Side.LEFT),a=n.get(r.Side.RIGHT),s.x-a.x>i.standardDistance)return{source:r.Side.LEFT,target:r.Side.RIGHT};if(s=t.get(r.Side.TOP),a=n.get(r.Side.BOTTOM),s.y-a.y>i.standardDistance)return{source:r.Side.TOP,target:r.Side.BOTTOM};if(s=t.get(r.Side.BOTTOM),a=n.get(r.Side.TOP),a.y-s.y>i.standardDistance)return{source:r.Side.BOTTOM,target:r.Side.TOP};if(s=t.get(r.Side.RIGHT),a=n.get(r.Side.TOP),a.x-s.x>.5*i.standardDistance&&a.y-s.y>i.standardDistance)return{source:r.Side.RIGHT,target:r.Side.TOP};if(a=n.get(r.Side.BOTTOM),a.x-s.x>.5*i.standardDistance&&s.y-a.y>i.standardDistance)return{source:r.Side.RIGHT,target:r.Side.BOTTOM};if(s=t.get(r.Side.LEFT),a=n.get(r.Side.BOTTOM),s.x-a.x>.5*i.standardDistance&&s.y-a.y>i.standardDistance)return{source:r.Side.LEFT,target:r.Side.BOTTOM};if(a=n.get(r.Side.TOP),s.x-a.x>.5*i.standardDistance&&a.y-s.y>i.standardDistance)return{source:r.Side.LEFT,target:r.Side.TOP};if(s=t.get(r.Side.TOP),a=n.get(r.Side.RIGHT),s.y-a.y>.5*i.standardDistance&&s.x-a.x>i.standardDistance)return{source:r.Side.TOP,target:r.Side.RIGHT};if(a=n.get(r.Side.LEFT),s.y-a.y>.5*i.standardDistance&&a.x-s.x>i.standardDistance)return{source:r.Side.TOP,target:r.Side.LEFT};if(s=t.get(r.Side.BOTTOM),a=n.get(r.Side.RIGHT),a.y-s.y>.5*i.standardDistance&&s.x-a.x>i.standardDistance)return{source:r.Side.BOTTOM,target:r.Side.RIGHT};if(a=n.get(r.Side.LEFT),a.y-s.y>.5*i.standardDistance&&a.x-s.x>i.standardDistance)return{source:r.Side.BOTTOM,target:r.Side.LEFT};if(s=t.get(r.Side.TOP),a=n.get(r.Side.TOP),!o.Bounds.includes(n.bounds,s)&&!o.Bounds.includes(t.bounds,a))if(s.y-a.y<0){if(Math.abs(s.x-a.x)>(t.bounds.width+i.standardDistance)/2)return{source:r.Side.TOP,target:r.Side.TOP}}else if(Math.abs(s.x-a.x)>n.bounds.width/2)return{source:r.Side.TOP,target:r.Side.TOP};if(s=t.get(r.Side.RIGHT),a=n.get(r.Side.RIGHT),!o.Bounds.includes(n.bounds,s)&&!o.Bounds.includes(t.bounds,a))if(s.x-a.x>0){if(Math.abs(s.y-a.y)>(t.bounds.height+i.standardDistance)/2)return{source:r.Side.RIGHT,target:r.Side.RIGHT}}else if(Math.abs(s.y-a.y)>n.bounds.height/2)return{source:r.Side.RIGHT,target:r.Side.RIGHT};return s=t.get(r.Side.TOP),a=n.get(r.Side.RIGHT),o.Bounds.includes(n.bounds,s)||o.Bounds.includes(t.bounds,a)?(a=n.get(r.Side.LEFT),o.Bounds.includes(n.bounds,s)||o.Bounds.includes(t.bounds,a)?(s=t.get(r.Side.BOTTOM),a=n.get(r.Side.RIGHT),o.Bounds.includes(n.bounds,s)||o.Bounds.includes(t.bounds,a)?(a=n.get(r.Side.LEFT),o.Bounds.includes(n.bounds,s)||o.Bounds.includes(t.bounds,a)?{source:r.Side.RIGHT,target:r.Side.BOTTOM}:{source:r.Side.BOTTOM,target:r.Side.LEFT}):{source:r.Side.BOTTOM,target:r.Side.RIGHT}):{source:r.Side.TOP,target:r.Side.LEFT}):{source:r.Side.TOP,target:r.Side.RIGHT}}}t.ManhattanEdgeRouter=a,a.KIND="manhattan"},7305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActualCode=t.matchesKeystroke=void 0;const o=n(9678);function i(e){if(e.keyCode){const t=r[e.keyCode];if(void 0!==t)return t}return e.code}t.matchesKeystroke=function(e,t,...n){if(i(e)!==t)return!1;if((0,o.isMac)()){if(e.ctrlKey!==n.findIndex((e=>"ctrl"===e))>=0)return!1;if(e.metaKey!==n.findIndex((e=>"meta"===e||"ctrlCmd"===e))>=0)return!1}else{if(e.ctrlKey!==n.findIndex((e=>"ctrl"===e||"ctrlCmd"===e))>=0)return!1;if(e.metaKey!==n.findIndex((e=>"meta"===e))>=0)return!1}return e.altKey===n.findIndex((e=>"alt"===e))>=0&&e.shiftKey===n.findIndex((e=>"shift"===e))>=0},t.getActualCode=i;const r=new Array(256);(()=>{function e(e,t){void 0===r[t]&&(r[t]=e)}e("Pause",3),e("Backspace",8),e("Tab",9),e("Enter",13),e("ShiftLeft",16),e("ShiftRight",16),e("ControlLeft",17),e("ControlRight",17),e("AltLeft",18),e("AltRight",18),e("CapsLock",20),e("Escape",27),e("Space",32),e("PageUp",33),e("PageDown",34),e("End",35),e("Home",36),e("ArrowLeft",37),e("ArrowUp",38),e("ArrowRight",39),e("ArrowDown",40),e("Insert",45),e("Delete",46),e("Digit1",49),e("Digit2",50),e("Digit3",51),e("Digit4",52),e("Digit5",53),e("Digit6",54),e("Digit7",55),e("Digit8",56),e("Digit9",57),e("Digit0",48),e("KeyA",65),e("KeyB",66),e("KeyC",67),e("KeyD",68),e("KeyE",69),e("KeyF",70),e("KeyG",71),e("KeyH",72),e("KeyI",73),e("KeyJ",74),e("KeyK",75),e("KeyL",76),e("KeyM",77),e("KeyN",78),e("KeyO",79),e("KeyP",80),e("KeyQ",81),e("KeyR",82),e("KeyS",83),e("KeyT",84),e("KeyU",85),e("KeyV",86),e("KeyW",87),e("KeyX",88),e("KeyY",89),e("KeyZ",90),e("OSLeft",91),e("MetaLeft",91),e("OSRight",92),e("MetaRight",92),e("ContextMenu",93),e("Numpad0",96),e("Numpad1",97),e("Numpad2",98),e("Numpad3",99),e("Numpad4",100),e("Numpad5",101),e("Numpad6",102),e("Numpad7",103),e("Numpad8",104),e("Numpad9",105),e("NumpadMultiply",106),e("NumpadAdd",107),e("NumpadSeparator",108),e("NumpadSubtract",109),e("NumpadDecimal",110),e("NumpadDivide",111),e("F1",112),e("F2",113),e("F3",114),e("F4",115),e("F5",116),e("F6",117),e("F7",118),e("F8",119),e("F9",120),e("F10",121),e("F11",122),e("F12",123),e("F13",124),e("F14",125),e("F15",126),e("F16",127),e("F17",128),e("F18",129),e("F19",130),e("F20",131),e("F21",132),e("F22",133),e("F23",134),e("F24",135),e("NumLock",144),e("ScrollLock",145),e("Semicolon",186),e("Equal",187),e("Comma",188),e("Minus",189),e("Period",190),e("Slash",191),e("Backquote",192),e("IntlRo",193),e("BracketLeft",219),e("Backslash",220),e("BracketRight",221),e("Quote",222),e("IntlYen",255)})()},7337:function(e,t,n){"use strict";var o,i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandPaletteKeyListener=t.CommandPalette=void 0;const a=n(2650),c=n(7020),d=n(1492),l=n(2041),u=n(4556),h=n(2814),p=n(3686),f=n(8245),g=n(1929),m=n(8302),y=n(7305),v=n(5855),b=n(9882),S=n(5777),P=n(5677),_=s(n(8609));let E=o=class extends u.AbstractUIExtension{constructor(){super(...arguments),this.loadingIndicatorClasses=(0,g.codiconCSSClasses)("loading",!1,!0,["loading"]),this.xOffset=20,this.yOffset=20,this.defaultWidth=400,this.debounceWaitMs=100,this.noCommandsMsg="No commands available",this.paletteIndex=0}id(){return o.ID}containerClass(){return"command-palette"}show(e,...t){super.show(e,...t),this.paletteIndex=0,this.contextActions=void 0,this.inputElement.value="",this.autoCompleteResult=(0,_.default)(this.autocompleteSettings(e)),this.inputElement.focus()}initializeContents(e){e.style.position="absolute",this.inputElement=document.createElement("input"),this.inputElement.style.width="100%",this.inputElement.addEventListener("keydown",(e=>this.hideIfEscapeEvent(e))),this.inputElement.addEventListener("keydown",(e=>this.cylceIfInvokePaletteKey(e))),this.inputElement.onblur=()=>window.setTimeout((()=>this.hide()),200),e.appendChild(this.inputElement)}hideIfEscapeEvent(e){(0,y.matchesKeystroke)(e,"Escape")&&this.hide()}cylceIfInvokePaletteKey(e){o.isInvokePaletteKey(e)&&this.cycle()}cycle(){this.contextActions=void 0,this.paletteIndex++}onBeforeShow(e,t,...n){let o=this.xOffset,i=this.yOffset;const r=(0,m.toArray)(t.index.all().filter((e=>(0,b.isSelectable)(e)&&e.selected)));if(1===r.length){const e=(0,v.getAbsoluteClientBounds)(r[0],this.domHelper,this.viewerOptions);o+=e.x+e.width,i+=e.y}else{const e=(0,v.getAbsoluteClientBounds)(t,this.domHelper,this.viewerOptions);o+=e.x,i+=e.y}e.style.left=`${o}px`,e.style.top=`${i}px`,e.style.width=`${this.defaultWidth}px`}autocompleteSettings(e){return{input:this.inputElement,emptyMsg:this.noCommandsMsg,className:"command-palette-suggestions",debounceWaitMs:this.debounceWaitMs,showOnFocus:!0,minLength:-1,fetch:(t,n)=>this.updateAutoCompleteActions(n,t,e),onSelect:e=>this.onSelect(e),render:(e,t)=>this.renderLabeledActionSuggestion(e,t),customize:(e,t,n,o)=>{this.customizeSuggestionContainer(n,t,o)}}}onSelect(e){this.executeAction(e),this.hide()}updateAutoCompleteActions(e,t,n){this.onLoading(),this.contextActions?(e(this.filterActions(t,this.contextActions)),this.onLoaded("success")):this.actionProviderRegistry.getActions(n,t,this.mousePositionTracker.lastPositionOnDiagram,this.paletteIndex).then((n=>{this.contextActions=n,e(this.filterActions(t,n)),this.onLoaded("success")})).catch((e=>{this.logger.error(this,"Failed to obtain actions from command palette action providers",e),this.onLoaded("error")}))}onLoading(){this.loadingIndicator&&this.containerElement.contains(this.loadingIndicator)||(this.loadingIndicator=document.createElement("span"),this.loadingIndicator.classList.add(...this.loadingIndicatorClasses),this.containerElement.appendChild(this.loadingIndicator))}onLoaded(e){this.containerElement.contains(this.loadingIndicator)&&this.containerElement.removeChild(this.loadingIndicator)}renderLabeledActionSuggestion(e,t){const n=document.createElement("div"),o=function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(t).split(" ").join("|"),i=new RegExp(o,"gi");return e.icon&&this.renderIcon(n,e.icon),t.length>0?n.innerHTML+=e.label.replace(i,(e=>"<em>"+e+"</em>")).replace(/ /g,"&nbsp;"):n.innerHTML+=e.label.replace(/ /g,"&nbsp;"),n}renderIcon(e,t){e.innerHTML+=`<span class="icon ${this.getCodicon(t)}"></span>`}getFontAwesomeIcon(e){return`fa fa-${e}`}getCodicon(e){return(0,g.codiconCSSString)(e)}filterActions(e,t){return(0,m.toArray)(t.filter((t=>{const n=t.label.toLowerCase();return e.split(" ").every((e=>-1!==n.indexOf(e.toLowerCase())))})))}customizeSuggestionContainer(e,t,n){e.style.position="fixed",this.containerElement&&this.containerElement.appendChild(e)}hide(){super.hide(),this.autoCompleteResult&&this.autoCompleteResult.destroy()}executeAction(e){this.actionDispatcherProvider().then((t=>t.dispatchAll(function(e){return(0,d.isLabeledAction)(e)?e.actions:(0,c.isAction)(e)?[e]:[]}(e)))).catch((e=>this.logger.error(this,"No action dispatcher available to execute command palette action",e)))}};t.CommandPalette=E,E.ID="command-palette",E.isInvokePaletteKey=e=>(0,y.matchesKeystroke)(e,"Space","ctrl"),i([(0,a.inject)(l.TYPES.IActionDispatcherProvider),r("design:type",Function)],E.prototype,"actionDispatcherProvider",void 0),i([(0,a.inject)(l.TYPES.ICommandPaletteActionProviderRegistry),r("design:type",S.CommandPaletteActionProviderRegistry)],E.prototype,"actionProviderRegistry",void 0),i([(0,a.inject)(l.TYPES.ViewerOptions),r("design:type",Object)],E.prototype,"viewerOptions",void 0),i([(0,a.inject)(l.TYPES.DOMHelper),r("design:type",p.DOMHelper)],E.prototype,"domHelper",void 0),i([(0,a.inject)(P.MousePositionTracker),r("design:type",P.MousePositionTracker)],E.prototype,"mousePositionTracker",void 0),t.CommandPalette=E=o=i([(0,a.injectable)()],E);class w extends f.KeyListener{keyDown(e,t){if((0,y.matchesKeystroke)(t,"Escape"))return[h.SetUIExtensionVisibilityAction.create({extensionId:E.ID,visible:!1,contextElementsId:[]})];if(E.isInvokePaletteKey(t)){const t=(0,m.toArray)(e.index.all().filter((e=>(0,b.isSelectable)(e)&&e.selected)).map((e=>e.id)));return[h.SetUIExtensionVisibilityAction.create({extensionId:E.ID,visible:!0,contextElementsId:t})]}return[]}}t.CommandPaletteKeyListener=w},7353:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveToScope=t.tryGetFromScope=void 0;const o=n(9117),i=n(2576);t.tryGetFromScope=(e,t)=>t.scope===o.BindingScopeEnum.Singleton&&t.activated?t.cache:t.scope===o.BindingScopeEnum.Request&&e.has(t.id)?e.get(t.id):null,t.saveToScope=(e,t,n)=>{t.scope===o.BindingScopeEnum.Singleton&&s(t,n),t.scope===o.BindingScopeEnum.Request&&r(e,t,n)};const r=(e,t,n)=>{e.has(t.id)||e.set(t.id,n)},s=(e,t)=>{e.cache=t,e.activated=!0,(0,i.isPromise)(t)&&a(e,t)},a=async(e,t)=>{try{const n=await t;e.cache=n}catch(t){throw e.cache=null,e.activated=!1,t}}},7426:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLegacyMetadata=function(e){return e.kind===i.ClassElementMetadataKind.unmanaged?[{key:o.UNMANAGED_TAG,value:!0}]:function(e){const t=[r(e)];void 0!==e.name&&t.push({key:o.NAMED_TAG,value:e.name}),e.optional&&t.push({key:o.OPTIONAL_TAG,value:!0});for(const[n,o]of e.tags)t.push({key:n,value:o});return void 0!==e.targetName&&t.push({key:o.NAME_TAG,value:e.targetName}),t}(e)};const o=n(3313),i=n(6277);function r(e){let t;switch(e.kind){case i.ClassElementMetadataKind.multipleInjection:t={key:o.MULTI_INJECT_TAG,value:e.value};break;case i.ClassElementMetadataKind.singleInjection:t={key:o.INJECT_TAG,value:e.value}}return t}},7445:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractLayout=void 0;const i=n(5017),r=n(166),s=n(5855),a=n(2650);let c=class{layout(e,t){const n=t.getBoundsData(e),o=this.getLayoutOptions(e),i=this.getChildrenSize(e,o,t),r=o.paddingFactor*(o.resizeContainer?Math.max(i.width,o.minWidth):Math.max(0,this.getFixedContainerBounds(e,o,t).width)-o.paddingLeft-o.paddingRight),s=o.paddingFactor*(o.resizeContainer?Math.max(i.height,o.minHeight):Math.max(0,this.getFixedContainerBounds(e,o,t).height)-o.paddingTop-o.paddingBottom);if(r>0&&s>0){const i=this.layoutChildren(e,t,o,r,s);n.bounds=this.getFinalContainerBounds(e,i,o,r,s),n.boundsChanged=!0}}getFinalContainerBounds(e,t,n,o,i){return{x:e.bounds.x,y:e.bounds.y,width:Math.max(n.minWidth,o+n.paddingLeft+n.paddingRight),height:Math.max(n.minHeight,i+n.paddingTop+n.paddingBottom)}}getFixedContainerBounds(e,t,n){let o=e;for(;;){if((0,s.isBoundsAware)(o)){const e=o.bounds;if((0,s.isLayoutContainer)(o)&&t.resizeContainer&&n.log.error(o,"Resizable container found while detecting fixed bounds"),i.Dimension.isValid(e))return e}if(!(o instanceof r.SChildElementImpl))return n.log.error(o,"Cannot detect fixed bounds"),i.Bounds.EMPTY;o=o.parent}}layoutChildren(e,t,n,o,r){let a={x:n.paddingLeft+.5*(o-o/n.paddingFactor),y:n.paddingTop+.5*(r-r/n.paddingFactor)};return e.children.forEach((e=>{if((0,s.isLayoutableChild)(e)){const s=t.getBoundsData(e),c=s.bounds,d=this.getChildLayoutOptions(e,n);void 0!==c&&i.Dimension.isValid(c)&&(a=this.layoutChild(e,s,c,d,n,a,o,r))}})),a}getDx(e,t,n){switch(e){case"left":return 0;case"center":return.5*(n-t.width);case"right":return n-t.width}}getDy(e,t,n){switch(e){case"top":return 0;case"center":return.5*(n-t.height);case"bottom":return n-t.height}}getChildLayoutOptions(e,t){const n=e.layoutOptions;return void 0===n?t:this.spread(t,n)}getLayoutOptions(e){let t=e;const n=[];for(;void 0!==t;){const e=t.layoutOptions;if(void 0!==e&&n.push(e),!(t instanceof r.SChildElementImpl))break;t=t.parent}return n.reverse().reduce(((e,t)=>this.spread(e,t)),this.getDefaultLayoutOptions())}};t.AbstractLayout=c,t.AbstractLayout=c=o([(0,a.injectable)()],c)},7508:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=function(e,t,n,o){!function(e,t){e.scope!==c.BindingScopeEnum.Singleton&&function(e,t){const n=`Class cannot be instantiated in ${e.scope===c.BindingScopeEnum.Request?"request":"transient"} scope.`;if("function"==typeof e.onDeactivation)throw new Error((0,a.ON_DEACTIVATION_ERROR)(t.name,n));if(Reflect.hasMetadata(d.PRE_DESTROY,t))throw new Error((0,a.PRE_DESTROY_ERROR)(t.name,n))}(e,t)}(e,t);const i=function(e,t,n){let o;if(t.length>0){const i=function(e,t){return e.reduce(((e,n)=>{const o=t(n);return n.target.type===c.TargetTypeEnum.ConstructorArgument?e.constructorInjections.push(o):(e.propertyRequests.push(n),e.propertyInjections.push(o)),e.isAsync||(e.isAsync=(0,l.isPromiseOrContainsPromise)(o)),e}),{constructorInjections:[],isAsync:!1,propertyInjections:[],propertyRequests:[]})}(t,n),r={...i,constr:e};o=i.isAsync?async function(e){const t=await h(e.constructorInjections),n=await h(e.propertyInjections);return u({...e,constructorInjections:t,propertyInjections:n})}(r):u(r)}else o=new e;return o}(t,n,o);return(0,l.isPromise)(i)?i.then((e=>p(t,e))):p(t,i)};const a=n(5007),c=n(9117),d=s(n(9466)),l=n(2576);function u(e){const t=new e.constr(...e.constructorInjections);return e.propertyRequests.forEach(((n,o)=>{const i=n.target.identifier,r=e.propertyInjections[o];n.target.isOptional()&&void 0===r||(t[i]=r)})),t}async function h(e){const t=[];for(const n of e)Array.isArray(n)?t.push(Promise.all(n)):t.push(n);return Promise.all(t)}function p(e,t){const n=function(e,t){if(Reflect.hasMetadata(d.POST_CONSTRUCT,e)){const n=Reflect.getMetadata(d.POST_CONSTRUCT,e);try{return t[n.value]?.()}catch(t){if(t instanceof Error)throw new Error((0,a.POST_CONSTRUCT_ERROR)(e.name,t.message))}}}(e,t);return(0,l.isPromise)(n)?n.then((()=>t)):t}},7520:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataPropertiesFromMetadataReader=function(e,t){const n=t.getPropertiesMetadata(e),i=new Map;for(const t of Reflect.ownKeys(n)){const r=n[t];i.set(t,(0,o.getPropertyMetadataFromLegacyMetadata)(e,t,r))}return i};const o=n(3498)},7559:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InitializeCanvasBoundsCommand=t.InitializeCanvasBoundsAction=t.CanvasBoundsInitializer=void 0;const s=n(2650),a=n(5017),c=n(2041),d=n(166),l=n(3194),u=n(9678);let h=class{decorate(e,t){return t instanceof d.SModelRootImpl&&!a.Dimension.isValid(t.canvasBounds)&&(this.rootAndVnode=[t,e]),e}postUpdate(){if(void 0!==this.rootAndVnode){const e=this.rootAndVnode[1].elm,t=this.rootAndVnode[0].canvasBounds;if(void 0!==e){const n=this.getBoundsInPage(e);(0,a.almostEquals)(n.x,t.x)&&(0,a.almostEquals)(n.y,t.y)&&(0,a.almostEquals)(n.width,t.width)&&(0,a.almostEquals)(n.height,t.width)||this.actionDispatcher.dispatch(p.create(n))}this.rootAndVnode=void 0}}getBoundsInPage(e){const t=e.getBoundingClientRect(),n=(0,u.getWindowScroll)();return{x:t.left+n.x,y:t.top+n.y,width:t.width,height:t.height}}};var p;t.CanvasBoundsInitializer=h,o([(0,s.inject)(c.TYPES.IActionDispatcher),i("design:type",Object)],h.prototype,"actionDispatcher",void 0),t.CanvasBoundsInitializer=h=o([(0,s.injectable)()],h),function(e){e.KIND="initializeCanvasBounds",e.create=function(t){return{kind:e.KIND,newCanvasBounds:t}}}(p||(t.InitializeCanvasBoundsAction=p={}));let f=class extends l.SystemCommand{constructor(e){super(),this.action=e}execute(e){return this.newCanvasBounds=this.action.newCanvasBounds,e.root.canvasBounds=this.newCanvasBounds,e.root}undo(e){return e.root}redo(e){return e.root}};t.InitializeCanvasBoundsCommand=f,f.KIND=p.KIND,t.InitializeCanvasBoundsCommand=f=o([(0,s.injectable)(),r(0,(0,s.inject)(c.TYPES.Action)),i("design:paramtypes",[Object])],f)},7747:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ComputedBoundsApplicator=t.ModelSource=void 0;const r=n(2650),s=n(7020),a=n(2608),c=n(2041);let d=class{initialize(e){e.register(s.RequestModelAction.KIND,this),e.register(s.ExportSvgAction.KIND,this)}};t.ModelSource=d,o([(0,r.inject)(c.TYPES.IActionDispatcher),i("design:type",Object)],d.prototype,"actionDispatcher",void 0),o([(0,r.inject)(c.TYPES.ViewerOptions),i("design:type",Object)],d.prototype,"viewerOptions",void 0),t.ModelSource=d=o([(0,r.injectable)()],d);let l=class{apply(e,t){const n=new a.SModelIndex;n.add(e);for(const e of t.bounds){const t=n.getById(e.elementId);void 0!==t&&this.applyBounds(t,e.newPosition,e.newSize)}if(void 0!==t.alignments)for(const e of t.alignments){const t=n.getById(e.elementId);void 0!==t&&this.applyAlignment(t,e.newAlignment)}return n}applyAlignment(e,t){e.alignment={x:t.x,y:t.y}}applyBounds(e,t,n){const o=e;t&&(o.position=Object.assign({},t)),o.size=Object.assign({},n)}};t.ComputedBoundsApplicator=l,t.ComputedBoundsApplicator=l=o([(0,r.injectable)()],l)},7763:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=function(){return n++};let n=0},7812:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerActionHandlerRegistry=void 0,t.ServerActionHandlerRegistry=class{constructor(){this.handlers=new Map}getHandler(e){return this.handlers.get(e)}onAction(e,t){this.handlers.has(e)?this.handlers.get(e).push(t):this.handlers.set(e,[t])}removeActionHandler(e,t){const n=this.handlers.get(e);if(n){const e=n.indexOf(t);e>=0&&n.splice(e,1)}}}},7814:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(9082),r=n(2131),s=new o.ContainerModule(((e,t,n)=>{(0,i.configureButtonHandler)({bind:e,isBound:n},r.ExpandButtonHandler.TYPE,r.ExpandButtonHandler)}));t.default=s},7893:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseType=function(e){const t=Object.getPrototypeOf(e.prototype),n=t?.constructor;return n}},7996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(1702),s=n(5162),a=new o.ContainerModule((e=>{e(r.JunctionFinder).toSelf().inSingletonScope(),e(i.TYPES.IEdgeRoutePostprocessor).toService(r.JunctionFinder),e(s.JunctionPostProcessor).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(s.JunctionPostProcessor),e(i.TYPES.HiddenVNodePostprocessor).toService(s.JunctionPostProcessor)}));t.default=a},8024:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.findViewportScrollbar=t.ScrollMouseListener=void 0;const r=n(2650),s=n(7020),a=n(5017),c=n(166),d=n(5677),l=n(54),u=n(1644),h=n(5027),p=n(5778),f=n(2079),g=n(9678),m=n(2041);class y extends d.MouseListener{constructor(){super(...arguments),this.scrollbarMouseDownDelay=200}mouseDown(e,t){if(void 0===(0,l.findParentByFeature)(e,h.isMoveable)&&!(e instanceof p.SRoutingHandleImpl)){const n=(0,l.findParentByFeature)(e,u.isViewport);if(n){if(this.lastScrollPosition={x:t.pageX,y:t.pageY},this.scrollbar=this.getScrollbar(t),this.scrollbar)return window.clearTimeout(this.scrollbarMouseDownTimeout),this.moveScrollBar(n,t,this.scrollbar,!0).map((e=>new Promise((t=>{this.scrollbarMouseDownTimeout=window.setTimeout((()=>t(e)),this.scrollbarMouseDownDelay)}))))}else this.lastScrollPosition=void 0,this.scrollbar=void 0}return[]}mouseMove(e,t){if(0===t.buttons)return this.mouseUp(e,t);if(this.scrollbar){window.clearTimeout(this.scrollbarMouseDownTimeout);const n=(0,l.findParentByFeature)(e,u.isViewport);if(n)return this.moveScrollBar(n,t,this.scrollbar)}if(this.lastScrollPosition){const n=(0,l.findParentByFeature)(e,u.isViewport);if(n)return this.dragCanvas(n,t,this.lastScrollPosition)}return[]}mouseEnter(e,t){return e instanceof c.SModelRootImpl&&0===t.buttons&&this.mouseUp(e,t),[]}mouseUp(e,t){return this.lastScrollPosition=void 0,this.scrollbar=void 0,[]}doubleClick(e,t){if((0,l.findParentByFeature)(e,u.isViewport)){const e=this.getScrollbar(t);if(e){window.clearTimeout(this.scrollbarMouseDownTimeout);const n=this.findClickTarget(e,t);let o;if(n&&n.id.startsWith("horizontal-projection:")?o=n.id.substring(22):n&&n.id.startsWith("vertical-projection:")&&(o=n.id.substring(20)),o)return[s.CenterAction.create([o],{animate:!0,retainZoom:!0})]}}return[]}dragCanvas(e,t,n){let o=(t.pageX-n.x)/e.zoom;(o>0&&(0,a.almostEquals)(e.scroll.x,this.viewerOptions.horizontalScrollLimits.min)||o<0&&(0,a.almostEquals)(e.scroll.x,this.viewerOptions.horizontalScrollLimits.max-e.canvasBounds.width/e.zoom))&&(o=0);let i=(t.pageY-n.y)/e.zoom;if((i>0&&(0,a.almostEquals)(e.scroll.y,this.viewerOptions.verticalScrollLimits.min)||i<0&&(0,a.almostEquals)(e.scroll.y,this.viewerOptions.verticalScrollLimits.max-e.canvasBounds.height/e.zoom))&&(i=0),0===o&&0===i)return[];const r={scroll:{x:e.scroll.x-o,y:e.scroll.y-i},zoom:e.zoom};return this.lastScrollPosition={x:t.pageX,y:t.pageY},[s.SetViewportAction.create(e.id,r,{animate:!1})]}moveScrollBar(e,t,n,o=!1){const i=(0,f.getModelBounds)(e);if(!i||e.zoom<=0)return[];const r=n.getBoundingClientRect();let c;if("horizontal"===this.getScrollbarOrientation(n)){if(r.width<=0)return[];const n=e.canvasBounds.width/(e.zoom*i.width)*r.width;let o=t.clientX-r.x-n/2;if(o<0?o=0:o>r.width-n&&(o=r.width-n),c={x:i.x+o/r.width*i.width,y:e.scroll.y},c.x<this.viewerOptions.horizontalScrollLimits.min?c.x=this.viewerOptions.horizontalScrollLimits.min:c.x>this.viewerOptions.horizontalScrollLimits.max-e.canvasBounds.width/e.zoom&&(c.x=this.viewerOptions.horizontalScrollLimits.max-e.canvasBounds.width/e.zoom),(0,a.almostEquals)(c.x,e.scroll.x))return[]}else{if(r.height<=0)return[];const n=e.canvasBounds.height/(e.zoom*i.height)*r.height;let o=t.clientY-r.y-n/2;if(o<0?o=0:o>r.height-n&&(o=r.height-n),c={x:e.scroll.x,y:i.y+o/r.height*i.height},c.y<this.viewerOptions.verticalScrollLimits.min?c.y=this.viewerOptions.verticalScrollLimits.min:c.y>this.viewerOptions.verticalScrollLimits.max-e.canvasBounds.height/e.zoom&&(c.y=this.viewerOptions.verticalScrollLimits.max-e.canvasBounds.height/e.zoom),(0,a.almostEquals)(c.y,e.scroll.y))return[]}return[s.SetViewportAction.create(e.id,{scroll:c,zoom:e.zoom},{animate:o})]}getScrollbar(e){return v(e)}getScrollbarOrientation(e){return e.classList.contains("horizontal")?"horizontal":"vertical"}findClickTarget(e,t){const n=Array.from(e.children).filter((e=>e.id&&e.classList.contains("sprotty-projection")&&(0,g.hitsMouseEvent)(e,t)));if(n.length>0)return n[n.length-1]}}function v(e){let t=e.target;for(;t;){if(t.classList&&t.classList.contains("sprotty-projection-bar"))return t;t=t.parentElement}}t.ScrollMouseListener=y,o([(0,r.inject)(m.TYPES.ViewerOptions),i("design:type",Object)],y.prototype,"viewerOptions",void 0),t.findViewportScrollbar=v},8029:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadDefaultModules=void 0;const i=o(n(4949)),r=o(n(6085)),s=o(n(5695)),a=o(n(5478)),c=o(n(1631)),d=o(n(2379)),l=o(n(1752)),u=o(n(8486)),h=n(3610),p=o(n(7814)),f=o(n(6988)),g=o(n(9456)),m=o(n(5670)),y=o(n(8811)),v=o(n(6762)),b=o(n(9710)),S=o(n(7174)),P=o(n(9817)),_=o(n(5075)),E=o(n(8788)),w=o(n(5520));t.loadDefaultModules=function(e,t){const n=[i.default,r.default,s.default,a.default,c.default,d.default,l.default,h.edgeEditModule,u.default,p.default,f.default,g.default,m.default,h.labelEditModule,h.labelEditUiModule,y.default,v.default,b.default,S.default,P.default,_.default,E.default,w.default];if(t&&t.exclude)for(const e of t.exclude){const t=n.indexOf(e);t>=0&&n.splice(t,1)}e.load(...n)}},8053:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.FactoryType=void 0,function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"}(n||(t.FactoryType=n={}))},8245:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyListener=t.KeyTool=void 0;const s=n(2650),a=n(2041),c=n(166),d=n(491);let l=class{constructor(e=[]){this.keyListeners=e}register(e){this.keyListeners.push(e)}deregister(e){const t=this.keyListeners.indexOf(e);t>=0&&this.keyListeners.splice(t,1)}handleEvent(e,t,n){const o=this.keyListeners.map((o=>o[e].apply(o,[t,n]))).reduce(((e,t)=>e.concat(t)));o.length>0&&(n.preventDefault(),this.actionDispatcher.dispatchAll(o))}keyDown(e,t){this.handleEvent("keyDown",e,t)}keyUp(e,t){this.handleEvent("keyUp",e,t)}focus(){}decorate(e,t){return t instanceof c.SModelRootImpl&&((0,d.on)(e,"focus",this.focus.bind(this,t)),(0,d.on)(e,"keydown",this.keyDown.bind(this,t)),(0,d.on)(e,"keyup",this.keyUp.bind(this,t))),e}postUpdate(){}};t.KeyTool=l,o([(0,s.inject)(a.TYPES.IActionDispatcher),i("design:type",Object)],l.prototype,"actionDispatcher",void 0),t.KeyTool=l=o([(0,s.injectable)(),r(0,(0,s.multiInject)(a.TYPES.KeyListener)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],l);let u=class{keyDown(e,t){return[]}keyUp(e,t){return[]}};t.KeyListener=u,t.KeyListener=u=o([(0,s.injectable)()],u)},8302:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapIterable=t.filterIterable=t.DONE_RESULT=t.toArray=t.FluentIterableImpl=void 0;class n{constructor(e,t){this.startFn=e,this.nextFn=t}[Symbol.iterator](){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}filter(e){return o(this,e)}map(e){return i(this,e)}forEach(e){const t=this[Symbol.iterator]();let n,o=0;do{n=t.next(),void 0!==n.value&&e(n.value,o),o++}while(!n.done)}indexOf(e){const t=this[Symbol.iterator]();let n,o=0;do{if(n=t.next(),n.value===e)return o;o++}while(!n.done);return-1}}function o(e,t){return new n((()=>r(e)),(e=>{let n;do{n=e.next()}while(!n.done&&!t(n.value));return n}))}function i(e,o){return new n((()=>r(e)),(e=>{const{done:n,value:i}=e.next();return n?t.DONE_RESULT:{done:!1,value:o(i)}}))}function r(e){const n=e[Symbol.iterator];if("function"==typeof n)return n.call(e);const o=e.length;return"number"==typeof o&&o>=0?new s(e):{next:()=>t.DONE_RESULT}}t.FluentIterableImpl=n,t.toArray=function(e){if(e.constructor===Array)return e;const t=[];return e.forEach((e=>t.push(e))),t},t.DONE_RESULT=Object.freeze({done:!0,value:void 0}),t.filterIterable=o,t.mapIterable=i;class s{constructor(e){this.array=e,this.index=0}next(){return this.index<this.array.length?{done:!1,value:this.array[this.index++]}:t.DONE_RESULT}[Symbol.iterator](){return this}}},8315:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PopupModelViewer=t.HiddenModelViewer=t.ModelViewer=t.PatcherProvider=t.ModelRenderer=void 0;const s=n(2650),a=n(1638),c=n(417),d=n(9678),l=n(7559),u=n(5857),h=n(2041),p=n(6003),f=n(491);class g{constructor(e,t,n,o={}){this.viewRegistry=e,this.targetKind=t,this.postprocessors=n,this.args=o}decorate(e,t){return(0,p.isThunk)(e)?e:this.postprocessors.reduce(((e,n)=>n.decorate(e,t)),e)}renderElement(e){const t=this.viewRegistry.get(e.type).render(e,this,this.args);return t?this.decorate(t,e):void 0}renderChildren(e,t){const n=t?new g(this.viewRegistry,this.targetKind,this.postprocessors,Object.assign(Object.assign({},t),{parentArgs:this.args})):this;return e.children.map((e=>n.renderElement(e))).filter((e=>void 0!==e))}postUpdate(e){this.postprocessors.forEach((t=>t.postUpdate(e)))}}t.ModelRenderer=g;let m=class{constructor(){this.patcher=(0,a.init)(this.createModules())}createModules(){return[a.propsModule,a.attributesModule,a.classModule,a.styleModule,a.eventListenersModule]}};t.PatcherProvider=m,t.PatcherProvider=m=o([(0,s.injectable)(),i("design:paramtypes",[])],m);let y=class{constructor(e,t,n){this.renderer=e("main",n),this.patcher=t.patcher}update(e,t){var n;this.logger.log(this,"rendering",e);const o=(0,c.html)("div",{id:this.options.baseDiv},this.renderer.renderElement(e));if(void 0!==this.lastVDOM){const e=this.hasFocus();(0,f.copyClassesFromVNode)(this.lastVDOM,o),this.lastVDOM=this.patcher.call(this,this.lastVDOM,o),this.restoreFocus(e)}else if("undefined"!=typeof document){let e=null;if(this.options.shadowRoot){const t=null===(n=document.getElementById(this.options.shadowRoot))||void 0===n?void 0:n.shadowRoot;t&&(e=t.getElementById(this.options.baseDiv))}else e=document.getElementById(this.options.baseDiv);null!==e?("undefined"!=typeof window&&window.addEventListener("resize",(()=>{this.onWindowResize(o)})),(0,f.copyClassesFromElement)(e,o),(0,f.setClass)(o,this.options.baseClass,!0),this.lastVDOM=this.patcher.call(this,e,o)):this.logger.error(this,"element not in DOM:",this.options.baseDiv)}this.renderer.postUpdate(t)}hasFocus(){if("undefined"!=typeof document&&document.activeElement&&this.lastVDOM.children&&this.lastVDOM.children.length>0){const e=this.lastVDOM.children[0];if("object"==typeof e){const t=e.elm;return document.activeElement===t}}return!1}restoreFocus(e){if(e&&this.lastVDOM.children&&this.lastVDOM.children.length>0){const e=this.lastVDOM.children[0];if("object"==typeof e){const t=e.elm;t&&"function"==typeof t.focus&&t.focus()}}}onWindowResize(e){const t=document.getElementById(this.options.baseDiv);if(null!==t){const e=this.getBoundsInPage(t);this.actiondispatcher.dispatch(l.InitializeCanvasBoundsAction.create(e))}}getBoundsInPage(e){const t=e.getBoundingClientRect(),n=(0,d.getWindowScroll)();return{x:t.left+n.x,y:t.top+n.y,width:t.width,height:t.height}}};t.ModelViewer=y,o([(0,s.inject)(h.TYPES.ViewerOptions),i("design:type",Object)],y.prototype,"options",void 0),o([(0,s.inject)(h.TYPES.ILogger),i("design:type",Object)],y.prototype,"logger",void 0),o([(0,s.inject)(h.TYPES.IActionDispatcher),i("design:type",Object)],y.prototype,"actiondispatcher",void 0),t.ModelViewer=y=o([(0,s.injectable)(),r(0,(0,s.inject)(h.TYPES.ModelRendererFactory)),r(1,(0,s.inject)(h.TYPES.PatcherProvider)),r(2,(0,s.multiInject)(h.TYPES.IVNodePostprocessor)),r(2,(0,s.optional)()),i("design:paramtypes",[Function,m,Array])],y);let v=class{constructor(e,t,n){this.hiddenRenderer=e("hidden",n),this.patcher=t.patcher}update(e,t){let n;if(this.logger.log(this,"rendering hidden"),e.type===u.EMPTY_ROOT.type)n=(0,c.html)("div",{id:this.options.hiddenDiv});else{const t=this.hiddenRenderer.renderElement(e);t&&(0,f.setAttr)(t,"opacity",0),n=(0,c.html)("div",{id:this.options.hiddenDiv},t)}if(void 0!==this.lastHiddenVDOM)(0,f.copyClassesFromVNode)(this.lastHiddenVDOM,n),this.lastHiddenVDOM=this.patcher.call(this,this.lastHiddenVDOM,n);else{let e=document.getElementById(this.options.hiddenDiv);null===e?(e=document.createElement("div"),document.body.appendChild(e)):(0,f.copyClassesFromElement)(e,n),(0,f.setClass)(n,this.options.baseClass,!0),(0,f.setClass)(n,this.options.hiddenClass,!0),this.lastHiddenVDOM=this.patcher.call(this,e,n)}this.hiddenRenderer.postUpdate(t)}};t.HiddenModelViewer=v,o([(0,s.inject)(h.TYPES.ViewerOptions),i("design:type",Object)],v.prototype,"options",void 0),o([(0,s.inject)(h.TYPES.ILogger),i("design:type",Object)],v.prototype,"logger",void 0),t.HiddenModelViewer=v=o([(0,s.injectable)(),r(0,(0,s.inject)(h.TYPES.ModelRendererFactory)),r(1,(0,s.inject)(h.TYPES.PatcherProvider)),r(2,(0,s.multiInject)(h.TYPES.HiddenVNodePostprocessor)),r(2,(0,s.optional)()),i("design:paramtypes",[Function,m,Array])],v);let b=class{constructor(e,t,n){this.modelRendererFactory=e,this.popupRenderer=this.modelRendererFactory("popup",n),this.patcher=t.patcher}update(e,t){this.logger.log(this,"rendering popup",e);const n=e.type===u.EMPTY_ROOT.type;let o;if(n)o=(0,c.html)("div",{id:this.options.popupDiv});else{const t=e.canvasBounds,n={top:t.y+"px",left:t.x+"px"};o=(0,c.html)("div",{id:this.options.popupDiv,style:n},this.popupRenderer.renderElement(e))}if(void 0!==this.lastPopupVDOM)(0,f.copyClassesFromVNode)(this.lastPopupVDOM,o),(0,f.setClass)(o,this.options.popupClosedClass,n),this.lastPopupVDOM=this.patcher.call(this,this.lastPopupVDOM,o);else if("undefined"!=typeof document){let e=document.getElementById(this.options.popupDiv);null===e?(e=document.createElement("div"),document.body.appendChild(e)):(0,f.copyClassesFromElement)(e,o),(0,f.setClass)(o,this.options.popupClass,!0),(0,f.setClass)(o,this.options.popupClosedClass,n),this.lastPopupVDOM=this.patcher.call(this,e,o)}this.popupRenderer.postUpdate(t)}};t.PopupModelViewer=b,o([(0,s.inject)(h.TYPES.ViewerOptions),i("design:type",Object)],b.prototype,"options",void 0),o([(0,s.inject)(h.TYPES.ILogger),i("design:type",Object)],b.prototype,"logger",void 0),t.PopupModelViewer=b=o([(0,s.injectable)(),r(0,(0,s.inject)(h.TYPES.ModelRendererFactory)),r(1,(0,s.inject)(h.TYPES.PatcherProvider)),r(2,(0,s.multiInject)(h.TYPES.PopupVNodePostprocessor)),r(2,(0,s.optional)()),i("design:paramtypes",[Function,m,Array])],b)},8416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFadeable=t.fadeFeature=void 0,t.fadeFeature=Symbol("fadeFeature"),t.isFadeable=function(e){return e.hasFeature(t.fadeFeature)&&void 0!==e.opacity}},8480:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;const a=s(n(5007)),c=s(n(9466)),d=(0,n(9260).propertyEventDecorator)(c.POST_CONSTRUCT,a.MULTIPLE_POST_CONSTRUCT_METHODS);t.postConstruct=d},8486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(4341),s=new o.ContainerModule((e=>{e(r.EdgeLayoutPostprocessor).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(r.EdgeLayoutPostprocessor),e(i.TYPES.HiddenVNodePostprocessor).toService(r.EdgeLayoutPostprocessor)}));t.default=s},8590:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.intersectionOfSegments=t.getSegmentIndex=t.checkWhichSegmentHasRightEndpointFirst=t.runSweep=t.Segment=t.SweepEvent=t.checkWhichEventIsLeft=t.addRoute=void 0;const i=o(n(4262)),r=n(7196);function s(e,t){return e.point.x>t.point.x?1:e.point.x<t.point.x?-1:e.point.y!==t.point.y?e.point.y>t.point.y?1:-1:1}t.addRoute=function(e,t,n){if(t.length<1)return;let o,i=t[0];for(let r=0;r<t.length-1;r++){o=t[r+1];const c=new a(e,i,r),d=new a(e,o,r+1);c.otherEvent=d,d.otherEvent=c,s(c,d)>0?(d.isLeftEndpoint=!0,c.isLeftEndpoint=!1):(c.isLeftEndpoint=!0,d.isLeftEndpoint=!1),n.push(c),n.push(d),i=o}},t.checkWhichEventIsLeft=s;class a{constructor(e,t,n){this.edgeId=e,this.point=t,this.segmentIndex=n}}t.SweepEvent=a;class c{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function d(e,t){return e.rightSweepEvent.point.x>t.rightSweepEvent.point.x?1:e.rightSweepEvent.point.x<t.rightSweepEvent.point.x?-1:e.rightSweepEvent.point.y!==t.rightSweepEvent.point.y?e.rightSweepEvent.point.y<t.rightSweepEvent.point.y?1:-1:1}function l(e){return Math.min(e.leftSweepEvent.segmentIndex,e.rightSweepEvent.segmentIndex)}function u(e,t){if(e.leftSweepEvent.edgeId===t.leftSweepEvent.edgeId)return;const n=new r.PointToPointLine(e.leftSweepEvent.point,e.rightSweepEvent.point),o=new r.PointToPointLine(t.leftSweepEvent.point,t.rightSweepEvent.point);return n.intersection(o)}t.Segment=c,t.runSweep=function(e){const t=[],n=new i.default([],d);for(;e.length;){const o=e.pop();if(null==o?void 0:o.isLeftEndpoint){const e=new c(o);for(let i=0;i<n.data.length;i++){const r=n.data[i],s=u(e,r);s&&t.push({routable1:o.edgeId,routable2:r.leftSweepEvent.edgeId,segmentIndex1:l(e),segmentIndex2:l(r),intersectionPoint:s})}n.push(e)}else!1===(null==o?void 0:o.isLeftEndpoint)&&n.pop()}return t},t.checkWhichSegmentHasRightEndpointFirst=d,t.getSegmentIndex=l,t.intersectionOfSegments=u},8609:function(e){e.exports=function(){"use strict";return function(e){var t=document,n=e.container||t.createElement("div"),o=e.preventSubmit||0;n.id=n.id||"autocomplete-"+v();var i,r,s=n.style,a=e.debounceWaitMs||0,c=e.disableAutoSelect||!1,d=n.parentElement,l=[],u="",h=2,p=e.showOnFocus,f=0,g=!1,m=!1;if(void 0!==e.minLength&&(h=e.minLength),!e.input)throw new Error("input undefined");var y=e.input;function v(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function b(){var e=n.parentNode;e&&e.removeChild(n)}function S(){r&&window.clearTimeout(r)}function P(){return!!n.parentNode}function _(){f++,l=[],u="",i=void 0,y.setAttribute("aria-activedescendant",""),y.setAttribute("aria-expanded","false"),b()}function E(){n.textContent="",y.setAttribute("aria-activedescendant","");var o=function(e,n,o){var i=t.createElement("div");return i.textContent=e.label||"",i};e.render&&(o=e.render);var r=function(e,n){var o=t.createElement("div");return o.textContent=e,o};e.renderGroup&&(r=e.renderGroup);var a=t.createDocumentFragment(),c=v();if(l.forEach((function(t,s){if(t.group&&t.group!==c){c=t.group;var d=r(t.group,u);d&&(d.className+=" group",a.appendChild(d))}var l=o(t,u,s);l&&(l.id=n.id+"_"+s,l.setAttribute("role","option"),l.addEventListener("click",(function(n){m=!0;try{e.onSelect(t,y)}finally{m=!1}_(),n.preventDefault(),n.stopPropagation()})),t===i&&(l.className+=" selected",l.setAttribute("aria-selected","true"),y.setAttribute("aria-activedescendant",l.id)),a.appendChild(l))})),n.appendChild(a),l.length<1){if(!e.emptyMsg)return void _();var h=t.createElement("div");h.id=n.id+"_"+v(),h.className="empty",h.textContent=e.emptyMsg,n.appendChild(h),y.setAttribute("aria-activedescendant",h.id)}n.parentNode||(d||t.body).appendChild(n),function(){if(P()){y.setAttribute("aria-expanded","true"),s.height="auto",s.width=y.offsetWidth+"px";var o,i=0;r(),r(),e.customize&&o&&e.customize(y,o,n,i)}function r(){var e=t.documentElement,n=e.clientTop||t.body.clientTop||0,r=e.clientLeft||t.body.clientLeft||0,a=window.pageYOffset||e.scrollTop,c=window.pageXOffset||e.scrollLeft,d=(o=y.getBoundingClientRect()).top+y.offsetHeight+a-n,l=o.left+c-r;s.top=d+"px",s.left=l+"px",(i=window.innerHeight-(o.top+y.offsetHeight))<0&&(i=0),s.top=d+"px",s.bottom="",s.left=l+"px",s.maxHeight=i+"px"}}(),A()}function w(){P()&&E()}function O(){w()}function I(e){e.target!==n?w():e.preventDefault()}function M(){m||C(0)}function A(){var e=n.getElementsByClassName("selected");if(e.length>0){var t=e[0],o=t.previousElementSibling;if(o&&-1!==o.className.indexOf("group")&&!o.previousElementSibling&&(t=o),t.offsetTop<n.scrollTop)n.scrollTop=t.offsetTop;else{var i=t.offsetTop+t.offsetHeight,r=n.scrollTop+n.offsetHeight;i>r&&(n.scrollTop+=i-r)}}}function R(e){l.length>0&&(function(e){var o=t.getElementById(n.id+"_"+e);o&&(o.classList.remove("selected"),o.removeAttribute("aria-selected"),y.removeAttribute("aria-activedescendant"))}(e),function(e){var o=t.getElementById(n.id+"_"+e);o&&(o.classList.add("selected"),o.setAttribute("aria-selected","true"),y.setAttribute("aria-activedescendant",o.id))}(l.indexOf(i)),A())}function x(e,t){var n,o=P();if("Escape"===t)_();else{if(!o||l.length<1)return;"ArrowUp"===t?(n=l.indexOf(i),i=-1===n?void 0:l[(n+l.length-1)%l.length],R(n)):function(){var e=l.indexOf(i);i=l.length<1?void 0:-1===e?l[0]:l[(e+1)%l.length],R(e)}()}e.preventDefault(),o&&e.stopPropagation()}function T(t){var n=t.key;switch(n){case"ArrowUp":case"ArrowDown":case"Escape":x(t,n);break;case"Enter":!function(t){if(i){2===o&&t.preventDefault(),m=!0;try{e.onSelect(i,y)}finally{m=!1}_()}1===o&&t.preventDefault()}(t)}}function j(){p&&C(1)}function C(e){y.value.length>=h||1===e?(S(),r=window.setTimeout((function(){return D(y.value,e,y.selectionStart||0)}),0===e||2===e?a:0)):_()}function D(t,n,o){if(!g){var r=++f;e.fetch(t,(function(e){f===r&&e&&(u=t,i=(l=e).length<1||c?void 0:l[0],E())}),n,o)}}function N(t){e.keyup?e.keyup({event:t,fetch:function(){return C(0)}}):P()||"ArrowDown"!==t.key||C(0)}function L(t){e.click&&e.click({event:t,fetch:function(){return C(2)}})}function B(){setTimeout((function(){t.activeElement!==y&&_()}),200)}return n.className=[n.className,"autocomplete",e.className||""].join(" ").trim(),n.setAttribute("role","listbox"),y.setAttribute("role","combobox"),y.setAttribute("aria-expanded","false"),y.setAttribute("aria-autocomplete","list"),y.setAttribute("aria-controls",n.id),y.setAttribute("aria-owns",n.id),y.setAttribute("aria-activedescendant",""),y.setAttribute("aria-haspopup","listbox"),s.position="absolute",n.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),n.addEventListener("focus",(function(){return y.focus()})),b(),y.addEventListener("keyup",N),y.addEventListener("click",L),y.addEventListener("keydown",T),y.addEventListener("input",M),y.addEventListener("blur",B),y.addEventListener("focus",j),window.addEventListener("resize",O),t.addEventListener("scroll",I,!0),{destroy:function(){y.removeEventListener("focus",j),y.removeEventListener("keyup",N),y.removeEventListener("click",L),y.removeEventListener("keydown",T),y.removeEventListener("input",M),y.removeEventListener("blur",B),window.removeEventListener("resize",O),t.removeEventListener("scroll",I,!0),y.removeAttribute("role"),y.removeAttribute("aria-expanded"),y.removeAttribute("aria-autocomplete"),y.removeAttribute("aria-controls"),y.removeAttribute("aria-activedescendant"),y.removeAttribute("aria-owns"),y.removeAttribute("aria-haspopup"),S(),_(),g=!0},fetch:function(){D(y.value,3,y.selectionStart||0)}}}}()},8630:(e,t,n)=>{var o;!function(e){!function(){var t="object"==typeof globalThis?globalThis:"object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(e){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(e){}}(),o=i(e);function i(e,t){return function(n,o){Object.defineProperty(e,n,{configurable:!0,writable:!0,value:o}),t&&t(n,o)}}void 0!==t.Reflect&&(o=i(t.Reflect,o)),function(e,t){var n=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,i=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,c=!s&&!a,d={create:s?function(){return H(Object.create(null))}:a?function(){return H({__proto__:null})}:function(){return H({})},has:c?function(e,t){return n.call(e,t)}:function(e,t){return t in e},get:c?function(e,t){return n.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),u="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[r]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var o=this._keys.length,i=n+1;i<o;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,D(t,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,o)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[r]=function(){return this.entries()},t.prototype._find=function(e,t){if(!D(this._cacheKey,e)){this._cacheIndex=-1;for(var n=0;n<this._keys.length;n++)if(D(this._keys[n],e)){this._cacheIndex=n;break}}return this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function o(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}(),h="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function(){function e(){this._map=new u}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[r]=function(){return this.keys()},e}(),p="function"==typeof WeakMap?WeakMap:function(){var e=d.create(),t=o();return function(){function e(){this._key=o()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&d.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?d.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=o()},e}();function o(){var t;do{t="@@WeakMap@@"+s()}while(d.has(e,t));return e[t]=!0,t}function i(e,o){if(!n.call(e,t)){if(!o)return;Object.defineProperty(e,t,{value:d.create()})}return e[t]}function r(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var e=function(e){if("function"==typeof Uint8Array){var t=new Uint8Array(e);return"undefined"!=typeof crypto?crypto.getRandomValues(t):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(t):r(t,e),t}return r(new Array(e),e)}(16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",n=0;n<16;++n){var o=e[n];4!==n&&6!==n&&8!==n||(t+="-"),o<16&&(t+="0"),t+=o.toString(16).toLowerCase()}return t}}(),f=o?Symbol.for("@reflect-metadata:registry"):void 0,g=function(){var e;return!O(f)&&M(t.Reflect)&&Object.isExtensible(t.Reflect)&&(e=t.Reflect[f]),O(e)&&(e=function(){var e,n,o,i;O(f)||void 0===t.Reflect||f in t.Reflect||"function"!=typeof t.Reflect.defineMetadata||(e=function(e){var t=e.defineMetadata,n=e.hasOwnMetadata,o=e.getOwnMetadata,i=e.getOwnMetadataKeys,r=e.deleteMetadata,s=new p;return{isProviderFor:function(e,t){var n=s.get(e);return!(O(n)||!n.has(t))||!!i(e,t).length&&(O(n)&&(n=new h,s.set(e,n)),n.add(t),!0)},OrdinaryDefineOwnMetadata:t,OrdinaryHasOwnMetadata:n,OrdinaryGetOwnMetadata:o,OrdinaryOwnMetadataKeys:i,OrdinaryDeleteMetadata:r}}(t.Reflect));var r=new p,s={registerProvider:a,getProvider:d,setProvider:g};return s;function a(t){if(!Object.isExtensible(s))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case e===t:break;case O(n):n=t;break;case n===t:break;case O(o):o=t;break;case o===t:break;default:void 0===i&&(i=new h),i.add(t)}}function c(t,r){if(!O(n)){if(n.isProviderFor(t,r))return n;if(!O(o)){if(o.isProviderFor(t,r))return n;if(!O(i))for(var s=L(i);;){var a=k(s);if(!a)return;var c=B(a);if(c.isProviderFor(t,r))return F(s),c}}}if(!O(e)&&e.isProviderFor(t,r))return e}function d(e,t){var n,o=r.get(e);return O(o)||(n=o.get(t)),O(n)?(O(n=c(e,t))||(O(o)&&(o=new u,r.set(e,o)),o.set(t,n)),n):n}function l(e){if(O(e))throw new TypeError;return n===e||o===e||!O(i)&&i.has(e)}function g(e,t,n){if(!l(n))throw new Error("Metadata provider not registered.");var o=d(e,t);if(o!==n){if(!O(o))return!1;var i=r.get(e);O(i)&&(i=new u,r.set(e,i)),i.set(t,n)}return!0}}()),!O(f)&&M(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,f,{enumerable:!1,configurable:!1,writable:!1,value:e}),e}(),m=function(e){var t=new p,n={isProviderFor:function(e,n){var o=t.get(e);return!O(o)&&o.has(n)},OrdinaryDefineOwnMetadata:function(e,t,n,i){o(n,i,!0).set(e,t)},OrdinaryHasOwnMetadata:function(e,t,n){var i=o(t,n,!1);return!O(i)&&R(i.has(e))},OrdinaryGetOwnMetadata:function(e,t,n){var i=o(t,n,!1);if(!O(i))return i.get(e)},OrdinaryOwnMetadataKeys:function(e,t){var n=[],i=o(e,t,!1);if(O(i))return n;for(var r=L(i.keys()),s=0;;){var a=k(r);if(!a)return n.length=s,n;var c=B(a);try{n[s]=c}catch(e){try{F(r)}finally{throw e}}s++}},OrdinaryDeleteMetadata:function(e,n,i){var r=o(n,i,!1);if(O(r))return!1;if(!r.delete(e))return!1;if(0===r.size){var s=t.get(n);O(s)||(s.delete(i),0===s.size&&t.delete(s))}return!0}};return g.registerProvider(n),n;function o(o,i,r){var s=t.get(o),a=!1;if(O(s)){if(!r)return;s=new u,t.set(o,s),a=!0}var c=s.get(i);if(O(c)){if(!r)return;if(c=new u,s.set(i,c),!e.setProvider(o,i,n))throw s.delete(i),a&&t.delete(o),new Error("Wrong provider for target.")}return c}}(g);function y(e,t,n){if(v(e,t,n))return!0;var o=V(t);return!I(o)&&y(e,o,n)}function v(e,t,n){var o=K(t,n,!1);return!O(o)&&R(o.OrdinaryHasOwnMetadata(e,t,n))}function b(e,t,n){if(v(e,t,n))return S(e,t,n);var o=V(t);return I(o)?void 0:b(e,o,n)}function S(e,t,n){var o=K(t,n,!1);if(!O(o))return o.OrdinaryGetOwnMetadata(e,t,n)}function P(e,t,n,o){K(n,o,!0).OrdinaryDefineOwnMetadata(e,t,n,o)}function _(e,t){var n=E(e,t),o=V(e);if(null===o)return n;var i=_(o,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var r=new h,s=[],a=0,c=n;a<c.length;a++){var d=c[a];r.has(d)||(r.add(d),s.push(d))}for(var l=0,u=i;l<u.length;l++)d=u[l],r.has(d)||(r.add(d),s.push(d));return s}function E(e,t){var n=K(e,t,!1);return n?n.OrdinaryOwnMetadataKeys(e,t):[]}function w(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function O(e){return void 0===e}function I(e){return null===e}function M(e){return"object"==typeof e?null!==e:"function"==typeof e}function A(e,t){switch(w(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",o=N(e,i);if(void 0!==o){var r=o.call(e,n);if(M(r))throw new TypeError;return r}return function(e,t){if("string"===t){var n=e.toString;if(j(n)&&!M(i=n.call(e)))return i;if(j(o=e.valueOf)&&!M(i=o.call(e)))return i}else{var o;if(j(o=e.valueOf)&&!M(i=o.call(e)))return i;var i,r=e.toString;if(j(r)&&!M(i=r.call(e)))return i}throw new TypeError}(e,"default"===n?"number":n)}function R(e){return!!e}function x(e){var t=A(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function T(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function j(e){return"function"==typeof e}function C(e){return"function"==typeof e}function D(e,t){return e===t||e!=e&&t!=t}function N(e,t){var n=e[t];if(null!=n){if(!j(n))throw new TypeError;return n}}function L(e){var t=N(e,r);if(!j(t))throw new TypeError;var n=t.call(e);if(!M(n))throw new TypeError;return n}function B(e){return e.value}function k(e){var t=e.next();return!t.done&&t}function F(e){var t=e.return;t&&t.call(e)}function V(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,o=n&&Object.getPrototypeOf(n);if(null==o||o===Object.prototype)return t;var i=o.constructor;return"function"!=typeof i||i===e?t:i}function K(e,t,n){var o=g.getProvider(e,t);if(!O(o))return o;if(n){if(g.setProvider(e,t,m))return m;throw new Error("Illegal state.")}}function H(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,o){if(O(n)){if(!T(e))throw new TypeError;if(!C(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var o=(0,e[n])(t);if(!O(o)&&!I(o)){if(!C(o))throw new TypeError;t=o}}return t}(e,t)}if(!T(e))throw new TypeError;if(!M(t))throw new TypeError;if(!M(o)&&!O(o)&&!I(o))throw new TypeError;return I(o)&&(o=void 0),function(e,t,n,o){for(var i=e.length-1;i>=0;--i){var r=(0,e[i])(t,n,o);if(!O(r)&&!I(r)){if(!M(r))throw new TypeError;o=r}}return o}(e,t,n=x(n),o)})),e("metadata",(function(e,t){return function(n,o){if(!M(n))throw new TypeError;if(!O(o)&&!function(e){switch(w(e)){case 3:case 4:return!0;default:return!1}}(o))throw new TypeError;P(e,t,n,o)}})),e("defineMetadata",(function(e,t,n,o){if(!M(n))throw new TypeError;return O(o)||(o=x(o)),P(e,t,n,o)})),e("hasMetadata",(function(e,t,n){if(!M(t))throw new TypeError;return O(n)||(n=x(n)),y(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!M(t))throw new TypeError;return O(n)||(n=x(n)),v(e,t,n)})),e("getMetadata",(function(e,t,n){if(!M(t))throw new TypeError;return O(n)||(n=x(n)),b(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!M(t))throw new TypeError;return O(n)||(n=x(n)),S(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!M(e))throw new TypeError;return O(t)||(t=x(t)),_(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!M(e))throw new TypeError;return O(t)||(t=x(t)),E(e,t)})),e("deleteMetadata",(function(e,t,n){if(!M(t))throw new TypeError;if(O(n)||(n=x(n)),!M(t))throw new TypeError;O(n)||(n=x(n));var o=K(t,n,!1);return!O(o)&&o.OrdinaryDeleteMetadata(e,t,n)}))}(o,t),void 0===t.Reflect&&(t.Reflect=e)}()}(o||(o={}))},8633:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(c.PARAM_TYPES,e))throw new Error(a.DUPLICATED_INJECTABLE_DECORATOR);const t=Reflect.getMetadata(c.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(c.PARAM_TYPES,t,e),e}};const a=s(n(5007)),c=s(n(9466))},8650:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertConstructorMetadataArrayFilled=function(e,t){const n=[];for(let e=0;e<t.length;++e)void 0===t[e]&&n.push(e);if(n.length>0)throw new o.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,`Found unexpected missing metadata on type "${e.name}" at constructor indexes "${n.join('", "')}".\n\nAre you using @inject, @multiInject or @unmanaged decorators at those indexes?\n\nIf you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`)};const o=n(1773),i=n(4931)},8675:function(e,t,n){"use strict";var o,i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.PolylineEdgeRouter=void 0;const s=n(2650),a=n(5017),c=n(5778),d=n(2638),l=n(1011);let u=o=class extends l.AbstractEdgeRouter{get kind(){return o.KIND}getOptions(e){return{minimalPointDistance:2,removeAngleThreshold:.1,standardDistance:20,selfEdgeOffset:.25}}route(e){const t=e.source,n=e.target;if(void 0===t||void 0===n)return[];let o,i;const r=this.getOptions(e),s=e.routingPoints.length>0?e.routingPoints:[];this.cleanupRoutingPoints(e,s,!1,!1);const c=void 0!==s?s.length:0;if(0===c){const r=a.Bounds.center(n.bounds);o=this.getTranslatedAnchor(t,r,n.parent,e,e.sourceAnchorCorrection);const s=a.Bounds.center(t.bounds);i=this.getTranslatedAnchor(n,s,t.parent,e,e.targetAnchorCorrection)}else{const r=s[0];o=this.getTranslatedAnchor(t,r,e.parent,e,e.sourceAnchorCorrection);const a=s[c-1];i=this.getTranslatedAnchor(n,a,e.parent,e,e.targetAnchorCorrection)}const d=[];d.push({kind:"source",x:o.x,y:o.y});for(let t=0;t<c;t++){const n=s[t];(t>0&&t<c-1||0===t&&a.Point.maxDistance(o,n)>=r.minimalPointDistance+(e.sourceAnchorCorrection||0)||t===c-1&&a.Point.maxDistance(n,i)>=r.minimalPointDistance+(e.targetAnchorCorrection||0))&&d.push({kind:"linear",x:n.x,y:n.y,pointIndex:t})}return d.push({kind:"target",x:i.x,y:i.y}),this.filterEditModeHandles(d,e,r)}filterEditModeHandles(e,t,n){if(0===t.children.length)return e;let o=0;for(;o<e.length;){const i=e[o];if(void 0!==i.pointIndex){const r=t.children.find((e=>e instanceof c.SRoutingHandleImpl&&"junction"===e.kind&&e.pointIndex===i.pointIndex));if(void 0!==r&&r.editMode&&o>0&&o<e.length-1){const t=e[o-1],r=e[o+1],s={x:t.x-i.x,y:t.y-i.y},c={x:r.x-i.x,y:r.y-i.y},d=(0,a.angleBetweenPoints)(s,c);if(Math.abs(Math.PI-d)<n.removeAngleThreshold){e.splice(o,1);continue}}}o++}return e}createRoutingHandles(e){const t=e.routingPoints.length;this.addHandle(e,"source","routing-point",-2),this.addHandle(e,"line","volatile-routing-point",-1);for(let n=0;n<t;n++)this.addHandle(e,"junction","routing-point",n),this.addHandle(e,"line","volatile-routing-point",n);this.addHandle(e,"target","routing-point",t)}getInnerHandlePosition(e,t,n){if("line"===n.kind){const{start:o,end:i}=this.findRouteSegment(e,t,n.pointIndex);if(void 0!==o&&void 0!==i)return(0,a.centerOfLine)(o,i)}}applyInnerHandleMoves(e,t){t.forEach((t=>{const n=t.handle,o=e.routingPoints;let i=n.pointIndex;"line"===n.kind&&(n.kind="junction",n.type="routing-point",o.splice(i+1,0,t.fromPosition||o[Math.max(i,0)]),e.children.forEach((e=>{e instanceof c.SRoutingHandleImpl&&(e===n||e.pointIndex>i)&&e.pointIndex++})),this.addHandle(e,"line","volatile-routing-point",i),i++,this.addHandle(e,"line","volatile-routing-point",i)),i>=0&&i<o.length&&(o[i]=t.toPosition)}))}};t.PolylineEdgeRouter=u,u.KIND="polyline",i([(0,s.inject)(d.AnchorComputerRegistry),r("design:type",d.AnchorComputerRegistry)],u.prototype,"anchorRegistry",void 0),t.PolylineEdgeRouter=u=o=i([(0,s.injectable)()],u)},8698:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ForeignObjectView=t.PreRenderedView=void 0;const r=n(417),s=n(2650),a=i(n(1593)),c=n(491),d=n(4348),l=n(341);let u=class extends d.ShapeView{render(e,t){if(e instanceof l.ShapedPreRenderedElementImpl&&!this.isVisible(e,t))return;const n=(0,a.default)(e.code);return null!==n?(this.correctNamespace(n),n):void 0}correctNamespace(e){"svg"!==e.sel&&"g"!==e.sel||(0,c.setNamespace)(e,"http://www.w3.org/2000/svg")}};t.PreRenderedView=u,t.PreRenderedView=u=o([(0,s.injectable)()],u);let h=class{render(e,t){const n=(0,a.default)(e.code);if(null===n)return;const o=(0,r.svg)("g",null,(0,r.svg)("foreignObject",{requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",height:e.bounds.height,width:e.bounds.width,x:0,y:0},n),t.renderChildren(e));return(0,c.setAttr)(o,"class",e.type),(0,c.setNamespace)(n,e.namespace),o}};t.ForeignObjectView=h,t.ForeignObjectView=h=o([(0,s.injectable)()],h)},8701:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectBase=function(e){return t=>(n,s,a)=>{if(void 0===t){const e="function"==typeof n?n.name:n.constructor.name;throw new Error((0,o.UNDEFINED_INJECT_ANNOTATION)(e))}(0,r.createTaggedDecorator)(new i.Metadata(e,t))(n,s,a)}};const o=n(5007),i=n(4045),r=n(3353)},8721:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;const o=n(7763);t.Context=class{id;container;plan;currentRequest;constructor(e){this.id=(0,o.id)(),this.container=e}addPlan(e){this.plan=e}setCurrentRequest(e){this.currentRequest=e}}},8788:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(5902),s=n(4883),a=n(8024),c=n(6282),d=n(1094),l=new o.ContainerModule(((e,t,n)=>{(0,d.configureCommand)({bind:e,isBound:n},r.CenterCommand),(0,d.configureCommand)({bind:e,isBound:n},r.FitToScreenCommand),(0,d.configureCommand)({bind:e,isBound:n},s.SetViewportCommand),(0,d.configureCommand)({bind:e,isBound:n},s.GetViewportCommand),e(r.CenterKeyboardListener).toSelf().inSingletonScope(),e(i.TYPES.KeyListener).toService(r.CenterKeyboardListener),e(a.ScrollMouseListener).toSelf().inSingletonScope(),e(c.ZoomMouseListener).toSelf().inSingletonScope(),e(i.TYPES.MouseListener).toService(a.ScrollMouseListener),e(i.TYPES.MouseListener).toService(c.ZoomMouseListener)}));t.default=l},8811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(5873),s=n(1094),a=new o.ContainerModule(((e,t,n)=>{e(r.MoveMouseListener).toSelf().inSingletonScope(),e(i.TYPES.MouseListener).toService(r.MoveMouseListener),(0,s.configureCommand)({bind:e,isBound:n},r.MoveCommand),e(r.LocationPostprocessor).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(r.LocationPostprocessor),e(i.TYPES.HiddenVNodePostprocessor).toService(r.LocationPostprocessor)}));t.default=a},8833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstArrayDuplicate=function(e){const t=new Set;for(const n of e){if(t.has(n))return n;t.add(n)}}},8835:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getFactoryDetails=t.ensureFullyBound=t.multiBindToService=void 0;const a=s(n(5007)),c=n(9117),d=n(6272),l=n(8053);t.multiBindToService=e=>t=>(...n)=>{n.forEach((n=>{e.bind(n).toService(t)}))},t.ensureFullyBound=e=>{let t=null;switch(e.type){case c.BindingTypeEnum.ConstantValue:case c.BindingTypeEnum.Function:t=e.cache;break;case c.BindingTypeEnum.Constructor:case c.BindingTypeEnum.Instance:t=e.implementationType;break;case c.BindingTypeEnum.DynamicValue:t=e.dynamicValue;break;case c.BindingTypeEnum.Provider:t=e.provider;break;case c.BindingTypeEnum.Factory:t=e.factory}if(null===t){const t=(0,d.getServiceIdentifierAsString)(e.serviceIdentifier);throw new Error(`${a.INVALID_BINDING_TYPE} ${t}`)}},t.getFactoryDetails=e=>{switch(e.type){case c.BindingTypeEnum.Factory:return{factory:e.factory,factoryType:l.FactoryType.Factory};case c.BindingTypeEnum.Provider:return{factory:e.provider,factoryType:l.FactoryType.Provider};case c.BindingTypeEnum.DynamicValue:return{factory:e.dynamicValue,factoryType:l.FactoryType.DynamicValue};default:throw new Error(`Unexpected factory type ${e.type}`)}}},8841:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataFromMetadataReader=function(e,t){const n=(0,o.getReflectMetadata)(e,i.POST_CONSTRUCT),a=(0,o.getReflectMetadata)(e,i.PRE_DESTROY);return{constructorArguments:(0,r.getClassMetadataConstructorArgumentsFromMetadataReader)(e,t),lifecycle:{postConstructMethodName:n?.value,preDestroyMethodName:a?.value},properties:(0,s.getClassMetadataPropertiesFromMetadataReader)(e,t)}};const o=n(9517),i=n(3313),r=n(6249),s=n(7520)},8986:function(e,t,n){"use strict";var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=function(){return function(e,t,n){const o=new c.Metadata(a.UNMANAGED_TAG,!0);(0,d.tagParameter)(e,t,n,o)}};const a=s(n(9466)),c=n(4045),d=n(3353)},9082:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.configureButtonHandler=t.ButtonHandlerRegistry=void 0;const s=n(2650),a=n(5559),c=n(2041),d=n(4615);let l=class extends a.InstanceRegistry{constructor(e){super(),e.forEach((e=>this.register(e.TYPE,e.factory())))}};t.ButtonHandlerRegistry=l,t.ButtonHandlerRegistry=l=o([(0,s.injectable)(),r(0,(0,s.multiInject)(c.TYPES.IButtonHandlerRegistration)),r(0,(0,s.optional)()),i("design:paramtypes",[Array])],l),t.configureButtonHandler=function(e,t,n){if("function"==typeof n){if(!(0,d.isInjectable)(n))throw new Error(`Button handlers should be @injectable: ${n.name}`);e.isBound(n)||e.bind(n).toSelf()}e.bind(c.TYPES.IButtonHandlerRegistration).toDynamicValue((e=>({TYPE:t,factory:()=>e.container.get(n)})))}},9117:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0,t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},9123:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9195:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargets=void 0;const o=n(9343),i=n(8841),r=n(9750),s=n(7520),a=n(6586);t.getTargets=e=>{const t=void 0===e?o.getClassMetadata:t=>(0,i.getClassMetadataFromMetadataReader)(t,e),n=void 0===e?r.getClassMetadataProperties:t=>(0,s.getClassMetadataPropertiesFromMetadataReader)(t,e);return(0,a.getTargetsFromMetadataProviders)(t,n)}},9224:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlRootView=void 0;const i=n(417),r=n(2650),s=n(491);let a=class{render(e,t){const n=(0,i.html)("div",null,t.renderChildren(e));for(const t of e.classes)(0,s.setClass)(n,t,!0);return n}};t.HtmlRootView=a,t.HtmlRootView=a=o([(0,r.injectable)()],a)},9260:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.propertyEventDecorator=function(e,t){return()=>(n,i)=>{const r=new o.Metadata(e,i);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,r,n.constructor)}};const o=n(4045)},9343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadata=function(e){const t=(0,o.getReflectMetadata)(e,i.POST_CONSTRUCT),n=(0,o.getReflectMetadata)(e,i.PRE_DESTROY);return{constructorArguments:(0,r.getClassMetadataConstructorArguments)(e),lifecycle:{postConstructMethodName:t?.value,preDestroyMethodName:n?.value},properties:(0,s.getClassMetadataProperties)(e)}};const o=n(9517),i=n(3313),r=n(2719),s=n(9750)},9456:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(1391),s=new o.ContainerModule((e=>{e(r.ElementFader).toSelf().inSingletonScope(),e(i.TYPES.IVNodePostprocessor).toService(r.ElementFader)}));t.default=s},9466:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.PRE_DESTROY=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.PRE_DESTROY="pre_destroy",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},9486:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReconnectCommand=void 0;const s=n(2650),a=n(7020),c=n(3194),d=n(2041),l=n(5778),u=n(2565);let h=class extends c.Command{constructor(e){super(),this.action=e}execute(e){return this.doExecute(e),e.root}doExecute(e){const t=e.root.index.getById(this.action.routableId);if(t instanceof l.SRoutableElementImpl){const e=this.edgeRouterRegistry.get(t.routerKind),n=e.takeSnapshot(t);e.applyReconnect(t,this.action.newSourceId,this.action.newTargetId);const o=e.takeSnapshot(t);this.memento={edge:t,before:n,after:o}}}undo(e){return this.memento&&this.edgeRouterRegistry.get(this.memento.edge.routerKind).applySnapshot(this.memento.edge,this.memento.before),e.root}redo(e){return this.memento&&this.edgeRouterRegistry.get(this.memento.edge.routerKind).applySnapshot(this.memento.edge,this.memento.after),e.root}};t.ReconnectCommand=h,h.KIND=a.ReconnectAction.KIND,o([(0,s.inject)(u.EdgeRouterRegistry),i("design:type",u.EdgeRouterRegistry)],h.prototype,"edgeRouterRegistry",void 0),t.ReconnectCommand=h=o([(0,s.injectable)(),r(0,(0,s.inject)(d.TYPES.Action)),i("design:paramtypes",[Object])],h)},9517:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateReflectMetadata=t.getReflectMetadata=void 0;const o=n(3654);Object.defineProperty(t,"getReflectMetadata",{enumerable:!0,get:function(){return o.getReflectMetadata}});const i=n(2671);Object.defineProperty(t,"updateReflectMetadata",{enumerable:!0,get:function(){return i.updateReflectMetadata}})},9678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSVGGraphicsElement=t.hitsMouseEvent=t.getWindowScroll=t.isCrossSite=t.isMac=t.isCtrlOrCmd=void 0;const o=n(3807);function i(){return-1!==window.navigator.userAgent.indexOf("Mac")}t.isCtrlOrCmd=function(e){return i()?e.metaKey:e.ctrlKey},t.isMac=i,t.isCrossSite=function(e){if(e&&"undefined"!=typeof window&&window.location){let t="";return window.location.protocol&&(t+=window.location.protocol+"//"),window.location.host&&(t+=window.location.host),t.length>0&&!e.startsWith(t)}return!1},t.getWindowScroll=function(){return"undefined"==typeof window?o.Point.ORIGIN:{x:window.pageXOffset,y:window.pageYOffset}},t.hitsMouseEvent=function(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom},t.isSVGGraphicsElement=function(e){return"function"==typeof e.getBBox}},9687:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyTargetImpl=t.getTargets=t.getClassMetadataFromMetadataReader=t.getClassMetadata=t.getClassElementMetadataFromLegacyMetadata=t.ClassElementMetadataKind=void 0;const o=n(9195);Object.defineProperty(t,"getTargets",{enumerable:!0,get:function(){return o.getTargets}});const i=n(877);Object.defineProperty(t,"LegacyTargetImpl",{enumerable:!0,get:function(){return i.LegacyTargetImpl}});const r=n(4063);Object.defineProperty(t,"getClassElementMetadataFromLegacyMetadata",{enumerable:!0,get:function(){return r.getClassElementMetadataFromLegacyMetadata}});const s=n(9343);Object.defineProperty(t,"getClassMetadata",{enumerable:!0,get:function(){return s.getClassMetadata}});const a=n(8841);Object.defineProperty(t,"getClassMetadataFromMetadataReader",{enumerable:!0,get:function(){return a.getClassMetadataFromMetadataReader}});const c=n(6277);Object.defineProperty(t,"ClassElementMetadataKind",{enumerable:!0,get:function(){return c.ClassElementMetadataKind}})},9710:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(7259),s=n(8675),a=n(1876),c=n(508),d=n(2638),l=n(2565),u=n(2912),h=n(4223),p=n(1094),f=new o.ContainerModule(((e,t,n)=>{e(l.EdgeRouterRegistry).toSelf().inSingletonScope(),e(d.AnchorComputerRegistry).toSelf().inSingletonScope(),e(r.ManhattanEdgeRouter).toSelf().inSingletonScope(),e(i.TYPES.IEdgeRouter).toService(r.ManhattanEdgeRouter),e(a.ManhattanEllipticAnchor).toSelf().inSingletonScope(),e(i.TYPES.IAnchorComputer).toService(a.ManhattanEllipticAnchor),e(a.ManhattanRectangularAnchor).toSelf().inSingletonScope(),e(i.TYPES.IAnchorComputer).toService(a.ManhattanRectangularAnchor),e(a.ManhattanDiamondAnchor).toSelf().inSingletonScope(),e(i.TYPES.IAnchorComputer).toService(a.ManhattanDiamondAnchor),e(s.PolylineEdgeRouter).toSelf().inSingletonScope(),e(i.TYPES.IEdgeRouter).toService(s.PolylineEdgeRouter),e(c.EllipseAnchor).toSelf().inSingletonScope(),e(i.TYPES.IAnchorComputer).toService(c.EllipseAnchor),e(c.RectangleAnchor).toSelf().inSingletonScope(),e(i.TYPES.IAnchorComputer).toService(c.RectangleAnchor),e(c.DiamondAnchor).toSelf().inSingletonScope(),e(i.TYPES.IAnchorComputer).toService(c.DiamondAnchor),e(u.BezierEdgeRouter).toSelf().inSingletonScope(),e(i.TYPES.IEdgeRouter).toService(u.BezierEdgeRouter),e(h.BezierEllipseAnchor).toSelf().inSingletonScope(),e(i.TYPES.IAnchorComputer).toService(h.BezierEllipseAnchor),e(h.BezierRectangleAnchor).toSelf().inSingletonScope(),e(i.TYPES.IAnchorComputer).toService(h.BezierRectangleAnchor),e(h.BezierDiamondAnchor).toSelf().inSingletonScope(),e(i.TYPES.IAnchorComputer).toService(h.BezierDiamondAnchor),(0,p.configureCommand)({bind:e,isBound:n},u.AddRemoveBezierSegmentCommand)}));t.default=f},9714:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SetModelCommand=void 0;const s=n(2650),a=n(7020),c=n(3194),d=n(2041),l=n(7559);let u=class extends c.ResetCommand{constructor(e){super(),this.action=e}execute(e){return this.oldRoot=e.modelFactory.createRoot(e.root),this.newRoot=e.modelFactory.createRoot(this.action.newRoot),this.newRoot}undo(e){return this.oldRoot}redo(e){return this.newRoot}get blockUntil(){return e=>e.kind===l.InitializeCanvasBoundsCommand.KIND}};t.SetModelCommand=u,u.KIND=a.SetModelAction.KIND,t.SetModelCommand=u=o([(0,s.injectable)(),r(0,(0,s.inject)(d.TYPES.Action)),i("design:paramtypes",[Object])],u)},9738:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SButtonImpl=void 0;const o=n(5855),i=n(8416);class r extends o.SShapeElementImpl{constructor(){super(...arguments),this.enabled=!0}}t.SButtonImpl=r,r.DEFAULT_FEATURES=[o.boundsFeature,o.layoutableChildFeature,i.fadeFeature]},9750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataProperties=function(e){const t=(0,o.getReflectMetadata)(e,i.TAGGED_PROP),n=new Map;if(void 0!==t)for(const o of Reflect.ownKeys(t)){const i=t[o];n.set(o,(0,r.getPropertyMetadataFromLegacyMetadata)(e,o,i))}return n};const o=n(9517),i=n(3313),r=n(3498)},9817:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2650),i=n(2041),r=n(3697),s=new o.ContainerModule((e=>{e(r.UndoRedoKeyListener).toSelf().inSingletonScope(),e(i.TYPES.KeyListener).toService(r.UndoRedoKeyListener)}));t.default=s},9820:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectedViewportView=void 0;const i=n(417),r=n(2650),s=n(1638),a=n(491),c=n(2079);let d=class{render(e,t,n){const o=(0,i.html)("div",{"class-sprotty-root":!0},this.renderSvg(e,t,n),this.renderProjections(e,t,n));return(0,a.setAttr)(o,"tabindex",0),o}renderSvg(e,t,n){const o=`scale(${e.zoom}) translate(${-e.scroll.x},${-e.scroll.y})`,i="http://www.w3.org/2000/svg";return(0,s.h)("svg",{ns:i},(0,s.h)("g",{ns:i,attrs:{transform:o}},t.renderChildren(e)))}renderProjections(e,t,n){var o;if(e.zoom<=0)return[];const i=(0,c.getModelBounds)(e);if(!i)return[];const r=null!==(o=(0,c.getProjections)(e))&&void 0!==o?o:[];return[this.renderProjectionBar(r,e,i,"vertical"),this.renderProjectionBar(r,e,i,"horizontal")]}renderProjectionBar(e,t,n,o){const r={modelBounds:n,orientation:o};return r.factor="horizontal"===o?t.canvasBounds.width/n.width:t.canvasBounds.height/n.height,r.zoomedFactor=r.factor/t.zoom,(0,i.html)("div",{"class-sprotty-projection-bar":!0,"class-horizontal":"horizontal"===o,"class-vertical":"vertical"===o},this.renderViewport(t,r),e.map((e=>this.renderProjection(e,t,r))))}renderViewport(e,t){let n,o;"horizontal"===t.orientation?(n=e.canvasBounds.width,o=(e.scroll.x-t.modelBounds.x)*t.factor):(n=e.canvasBounds.height,o=(e.scroll.y-t.modelBounds.y)*t.factor);let r=n*t.zoomedFactor;o<0?(r+=o,o=0):o>n&&(o=n),r<0?r=0:o+r>n&&(r=n-o);const s="horizontal"===t.orientation?{left:`${o}px`,width:`${r}px`}:{top:`${o}px`,height:`${r}px`};return(0,i.html)("div",{"class-sprotty-viewport":!0,style:s})}renderProjection(e,t,n){let o,r,s;"horizontal"===n.orientation?(o=t.canvasBounds.width,r=(e.projectedBounds.x-n.modelBounds.x)*n.factor,s=e.projectedBounds.width*n.factor):(o=t.canvasBounds.height,r=(e.projectedBounds.y-n.modelBounds.y)*n.factor,s=e.projectedBounds.height*n.factor),r<0?(s+=r,r=0):r>o&&(r=o),s<0?s=0:r+s>o&&(s=o-r);const c="horizontal"===n.orientation?{left:`${r}px`,width:`${s}px`}:{top:`${r}px`,height:`${s}px`},d=(0,i.html)("div",{id:`${n.orientation}-projection:${e.elementId}`,"class-sprotty-projection":!0,style:c});return e.cssClasses.forEach((e=>(0,a.setClass)(d,e,!0))),d}};t.ProjectedViewportView=d,t.ProjectedViewportView=d=o([(0,r.injectable)()],d)},9875:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandStack=void 0;const r=n(2650),s=n(2041),a=n(5857),c=n(166),d=n(5453),l=n(3194);let u=class{constructor(){this.undoStack=[],this.redoStack=[],this.stoppableCommands=new Map,this.offStack=[]}initialize(){this.currentPromise=Promise.resolve({main:{model:this.modelFactory.createRoot(a.EMPTY_ROOT),modelChanged:!1},hidden:{model:this.modelFactory.createRoot(a.EMPTY_ROOT),modelChanged:!1},popup:{model:this.modelFactory.createRoot(a.EMPTY_ROOT),modelChanged:!1}})}get currentModel(){return this.currentPromise.then((e=>e.main.model))}executeAll(e){return e.forEach((e=>{this.logger.log(this,"Executing",e),this.handleCommand(e,e.execute,this.mergeOrPush)})),this.thenUpdate()}execute(e){return this.logger.log(this,"Executing",e),this.handleCommand(e,e.execute,this.mergeOrPush),this.thenUpdate()}undo(){this.undoOffStackSystemCommands(),this.undoPreceedingSystemCommands();const e=this.undoStack[this.undoStack.length-1];return void 0===e||this.isBlockUndo(e)||(this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,((e,t)=>{this.redoStack.push(e)}))),this.thenUpdate()}redo(){this.undoOffStackSystemCommands();const e=this.redoStack.pop();return void 0!==e&&(this.logger.log(this,"Redoing",e),this.handleCommand(e,e.redo,((e,t)=>{this.pushToUndoStack(e)}))),this.redoFollowingSystemCommands(),this.thenUpdate()}handleCommand(e,t,n){if((0,l.isStoppableCommand)(e)){const t=this.stoppableCommands.get(e.stoppableCommandKey);t&&t.stopExecution(),this.stoppableCommands.set(e.stoppableCommandKey,e)}this.currentPromise=this.currentPromise.then((o=>new Promise((i=>{let r;r=e instanceof l.HiddenCommand?"hidden":e instanceof l.PopupCommand?"popup":"main";const s=this.createContext(o.main.model);let a;try{a=t.call(e,s)}catch(e){this.logger.error(this,"Failed to execute command:",e),a=o[r].model}const d=h(o);a instanceof Promise?a.then((t=>{"main"===r&&n.call(this,e,s),d[r]={model:t,modelChanged:!0},i(d)})):a instanceof c.SModelRootImpl?("main"===r&&n.call(this,e,s),d[r]={model:a,modelChanged:!0},i(d)):("main"===r&&n.call(this,e,s),d[r]={model:a.model,modelChanged:o[r].modelChanged||a.modelChanged,cause:a.cause},i(d))}))))}pushToUndoStack(e){this.undoStack.push(e),this.options.undoHistoryLimit>=0&&this.undoStack.length>this.options.undoHistoryLimit&&this.undoStack.splice(0,this.undoStack.length-this.options.undoHistoryLimit)}thenUpdate(){return this.currentPromise=this.currentPromise.then((e=>{const t=h(e);return e.hidden.modelChanged&&(this.updateHidden(e.hidden.model,e.hidden.cause),t.hidden.modelChanged=!1,t.hidden.cause=void 0),e.main.modelChanged&&(this.update(e.main.model,e.main.cause),t.main.modelChanged=!1,t.main.cause=void 0),e.popup.modelChanged&&(this.updatePopup(e.popup.model,e.popup.cause),t.popup.modelChanged=!1,t.popup.cause=void 0),t})),this.currentModel}update(e,t){void 0===this.modelViewer&&(this.modelViewer=this.viewerProvider.modelViewer),this.modelViewer.update(e,t)}updateHidden(e,t){void 0===this.hiddenModelViewer&&(this.hiddenModelViewer=this.viewerProvider.hiddenModelViewer),this.hiddenModelViewer.update(e,t)}updatePopup(e,t){void 0===this.popupModelViewer&&(this.popupModelViewer=this.viewerProvider.popupModelViewer),this.popupModelViewer.update(e,t)}mergeOrPush(e,t){if(this.isBlockUndo(e))return this.undoStack=[],this.redoStack=[],this.offStack=[],void this.pushToUndoStack(e);if(this.isPushToOffStack(e)&&this.redoStack.length>0){if(this.offStack.length>0){const n=this.offStack[this.offStack.length-1];if(n instanceof l.MergeableCommand&&n.merge(e,t))return}this.offStack.push(e)}else if(this.isPushToUndoStack(e)){if(this.offStack.forEach((e=>this.undoStack.push(e))),this.offStack=[],this.redoStack=[],this.undoStack.length>0){const n=this.undoStack[this.undoStack.length-1];if(n instanceof l.MergeableCommand&&n.merge(e,t))return}this.pushToUndoStack(e)}}undoOffStackSystemCommands(){let e=this.offStack.pop();for(;void 0!==e;)this.logger.log(this,"Undoing off-stack",e),this.handleCommand(e,e.undo,(()=>{})),e=this.offStack.pop()}undoPreceedingSystemCommands(){let e=this.undoStack[this.undoStack.length-1];for(;void 0!==e&&this.isPushToOffStack(e);)this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,((e,t)=>{this.redoStack.push(e)})),e=this.undoStack[this.undoStack.length-1]}redoFollowingSystemCommands(){let e=this.redoStack[this.redoStack.length-1];for(;void 0!==e&&this.isPushToOffStack(e);)this.redoStack.pop(),this.logger.log(this,"Redoing ",e),this.handleCommand(e,e.redo,((e,t)=>{this.pushToUndoStack(e)})),e=this.redoStack[this.redoStack.length-1]}createContext(e){return{root:e,modelChanged:this,modelFactory:this.modelFactory,duration:this.options.defaultDuration,logger:this.logger,syncer:this.syncer}}isPushToOffStack(e){return e instanceof l.SystemCommand}isPushToUndoStack(e){return!(e instanceof l.HiddenCommand)}isBlockUndo(e){return e instanceof l.ResetCommand}};function h(e){return{main:Object.assign({},e.main),hidden:Object.assign({},e.hidden),popup:Object.assign({},e.popup)}}t.CommandStack=u,o([(0,r.inject)(s.TYPES.IModelFactory),i("design:type",Object)],u.prototype,"modelFactory",void 0),o([(0,r.inject)(s.TYPES.IViewerProvider),i("design:type",Object)],u.prototype,"viewerProvider",void 0),o([(0,r.inject)(s.TYPES.ILogger),i("design:type",Object)],u.prototype,"logger",void 0),o([(0,r.inject)(s.TYPES.AnimationFrameSyncer),i("design:type",d.AnimationFrameSyncer)],u.prototype,"syncer",void 0),o([(0,r.inject)(s.TYPES.CommandStackOptions),i("design:type",Object)],u.prototype,"options",void 0),o([(0,r.postConstruct)(),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],u.prototype,"initialize",null),t.CommandStack=u=o([(0,r.injectable)()],u)},9882:(e,t)=>{"use strict";function n(e){return e.hasFeature(t.selectFeature)}Object.defineProperty(t,"__esModule",{value:!0}),t.isSelected=t.isSelectable=t.selectFeature=void 0,t.selectFeature=Symbol("selectFeature"),t.isSelectable=n,t.isSelected=function(e){return void 0!==e&&n(e)&&e.selected}}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(1229)})()));